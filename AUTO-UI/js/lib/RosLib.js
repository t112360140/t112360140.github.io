var ROSLIB=function(e){"use strict";var t,r={exports:{}},n=(t||(t=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,s||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,s,o){var a=r?r+e:e;if(!this._events[a])return!1;var c,l,h=this._events[a],u=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),u){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,n),!0;case 4:return h.fn.call(h.context,t,n,i),!0;case 5:return h.fn.call(h.context,t,n,i,s),!0;case 6:return h.fn.call(h.context,t,n,i,s,o),!0}for(l=1,c=new Array(u-1);l<u;l++)c[l-1]=arguments[l];h.fn.apply(h.context,c)}else{var f,d=h.length;for(l=0;l<d;l++)switch(h[l].once&&this.removeListener(e,h[l].fn,void 0,!0),u){case 1:h[l].fn.call(h[l].context);break;case 2:h[l].fn.call(h[l].context,t);break;case 3:h[l].fn.call(h[l].context,t,n);break;case 4:h[l].fn.call(h[l].context,t,n,i);break;default:if(!c)for(f=1,c=new Array(u-1);f<u;f++)c[f-1]=arguments[f];h[l].fn.apply(h[l].context,c)}}return!0},a.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||o(this,s);else{for(var c=0,l=[],h=a.length;c<h;c++)(a[c].fn!==t||i&&!a[c].once||n&&a[c].context!==n)&&l.push(a[c]);l.length?this._events[s]=1===l.length?l[0]:l:o(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a}(r)),r.exports),i=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(n);var s={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let o;const a=new Uint8Array(16);const c=[];for(let e=0;e<256;++e)c.push((e+256).toString(16).slice(1));function l(e,t,r){const n=(e=e||{}).random??e.rng?.()??function(){if(!o){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");o=crypto.getRandomValues.bind(crypto)}return o(a)}();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=15&n[6]|64,n[8]=63&n[8]|128,function(e,t=0){return(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase()}(n)}function h(e,t,r){return s.randomUUID&&!e?s.randomUUID():l(e)}const u=(()=>{const e=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array.prototype),Symbol.toStringTag).get;return t=>e.call(t)})();function f(e){return"Uint8Array"===u(e)}function d(e){return"object"==typeof e&&null!=e&&Symbol.toStringTag in e&&"Map"===e[Symbol.toStringTag]}function p(e,t){return JSON.stringify(e,((e,t)=>"bigint"==typeof t?{$numberLong:`${t}`}:d(t)?Object.fromEntries(t):t))}const g=7,m=Symbol.for("@@mdb.bson.version"),b=2147483647,w=-2147483648,y=Math.pow(2,63)-1,E=-Math.pow(2,63),N=Math.pow(2,53),T=-Math.pow(2,53),v=1,S=2,_=3,A=4,O=5,I=6,x=7,D=8,U=9,R=10,L=11,C=12,M=13,B=14,k=15,$=16,P=17,F=18,q=19,j=255,G=127,H=4;class V extends Error{get bsonError(){return!0}get name(){return"BSONError"}constructor(e,t){super(e,t)}static isBSONError(e){return null!=e&&"object"==typeof e&&"bsonError"in e&&!0===e.bsonError&&"name"in e&&"message"in e&&"stack"in e}}class z extends V{get name(){return"BSONVersionError"}constructor(){super(`Unsupported BSON version, bson types must be from bson ${g}.x.x`)}}class Y extends V{get name(){return"BSONRuntimeError"}constructor(e){super(e)}}class W extends V{get name(){return"BSONOffsetError"}offset;constructor(e,t,r){super(`${e}. offset: ${t}`,r),this.offset=t}}let J,X;function K(e,t,r,n){if(n){J??=new TextDecoder("utf8",{fatal:!0});try{return J.decode(e.subarray(t,r))}catch(e){throw new V("Invalid UTF-8 string in BSON document",{cause:e})}}return X??=new TextDecoder("utf8",{fatal:!1}),X.decode(e.subarray(t,r))}function Z(e,t,r){if(0===e.length)return"";const n=r-t;if(0===n)return"";if(n>20)return null;if(1===n&&e[t]<128)return String.fromCharCode(e[t]);if(2===n&&e[t]<128&&e[t+1]<128)return String.fromCharCode(e[t])+String.fromCharCode(e[t+1]);if(3===n&&e[t]<128&&e[t+1]<128&&e[t+2]<128)return String.fromCharCode(e[t])+String.fromCharCode(e[t+1])+String.fromCharCode(e[t+2]);const i=[];for(let n=t;n<r;n++){const t=e[n];if(t>127)return null;i.push(t)}return String.fromCharCode(...i)}function Q(e){return te.fromNumberArray(Array.from({length:e},(()=>Math.floor(256*Math.random()))))}function ee(e){return crypto.getRandomValues(te.allocate(e))}const te={isUint8Array:f,toLocalBufferType(e){if(Buffer.isBuffer(e))return e;if(ArrayBuffer.isView(e))return Buffer.from(e.buffer,e.byteOffset,e.byteLength);const t=e?.[Symbol.toStringTag]??Object.prototype.toString.call(e);if("ArrayBuffer"===t||"SharedArrayBuffer"===t||"[object ArrayBuffer]"===t||"[object SharedArrayBuffer]"===t)return Buffer.from(e);throw new V("Cannot create Buffer from the passed potentialBuffer.")},allocate:e=>Buffer.alloc(e),allocateUnsafe:e=>Buffer.allocUnsafe(e),compare:(e,t)=>te.toLocalBufferType(e).compare(t),concat:e=>Buffer.concat(e),copy:(e,t,r,n,i)=>te.toLocalBufferType(e).copy(t,r??0,n??0,i??e.length),equals:(e,t)=>te.toLocalBufferType(e).equals(t),fromNumberArray:e=>Buffer.from(e),fromBase64:e=>Buffer.from(e,"base64"),fromUTF8:e=>Buffer.from(e,"utf8"),toBase64:e=>te.toLocalBufferType(e).toString("base64"),fromISO88591:e=>Buffer.from(e,"binary"),toISO88591:e=>te.toLocalBufferType(e).toString("binary"),fromHex:e=>Buffer.from(e,"hex"),toHex:e=>te.toLocalBufferType(e).toString("hex"),toUTF8(e,t,r,n){const i=r-t<=20?Z(e,t,r):null;if(null!=i)return i;const s=te.toLocalBufferType(e).toString("utf8",t,r);if(n)for(let n=0;n<s.length;n++)if(65533===s.charCodeAt(n)){K(e,t,r,!0);break}return s},utf8ByteLength:e=>Buffer.byteLength(e,"utf8"),encodeUTF8Into(e,t,r){const n=function(e,t,r){if(0===t.length)return 0;if(t.length>25)return null;if(e.length-r<t.length)return null;for(let n=0,i=r;n<t.length;n++,i++){const r=t.charCodeAt(n);if(r>127)return null;e[i]=r}return t.length}(e,t,r);return null!=n?n:te.toLocalBufferType(e).write(t,r,void 0,"utf8")},randomBytes:(()=>{const{crypto:e}=globalThis;return null!=e&&"function"==typeof e.getRandomValues?ee:Q})(),swap32:e=>te.toLocalBufferType(e).swap32()};function re(e){if(e<0)throw new RangeError(`The argument 'byteLength' is invalid. Received ${e}`);return se.fromNumberArray(Array.from({length:e},(()=>Math.floor(256*Math.random()))))}const ne=(()=>{const{crypto:e}=globalThis;if(null!=e&&"function"==typeof e.getRandomValues)return t=>e.getRandomValues(se.allocate(t));if(function(){const{navigator:e}=globalThis;return"object"==typeof e&&"ReactNative"===e.product}()){const{console:e}=globalThis;e?.warn?.("BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.")}return re})(),ie=/(\d|[a-f])/i,se={isUint8Array:f,toLocalBufferType(e){const t=e?.[Symbol.toStringTag]??Object.prototype.toString.call(e);if("Uint8Array"===t)return e;if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength));if("ArrayBuffer"===t||"SharedArrayBuffer"===t||"[object ArrayBuffer]"===t||"[object SharedArrayBuffer]"===t)return new Uint8Array(e);throw new V("Cannot make a Uint8Array from passed potentialBuffer.")},allocate(e){if("number"!=typeof e)throw new TypeError(`The "size" argument must be of type number. Received ${String(e)}`);return new Uint8Array(e)},allocateUnsafe:e=>se.allocate(e),compare(e,t){if(e===t)return 0;const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return e.length<t.length?-1:e.length>t.length?1:0},concat(e){if(0===e.length)return se.allocate(0);let t=0;for(const r of e)t+=r.length;const r=se.allocate(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r},copy(e,t,r,n,i){if(void 0!==i&&i<0)throw new RangeError(`The value of "sourceEnd" is out of range. It must be >= 0. Received ${i}`);if(i=i??e.length,void 0!==n&&(n<0||n>i))throw new RangeError(`The value of "sourceStart" is out of range. It must be >= 0 and <= ${i}. Received ${n}`);if(n=n??0,void 0!==r&&r<0)throw new RangeError(`The value of "targetStart" is out of range. It must be >= 0. Received ${r}`);r=r??0;const s=e.subarray(n,i),o=Math.min(s.length,t.length-r);return o<=0?0:(t.set(s.subarray(0,o),r),o)},equals(e,t){if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},fromNumberArray:e=>Uint8Array.from(e),fromBase64:e=>Uint8Array.from(atob(e),(e=>e.charCodeAt(0))),fromUTF8:e=>(new TextEncoder).encode(e),toBase64:e=>btoa(se.toISO88591(e)),fromISO88591:e=>Uint8Array.from(e,(e=>255&e.charCodeAt(0))),toISO88591:e=>Array.from(Uint16Array.from(e),(e=>String.fromCharCode(e))).join(""),fromHex(e){const t=e.length%2==0?e:e.slice(0,e.length-1),r=[];for(let e=0;e<t.length;e+=2){const n=t[e],i=t[e+1];if(!ie.test(n))break;if(!ie.test(i))break;const s=Number.parseInt(`${n}${i}`,16);r.push(s)}return Uint8Array.from(r)},toHex:e=>Array.from(e,(e=>e.toString(16).padStart(2,"0"))).join(""),toUTF8(e,t,r,n){const i=r-t<=20?Z(e,t,r):null;return null!=i?i:K(e,t,r,n)},utf8ByteLength:e=>(new TextEncoder).encode(e).byteLength,encodeUTF8Into(e,t,r){const n=(new TextEncoder).encode(t);return e.set(n,r),n.byteLength},randomBytes:ne,swap32(e){if(e.length%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e.length;t+=4){const r=e[t],n=e[t+1],i=e[t+2],s=e[t+3];e[t]=s,e[t+1]=i,e[t+2]=n,e[t+3]=r}return e}},oe="function"==typeof Buffer&&!0!==Buffer.prototype?._isBuffer?te:se,ae=Symbol.for("@@mdb.bson.type");class ce{get[ae](){return this._bsontype}get[m](){return g}[Symbol.for("nodejs.util.inspect.custom")](e,t,r){return this.inspect(e,t,r)}}const le=new Float64Array(1),he=new Uint8Array(le.buffer,0,8);le[0]=-1;const ue=0===he[7],fe={isBigEndian:ue,getNonnegativeInt32LE(e,t){if(e[t+3]>127)throw new RangeError(`Size cannot be negative at offset: ${t}`);return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24},getInt32LE:(e,t)=>e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,getUint32LE:(e,t)=>e[t]+256*e[t+1]+65536*e[t+2]+16777216*e[t+3],getUint32BE:(e,t)=>e[t+3]+256*e[t+2]+65536*e[t+1]+16777216*e[t],getBigInt64LE:(e,t)=>(BigInt(e[t+4]+256*e[t+5]+65536*e[t+6]+(e[t+7]<<24))<<32n)+BigInt(e[t]+256*e[t+1]+65536*e[t+2]+16777216*e[t+3]),getFloat64LE:ue?(e,t)=>(he[7]=e[t],he[6]=e[t+1],he[5]=e[t+2],he[4]=e[t+3],he[3]=e[t+4],he[2]=e[t+5],he[1]=e[t+6],he[0]=e[t+7],le[0]):(e,t)=>(he[0]=e[t],he[1]=e[t+1],he[2]=e[t+2],he[3]=e[t+3],he[4]=e[t+4],he[5]=e[t+5],he[6]=e[t+6],he[7]=e[t+7],le[0]),setInt32BE:(e,t,r)=>(e[t+3]=r,r>>>=8,e[t+2]=r,r>>>=8,e[t+1]=r,r>>>=8,e[t]=r,4),setInt32LE:(e,t,r)=>(e[t]=r,r>>>=8,e[t+1]=r,r>>>=8,e[t+2]=r,r>>>=8,e[t+3]=r,4),setBigInt64LE(e,t,r){const n=0xffffffffn;let i=Number(r&n);e[t]=i,i>>=8,e[t+1]=i,i>>=8,e[t+2]=i,i>>=8,e[t+3]=i;let s=Number(r>>32n&n);return e[t+4]=s,s>>=8,e[t+5]=s,s>>=8,e[t+6]=s,s>>=8,e[t+7]=s,8},setFloat64LE:ue?(e,t,r)=>(le[0]=r,e[t]=he[7],e[t+1]=he[6],e[t+2]=he[5],e[t+3]=he[4],e[t+4]=he[3],e[t+5]=he[2],e[t+6]=he[1],e[t+7]=he[0],8):(e,t,r)=>(le[0]=r,e[t]=he[0],e[t+1]=he[1],e[t+2]=he[2],e[t+3]=he[3],e[t+4]=he[4],e[t+5]=he[5],e[t+6]=he[6],e[t+7]=he[7],8)};class de extends ce{get _bsontype(){return"Binary"}static BSON_BINARY_SUBTYPE_DEFAULT=0;static BUFFER_SIZE=256;static SUBTYPE_DEFAULT=0;static SUBTYPE_FUNCTION=1;static SUBTYPE_BYTE_ARRAY=2;static SUBTYPE_UUID_OLD=3;static SUBTYPE_UUID=4;static SUBTYPE_MD5=5;static SUBTYPE_ENCRYPTED=6;static SUBTYPE_COLUMN=7;static SUBTYPE_SENSITIVE=8;static SUBTYPE_VECTOR=9;static SUBTYPE_USER_DEFINED=128;static VECTOR_TYPE=Object.freeze({Int8:3,Float32:39,PackedBit:16});buffer;sub_type;position;constructor(e,t){if(super(),null!=e&&"string"==typeof e&&!ArrayBuffer.isView(e)&&("object"!=typeof(r=e)||null==r||!(Symbol.toStringTag in r)||"ArrayBuffer"!==r[Symbol.toStringTag]&&"SharedArrayBuffer"!==r[Symbol.toStringTag])&&!Array.isArray(e))throw new V("Binary can only be constructed from Uint8Array or number[]");var r;this.sub_type=t??de.BSON_BINARY_SUBTYPE_DEFAULT,null==e?(this.buffer=oe.allocate(de.BUFFER_SIZE),this.position=0):(this.buffer=Array.isArray(e)?oe.fromNumberArray(e):oe.toLocalBufferType(e),this.position=this.buffer.byteLength)}put(e){if("string"==typeof e&&1!==e.length)throw new V("only accepts single character String");if("number"!=typeof e&&1!==e.length)throw new V("only accepts single character Uint8Array or Array");let t;if(t="string"==typeof e?e.charCodeAt(0):"number"==typeof e?e:e[0],t<0||t>255)throw new V("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.byteLength>this.position)this.buffer[this.position++]=t;else{const e=oe.allocate(de.BUFFER_SIZE+this.buffer.length);e.set(this.buffer,0),this.buffer=e,this.buffer[this.position++]=t}}write(e,t){if(t="number"==typeof t?t:this.position,this.buffer.byteLength<t+e.length){const t=oe.allocate(this.buffer.byteLength+e.length);t.set(this.buffer,0),this.buffer=t}if(ArrayBuffer.isView(e))this.buffer.set(oe.toLocalBufferType(e),t),this.position=t+e.byteLength>this.position?t+e.length:this.position;else if("string"==typeof e)throw new V("input cannot be string")}read(e,t){const r=e+(t=t&&t>0?t:this.position);return this.buffer.subarray(e,r>this.position?this.position:r)}value(){return this.buffer.length===this.position?this.buffer:this.buffer.subarray(0,this.position)}length(){return this.position}toJSON(){return oe.toBase64(this.buffer.subarray(0,this.position))}toString(e){return"hex"===e?oe.toHex(this.buffer.subarray(0,this.position)):"base64"===e?oe.toBase64(this.buffer.subarray(0,this.position)):oe.toUTF8(this.buffer,0,this.position,!1)}toExtendedJSON(e){e=e||{},this.sub_type===de.SUBTYPE_VECTOR&&pe(this);const t=oe.toBase64(this.buffer),r=Number(this.sub_type).toString(16);return e.legacy?{$binary:t,$type:1===r.length?"0"+r:r}:{$binary:{base64:t,subType:1===r.length?"0"+r:r}}}toUUID(){if(this.sub_type===de.SUBTYPE_UUID)return new be(this.buffer.subarray(0,this.position));throw new V(`Binary sub_type "${this.sub_type}" is not supported for converting to UUID. Only "${de.SUBTYPE_UUID}" is currently supported.`)}static createFromHexString(e,t){return new de(oe.fromHex(e),t)}static createFromBase64(e,t){return new de(oe.fromBase64(e),t)}static fromExtendedJSON(e,t){let r,n;if(t=t||{},"$binary"in e?t.legacy&&"string"==typeof e.$binary&&"$type"in e?(n=e.$type?parseInt(e.$type,16):0,r=oe.fromBase64(e.$binary)):"string"!=typeof e.$binary&&(n=e.$binary.subType?parseInt(e.$binary.subType,16):0,r=oe.fromBase64(e.$binary.base64)):"$uuid"in e&&(n=4,r=be.bytesFromString(e.$uuid)),!r)throw new V(`Unexpected Binary Extended JSON format ${JSON.stringify(e)}`);return n===H?new be(r):new de(r,n)}inspect(e,t,r){r??=p;return`Binary.createFromBase64(${r(oe.toBase64(this.buffer.subarray(0,this.position)),t)}, ${r(this.sub_type,t)})`}toInt8Array(){if(this.sub_type!==de.SUBTYPE_VECTOR)throw new V("Binary sub_type is not Vector");if(this.buffer[0]!==de.VECTOR_TYPE.Int8)throw new V("Binary datatype field is not Int8");return pe(this),new Int8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toFloat32Array(){if(this.sub_type!==de.SUBTYPE_VECTOR)throw new V("Binary sub_type is not Vector");if(this.buffer[0]!==de.VECTOR_TYPE.Float32)throw new V("Binary datatype field is not Float32");pe(this);const e=new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position));return fe.isBigEndian&&oe.swap32(e),new Float32Array(e.buffer)}toPackedBits(){if(this.sub_type!==de.SUBTYPE_VECTOR)throw new V("Binary sub_type is not Vector");if(this.buffer[0]!==de.VECTOR_TYPE.PackedBit)throw new V("Binary datatype field is not packed bit");return pe(this),new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toBits(){if(this.sub_type!==de.SUBTYPE_VECTOR)throw new V("Binary sub_type is not Vector");if(this.buffer[0]!==de.VECTOR_TYPE.PackedBit)throw new V("Binary datatype field is not packed bit");pe(this);const e=8*(this.length()-2)-this.buffer[1],t=new Int8Array(e);for(let e=0;e<t.length;e++){const r=e/8|0,n=this.buffer[r+2]>>7-e%8&1;t[e]=n}return t}static fromInt8Array(e){const t=oe.allocate(e.byteLength+2);t[0]=de.VECTOR_TYPE.Int8,t[1]=0;const r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);t.set(r,2);const n=new this(t,this.SUBTYPE_VECTOR);return pe(n),n}static fromFloat32Array(e){const t=oe.allocate(e.byteLength+2);t[0]=de.VECTOR_TYPE.Float32,t[1]=0;const r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);t.set(r,2),fe.isBigEndian&&oe.swap32(new Uint8Array(t.buffer,2));const n=new this(t,this.SUBTYPE_VECTOR);return pe(n),n}static fromPackedBits(e,t=0){const r=oe.allocate(e.byteLength+2);r[0]=de.VECTOR_TYPE.PackedBit,r[1]=t,r.set(e,2);const n=new this(r,this.SUBTYPE_VECTOR);return pe(n),n}static fromBits(e){const t=e.length+7>>>3,r=new Uint8Array(t+2);r[0]=de.VECTOR_TYPE.PackedBit;const n=e.length%8;r[1]=0===n?0:8-n;for(let t=0;t<e.length;t++){const n=t>>>3,i=e[t];if(0!==i&&1!==i)throw new V(`Invalid bit value at ${t}: must be 0 or 1, found ${e[t]}`);if(0===i)continue;const s=7-t%8;r[n+2]|=i<<s}return new this(r,de.SUBTYPE_VECTOR)}}function pe(e){if(e.sub_type!==de.SUBTYPE_VECTOR)return;const t=e.position,r=e.buffer[0],n=e.buffer[1];if((r===de.VECTOR_TYPE.Float32||r===de.VECTOR_TYPE.Int8)&&0!==n)throw new V("Invalid Vector: padding must be zero for int8 and float32 vectors");if(r===de.VECTOR_TYPE.Float32&&0!==t&&t-2!=0&&(t-2)%4!=0)throw new V("Invalid Vector: Float32 vector must contain a multiple of 4 bytes");if(r===de.VECTOR_TYPE.PackedBit&&0!==n&&2===t)throw new V("Invalid Vector: padding must be zero for packed bit vectors that are empty");if(r===de.VECTOR_TYPE.PackedBit&&n>7)throw new V(`Invalid Vector: padding must be a value between 0 and 7. found: ${n}`)}const ge=/^[0-9A-F]{32}$/i,me=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i;class be extends de{constructor(e){let t;if(null==e)t=be.generate();else if(e instanceof be)t=oe.toLocalBufferType(new Uint8Array(e.buffer));else if(ArrayBuffer.isView(e)&&16===e.byteLength)t=oe.toLocalBufferType(e);else{if("string"!=typeof e)throw new V("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");t=be.bytesFromString(e)}super(t,H)}get id(){return this.buffer}set id(e){this.buffer=e}toHexString(e=!0){return e?[oe.toHex(this.buffer.subarray(0,4)),oe.toHex(this.buffer.subarray(4,6)),oe.toHex(this.buffer.subarray(6,8)),oe.toHex(this.buffer.subarray(8,10)),oe.toHex(this.buffer.subarray(10,16))].join("-"):oe.toHex(this.buffer)}toString(e){return"hex"===e?oe.toHex(this.id):"base64"===e?oe.toBase64(this.id):this.toHexString()}toJSON(){return this.toHexString()}equals(e){if(!e)return!1;if(e instanceof be)return oe.equals(e.id,this.id);try{return oe.equals(new be(e).id,this.id)}catch{return!1}}toBinary(){return new de(this.id,de.SUBTYPE_UUID)}static generate(){const e=oe.randomBytes(16);return e[6]=15&e[6]|64,e[8]=63&e[8]|128,e}static isValid(e){return!!e&&("string"==typeof e?be.isValidUUIDString(e):f(e)?16===e.byteLength:"Binary"===e._bsontype&&e.sub_type===this.SUBTYPE_UUID&&16===e.buffer.byteLength)}static createFromHexString(e){const t=be.bytesFromString(e);return new be(t)}static createFromBase64(e){return new be(oe.fromBase64(e))}static bytesFromString(e){if(!be.isValidUUIDString(e))throw new V("UUID string representation must be 32 hex digits or canonical hyphenated representation");return oe.fromHex(e.replace(/-/g,""))}static isValidUUIDString(e){return ge.test(e)||me.test(e)}inspect(e,t,r){return r??=p,`new UUID(${r(this.toHexString(),t)})`}}class we extends ce{get _bsontype(){return"Code"}code;scope;constructor(e,t){super(),this.code=e.toString(),this.scope=t??null}toJSON(){return null!=this.scope?{code:this.code,scope:this.scope}:{code:this.code}}toExtendedJSON(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}static fromExtendedJSON(e){return new we(e.$code,e.$scope)}inspect(e,t,r){r??=p;let n=r(this.code,t);const i=n.includes("\n");null!=this.scope&&(n+=`,${i?"\n":" "}${r(this.scope,t)}`);return`new Code(${i?"\n":""}${n}${i&&null===this.scope?"\n":""})`}}function ye(e){return null!=e&&"object"==typeof e&&"$id"in e&&null!=e.$id&&"$ref"in e&&"string"==typeof e.$ref&&(!("$db"in e)||"$db"in e&&"string"==typeof e.$db)}class Ee extends ce{get _bsontype(){return"DBRef"}collection;oid;db;fields;constructor(e,t,r,n){super();const i=e.split(".");2===i.length&&(r=i.shift(),e=i.shift()),this.collection=e,this.oid=t,this.db=r,this.fields=n||{}}get namespace(){return this.collection}set namespace(e){this.collection=e}toJSON(){const e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(e.$db=this.db),e}toExtendedJSON(e){e=e||{};let t={$ref:this.collection,$id:this.oid};return e.legacy||(this.db&&(t.$db=this.db),t=Object.assign(t,this.fields)),t}static fromExtendedJSON(e){const t=Object.assign({},e);return delete t.$ref,delete t.$id,delete t.$db,new Ee(e.$ref,e.$id,e.$db,t)}inspect(e,t,r){r??=p;const n=[r(this.namespace,t),r(this.oid,t),...this.db?[r(this.db,t)]:[],...Object.keys(this.fields).length>0?[r(this.fields,t)]:[]];return n[1]=r===p?`new ObjectId(${n[1]})`:n[1],`new DBRef(${n.join(", ")})`}}function Ne(e){if(""===e)return e;let t=0;const r="-"===e[t],n="+"===e[t];(n||r)&&(t+=1);let i=!1;for(;t<e.length&&"0"===e[t];++t)i=!0;return i?`${r?"-":""}${e.length===t?"0":e.slice(t)}`:n?e.slice(1):e}let Te;try{Te=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}const ve=4294967296,Se=0x10000000000000000,_e=Se/2,Ae={},Oe={},Ie=/^(\+?0|(\+|-)?[1-9][0-9]*)$/;class xe extends ce{get _bsontype(){return"Long"}get __isLong__(){return!0}high;low;unsigned;constructor(e=0,t,r){super();const n="boolean"==typeof t?t:Boolean(r),i="number"==typeof t?t:0,s="string"==typeof e?xe.fromString(e,n):"bigint"==typeof e?xe.fromBigInt(e,n):{low:0|e,high:0|i,unsigned:n};this.low=s.low,this.high=s.high,this.unsigned=s.unsigned}static TWO_PWR_24=xe.fromInt(16777216);static MAX_UNSIGNED_VALUE=xe.fromBits(-1,-1,!0);static ZERO=xe.fromInt(0);static UZERO=xe.fromInt(0,!0);static ONE=xe.fromInt(1);static UONE=xe.fromInt(1,!0);static NEG_ONE=xe.fromInt(-1);static MAX_VALUE=xe.fromBits(-1,2147483647,!1);static MIN_VALUE=xe.fromBits(0,-2147483648,!1);static fromBits(e,t,r){return new xe(e,t,r)}static fromInt(e,t){let r,n,i;return t?(i=0<=(e>>>=0)&&e<256)&&(n=Oe[e],n)?n:(r=xe.fromBits(e,(0|e)<0?-1:0,!0),i&&(Oe[e]=r),r):(i=-128<=(e|=0)&&e<128)&&(n=Ae[e],n)?n:(r=xe.fromBits(e,e<0?-1:0,!1),i&&(Ae[e]=r),r)}static fromNumber(e,t){if(isNaN(e))return t?xe.UZERO:xe.ZERO;if(t){if(e<0)return xe.UZERO;if(e>=Se)return xe.MAX_UNSIGNED_VALUE}else{if(e<=-_e)return xe.MIN_VALUE;if(e+1>=_e)return xe.MAX_VALUE}return e<0?xe.fromNumber(-e,t).neg():xe.fromBits(e%ve|0,e/ve|0,t)}static fromBigInt(e,t){const r=0xffffffffn;return new xe(Number(e&r),Number(e>>32n&r),t)}static _fromString(e,t,r){if(0===e.length)throw new V("empty string");if(r<2||36<r)throw new V("radix");let n;if((n=e.indexOf("-"))>0)throw new V("interior hyphen");if(0===n)return xe._fromString(e.substring(1),t,r).neg();const i=xe.fromNumber(Math.pow(r,8));let s=xe.ZERO;for(let t=0;t<e.length;t+=8){const n=Math.min(8,e.length-t),o=parseInt(e.substring(t,t+n),r);if(n<8){const e=xe.fromNumber(Math.pow(r,n));s=s.mul(e).add(xe.fromNumber(o))}else s=s.mul(i),s=s.add(xe.fromNumber(o))}return s.unsigned=t,s}static fromStringStrict(e,t,r){let n=!1;if("number"==typeof t?(r=t,t=!1):n=!!t,r??=10,e.trim()!==e)throw new V(`Input: '${e}' contains leading and/or trailing whitespace`);if(!function(e,t){const r="0123456789abcdefghijklmnopqrstuvwxyz".slice(0,t=t??10);return!new RegExp(`[^-+${r}]`,"i").test(e)&&e}(e,r))throw new V(`Input: '${e}' contains invalid characters for radix: ${r}`);const i=Ne(e),s=xe._fromString(i,n,r);if(s.toString(r).toLowerCase()!==i.toLowerCase())throw new V(`Input: ${e} is not representable as ${s.unsigned?"an unsigned":"a signed"} 64-bit Long ${null!=r?`with radix: ${r}`:""}`);return s}static fromString(e,t,r){let n=!1;return"number"==typeof t?(r=t,t=!1):n=!!t,r??=10,"NaN"===e&&r<24||("Infinity"===e||"+Infinity"===e||"-Infinity"===e)&&r<35?xe.ZERO:xe._fromString(e,n,r)}static fromBytes(e,t,r){return r?xe.fromBytesLE(e,t):xe.fromBytesBE(e,t)}static fromBytesLE(e,t){return new xe(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)}static fromBytesBE(e,t){return new xe(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}static isLong(e){return null!=e&&"object"==typeof e&&"__isLong__"in e&&!0===e.__isLong__}static fromValue(e,t){return"number"==typeof e?xe.fromNumber(e,t):"string"==typeof e?xe.fromString(e,t):xe.fromBits(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}add(e){xe.isLong(e)||(e=xe.fromValue(e));const t=this.high>>>16,r=65535&this.high,n=this.low>>>16,i=65535&this.low,s=e.high>>>16,o=65535&e.high,a=e.low>>>16;let c=0,l=0,h=0,u=0;return u+=i+(65535&e.low),h+=u>>>16,u&=65535,h+=n+a,l+=h>>>16,h&=65535,l+=r+o,c+=l>>>16,l&=65535,c+=t+s,c&=65535,xe.fromBits(h<<16|u,c<<16|l,this.unsigned)}and(e){return xe.isLong(e)||(e=xe.fromValue(e)),xe.fromBits(this.low&e.low,this.high&e.high,this.unsigned)}compare(e){if(xe.isLong(e)||(e=xe.fromValue(e)),this.eq(e))return 0;const t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1}comp(e){return this.compare(e)}divide(e){if(xe.isLong(e)||(e=xe.fromValue(e)),e.isZero())throw new V("division by zero");if(Te){if(!this.unsigned&&-2147483648===this.high&&-1===e.low&&-1===e.high)return this;const t=(this.unsigned?Te.div_u:Te.div_s)(this.low,this.high,e.low,e.high);return xe.fromBits(t,Te.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?xe.UZERO:xe.ZERO;let t,r,n;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return xe.UZERO;if(e.gt(this.shru(1)))return xe.UONE;n=xe.UZERO}else{if(this.eq(xe.MIN_VALUE)){if(e.eq(xe.ONE)||e.eq(xe.NEG_ONE))return xe.MIN_VALUE;if(e.eq(xe.MIN_VALUE))return xe.ONE;return t=this.shr(1).div(e).shl(1),t.eq(xe.ZERO)?e.isNegative()?xe.ONE:xe.NEG_ONE:(r=this.sub(e.mul(t)),n=t.add(r.div(e)),n)}if(e.eq(xe.MIN_VALUE))return this.unsigned?xe.UZERO:xe.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();n=xe.ZERO}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));const i=Math.ceil(Math.log(t)/Math.LN2),s=i<=48?1:Math.pow(2,i-48);let o=xe.fromNumber(t),a=o.mul(e);for(;a.isNegative()||a.gt(r);)t-=s,o=xe.fromNumber(t,this.unsigned),a=o.mul(e);o.isZero()&&(o=xe.ONE),n=n.add(o),r=r.sub(a)}return n}div(e){return this.divide(e)}equals(e){return xe.isLong(e)||(e=xe.fromValue(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)}eq(e){return this.equals(e)}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){if(this.isNegative())return this.eq(xe.MIN_VALUE)?64:this.neg().getNumBitsAbs();const e=0!==this.high?this.high:this.low;let t;for(t=31;t>0&&0==(e&1<<t);t--);return 0!==this.high?t+33:t+1}greaterThan(e){return this.comp(e)>0}gt(e){return this.greaterThan(e)}greaterThanOrEqual(e){return this.comp(e)>=0}gte(e){return this.greaterThanOrEqual(e)}ge(e){return this.greaterThanOrEqual(e)}isEven(){return 0==(1&this.low)}isNegative(){return!this.unsigned&&this.high<0}isOdd(){return 1==(1&this.low)}isPositive(){return this.unsigned||this.high>=0}isZero(){return 0===this.high&&0===this.low}lessThan(e){return this.comp(e)<0}lt(e){return this.lessThan(e)}lessThanOrEqual(e){return this.comp(e)<=0}lte(e){return this.lessThanOrEqual(e)}modulo(e){if(xe.isLong(e)||(e=xe.fromValue(e)),Te){const t=(this.unsigned?Te.rem_u:Te.rem_s)(this.low,this.high,e.low,e.high);return xe.fromBits(t,Te.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))}mod(e){return this.modulo(e)}rem(e){return this.modulo(e)}multiply(e){if(this.isZero())return xe.ZERO;if(xe.isLong(e)||(e=xe.fromValue(e)),Te){const t=Te.mul(this.low,this.high,e.low,e.high);return xe.fromBits(t,Te.get_high(),this.unsigned)}if(e.isZero())return xe.ZERO;if(this.eq(xe.MIN_VALUE))return e.isOdd()?xe.MIN_VALUE:xe.ZERO;if(e.eq(xe.MIN_VALUE))return this.isOdd()?xe.MIN_VALUE:xe.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(xe.TWO_PWR_24)&&e.lt(xe.TWO_PWR_24))return xe.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);const t=this.high>>>16,r=65535&this.high,n=this.low>>>16,i=65535&this.low,s=e.high>>>16,o=65535&e.high,a=e.low>>>16,c=65535&e.low;let l=0,h=0,u=0,f=0;return f+=i*c,u+=f>>>16,f&=65535,u+=n*c,h+=u>>>16,u&=65535,u+=i*a,h+=u>>>16,u&=65535,h+=r*c,l+=h>>>16,h&=65535,h+=n*a,l+=h>>>16,h&=65535,h+=i*o,l+=h>>>16,h&=65535,l+=t*c+r*a+n*o+i*s,l&=65535,xe.fromBits(u<<16|f,l<<16|h,this.unsigned)}mul(e){return this.multiply(e)}negate(){return!this.unsigned&&this.eq(xe.MIN_VALUE)?xe.MIN_VALUE:this.not().add(xe.ONE)}neg(){return this.negate()}not(){return xe.fromBits(~this.low,~this.high,this.unsigned)}notEquals(e){return!this.equals(e)}neq(e){return this.notEquals(e)}ne(e){return this.notEquals(e)}or(e){return xe.isLong(e)||(e=xe.fromValue(e)),xe.fromBits(this.low|e.low,this.high|e.high,this.unsigned)}shiftLeft(e){return xe.isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?xe.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):xe.fromBits(0,this.low<<e-32,this.unsigned)}shl(e){return this.shiftLeft(e)}shiftRight(e){return xe.isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?xe.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):xe.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)}shr(e){return this.shiftRight(e)}shiftRightUnsigned(e){if(xe.isLong(e)&&(e=e.toInt()),0===(e&=63))return this;{const t=this.high;if(e<32){const r=this.low;return xe.fromBits(r>>>e|t<<32-e,t>>>e,this.unsigned)}return 32===e?xe.fromBits(t,0,this.unsigned):xe.fromBits(t>>>e-32,0,this.unsigned)}}shr_u(e){return this.shiftRightUnsigned(e)}shru(e){return this.shiftRightUnsigned(e)}subtract(e){return xe.isLong(e)||(e=xe.fromValue(e)),this.add(e.neg())}sub(e){return this.subtract(e)}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){return this.unsigned?(this.high>>>0)*ve+(this.low>>>0):this.high*ve+(this.low>>>0)}toBigInt(){return BigInt(this.toString())}toBytes(e){return e?this.toBytesLE():this.toBytesBE()}toBytesLE(){const e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]}toBytesBE(){const e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]}toSigned(){return this.unsigned?xe.fromBits(this.low,this.high,!1):this}toString(e){if((e=e||10)<2||36<e)throw new V("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(xe.MIN_VALUE)){const t=xe.fromNumber(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}const t=xe.fromNumber(Math.pow(e,6),this.unsigned);let r=this,n="";for(;;){const i=r.div(t);let s=(r.sub(i.mul(t)).toInt()>>>0).toString(e);if(r=i,r.isZero())return s+n;for(;s.length<6;)s="0"+s;n=""+s+n}}toUnsigned(){return this.unsigned?this:xe.fromBits(this.low,this.high,!0)}xor(e){return xe.isLong(e)||(e=xe.fromValue(e)),xe.fromBits(this.low^e.low,this.high^e.high,this.unsigned)}eqz(){return this.isZero()}le(e){return this.lessThanOrEqual(e)}toExtendedJSON(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}}static fromExtendedJSON(e,t){const{useBigInt64:r=!1,relaxed:n=!0}={...t};if(e.$numberLong.length>20)throw new V("$numberLong string is too long");if(!Ie.test(e.$numberLong))throw new V(`$numberLong string "${e.$numberLong}" is in an invalid format`);if(r){const t=BigInt(e.$numberLong);return BigInt.asIntN(64,t)}const i=xe.fromString(e.$numberLong);return n?i.toNumber():i}inspect(e,t,r){r??=p;return`new Long(${r(this.toString(),t)}${this.unsigned?`, ${r(this.unsigned,t)}`:""})`}}const De=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,Ue=/^(\+|-)?(Infinity|inf)$/i,Re=/^(\+|-)?NaN$/i,Le=6111,Ce=-6176,Me=oe.fromNumberArray([124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),Be=oe.fromNumberArray([248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),ke=oe.fromNumberArray([120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),$e=/^([-+])?(\d+)?$/;function Pe(e){return!isNaN(parseInt(e,10))}function Fe(e){const t=xe.fromNumber(1e9);let r=xe.fromNumber(0);if(!(e.parts[0]||e.parts[1]||e.parts[2]||e.parts[3]))return{quotient:e,rem:r};for(let n=0;n<=3;n++)r=r.shiftLeft(32),r=r.add(new xe(e.parts[n],0)),e.parts[n]=r.div(t).low,r=r.modulo(t);return{quotient:e,rem:r}}function qe(e,t){throw new V(`"${e}" is not a valid Decimal128 string - ${t}`)}class je extends ce{get _bsontype(){return"Decimal128"}bytes;constructor(e){if(super(),"string"==typeof e)this.bytes=je.fromString(e).bytes;else{if(!(e instanceof Uint8Array||f(e)))throw new V("Decimal128 must take a Buffer or string");if(16!==e.byteLength)throw new V("Decimal128 must take a Buffer of 16 bytes");this.bytes=e}}static fromString(e){return je._fromString(e,{allowRounding:!1})}static fromStringWithRounding(e){return je._fromString(e,{allowRounding:!0})}static _fromString(e,t){let r=!1,n=!1,i=!1,s=!1,o=0,a=0,c=0,l=0,h=0;const u=[0];let f=0,d=0,p=0,g=0,m=new xe(0,0),b=new xe(0,0),w=0,y=0;if(e.length>=7e3)throw new V(e+" not a valid Decimal128 string");const E=e.match(De),N=e.match(Ue),T=e.match(Re);if(!E&&!N&&!T||0===e.length)throw new V(e+" not a valid Decimal128 string");if(E){const t=E[2],r=E[4],n=E[5],i=E[6];r&&void 0===i&&qe(e,"missing exponent power"),r&&void 0===t&&qe(e,"missing exponent base"),void 0===r&&(n||i)&&qe(e,"missing e before exponent")}if("+"!==e[y]&&"-"!==e[y]||(n=!0,r="-"===e[y++]),!Pe(e[y])&&"."!==e[y]){if("i"===e[y]||"I"===e[y])return new je(r?Be:ke);if("N"===e[y])return new je(Me)}for(;Pe(e[y])||"."===e[y];)"."!==e[y]?(f<34&&("0"!==e[y]||s)&&(s||(h=a),s=!0,u[d++]=parseInt(e[y],10),f+=1),s&&(c+=1),i&&(l+=1),a+=1,y+=1):(i&&qe(e,"contains multiple periods"),i=!0,y+=1);if(i&&!a)throw new V(e+" not a valid Decimal128 string");if("e"===e[y]||"E"===e[y]){const t=e.substr(++y).match($e);if(!t||!t[2])return new je(Me);g=parseInt(t[0],10),y+=t[0].length}if(e[y])return new je(Me);if(f){if(p=f-1,o=c,1!==o)for(;"0"===e[h+o-1+Number(n)+Number(i)];)o-=1}else u[0]=0,c=1,f=1,o=0;for(g<=l&&l>g+16384?g=Ce:g-=l;g>Le;){if(p+=1,p>=34){if(0===o){g=Le;break}qe(e,"overflow")}g-=1}if(t.allowRounding){for(;g<Ce||f<c;){if(0===p&&o<f){g=Ce,o=0;break}if(f<c?c-=1:p-=1,g<Le)g+=1;else{if(u.join("").match(/^0+$/)){g=Le;break}qe(e,"overflow")}}if(p+1<o){let t=a;i&&(h+=1,t+=1),n&&(h+=1,t+=1);const s=parseInt(e[h+p+1],10);let o=0;if(s>=5&&(o=1,5===s)){o=u[p]%2==1?1:0;for(let r=h+p+2;r<t;r++)if(parseInt(e[r],10)){o=1;break}}if(o){let e=p;for(;e>=0&&++u[e]>9;e--)if(u[e]=0,0===e){if(!(g<Le))return new je(r?Be:ke);g+=1,u[e]=1}}}}else{for(;g<Ce||f<c;){if(0===p){if(0===o){g=Ce;break}qe(e,"exponent underflow")}f<c?("0"!==e[c-1+Number(n)+Number(i)]&&0!==o&&qe(e,"inexact rounding"),c-=1):(0!==u[p]&&qe(e,"inexact rounding"),p-=1),g<Le?g+=1:qe(e,"overflow")}if(p+1<o){i&&(h+=1),n&&(h+=1);0!==parseInt(e[h+p+1],10)&&qe(e,"inexact rounding")}}if(m=xe.fromNumber(0),b=xe.fromNumber(0),0===o)m=xe.fromNumber(0),b=xe.fromNumber(0);else if(p<17){let e=0;for(b=xe.fromNumber(u[e++]),m=new xe(0,0);e<=p;e++)b=b.multiply(xe.fromNumber(10)),b=b.add(xe.fromNumber(u[e]))}else{let e=0;for(m=xe.fromNumber(u[e++]);e<=p-17;e++)m=m.multiply(xe.fromNumber(10)),m=m.add(xe.fromNumber(u[e]));for(b=xe.fromNumber(u[e++]);e<=p;e++)b=b.multiply(xe.fromNumber(10)),b=b.add(xe.fromNumber(u[e]))}const v=function(e,t){if(!e&&!t)return{high:xe.fromNumber(0),low:xe.fromNumber(0)};const r=e.shiftRightUnsigned(32),n=new xe(e.getLowBits(),0),i=t.shiftRightUnsigned(32),s=new xe(t.getLowBits(),0);let o=r.multiply(i),a=r.multiply(s);const c=n.multiply(i);let l=n.multiply(s);return o=o.add(a.shiftRightUnsigned(32)),a=new xe(a.getLowBits(),0).add(c).add(l.shiftRightUnsigned(32)),o=o.add(a.shiftRightUnsigned(32)),l=a.shiftLeft(32).add(new xe(l.getLowBits(),0)),{high:o,low:l}}(m,xe.fromString("100000000000000000"));v.low=v.low.add(b),function(e,t){const r=e.high>>>0,n=t.high>>>0;if(r<n)return!0;if(r===n&&e.low>>>0<t.low>>>0)return!0;return!1}(v.low,b)&&(v.high=v.high.add(xe.fromNumber(1))),w=g+6176;const S={low:xe.fromNumber(0),high:xe.fromNumber(0)};v.high.shiftRightUnsigned(49).and(xe.fromNumber(1)).equals(xe.fromNumber(1))?(S.high=S.high.or(xe.fromNumber(3).shiftLeft(61)),S.high=S.high.or(xe.fromNumber(w).and(xe.fromNumber(16383).shiftLeft(47))),S.high=S.high.or(v.high.and(xe.fromNumber(0x7fffffffffff)))):(S.high=S.high.or(xe.fromNumber(16383&w).shiftLeft(49)),S.high=S.high.or(v.high.and(xe.fromNumber(562949953421311)))),S.low=v.low,r&&(S.high=S.high.or(xe.fromString("9223372036854775808")));const _=oe.allocateUnsafe(16);return y=0,_[y++]=255&S.low.low,_[y++]=S.low.low>>8&255,_[y++]=S.low.low>>16&255,_[y++]=S.low.low>>24&255,_[y++]=255&S.low.high,_[y++]=S.low.high>>8&255,_[y++]=S.low.high>>16&255,_[y++]=S.low.high>>24&255,_[y++]=255&S.high.low,_[y++]=S.high.low>>8&255,_[y++]=S.high.low>>16&255,_[y++]=S.high.low>>24&255,_[y++]=255&S.high.high,_[y++]=S.high.high>>8&255,_[y++]=S.high.high>>16&255,_[y++]=S.high.high>>24&255,new je(_)}toString(){let e,t=0;const r=new Array(36);for(let e=0;e<r.length;e++)r[e]=0;let n,i,s,o=0,a=!1,c={parts:[0,0,0,0]};const l=[];o=0;const h=this.bytes,u=h[o++]|h[o++]<<8|h[o++]<<16|h[o++]<<24,f=h[o++]|h[o++]<<8|h[o++]<<16|h[o++]<<24,d=h[o++]|h[o++]<<8|h[o++]<<16|h[o++]<<24,p=h[o++]|h[o++]<<8|h[o++]<<16|h[o++]<<24;o=0;({low:new xe(u,f),high:new xe(d,p)}).high.lessThan(xe.ZERO)&&l.push("-");const g=p>>26&31;if(g>>3==3){if(30===g)return l.join("")+"Infinity";if(31===g)return"NaN";e=p>>15&16383,n=8+(p>>14&1)}else n=p>>14&7,e=p>>17&16383;const m=e-6176;if(c.parts[0]=(16383&p)+((15&n)<<14),c.parts[1]=d,c.parts[2]=f,c.parts[3]=u,0===c.parts[0]&&0===c.parts[1]&&0===c.parts[2]&&0===c.parts[3])a=!0;else for(s=3;s>=0;s--){let e=0;const t=Fe(c);if(c=t.quotient,e=t.rem.low,e)for(i=8;i>=0;i--)r[9*s+i]=e%10,e=Math.floor(e/10)}if(a)t=1,r[o]=0;else for(t=36;!r[o];)t-=1,o+=1;const b=t-1+m;if(b>=34||b<=-7||m>0){if(t>34)return l.push("0"),m>0?l.push(`E+${m}`):m<0&&l.push(`E${m}`),l.join("");l.push(`${r[o++]}`),t-=1,t&&l.push(".");for(let e=0;e<t;e++)l.push(`${r[o++]}`);l.push("E"),b>0?l.push(`+${b}`):l.push(`${b}`)}else if(m>=0)for(let e=0;e<t;e++)l.push(`${r[o++]}`);else{let e=t+m;if(e>0)for(let t=0;t<e;t++)l.push(`${r[o++]}`);else l.push("0");for(l.push(".");e++<0;)l.push("0");for(let n=0;n<t-Math.max(e-1,0);n++)l.push(`${r[o++]}`)}return l.join("")}toJSON(){return{$numberDecimal:this.toString()}}toExtendedJSON(){return{$numberDecimal:this.toString()}}static fromExtendedJSON(e){return je.fromString(e.$numberDecimal)}inspect(e,t,r){r??=p;return`new Decimal128(${r(this.toString(),t)})`}}class Ge extends ce{get _bsontype(){return"Double"}value;constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=+e}static fromString(e){const t=Number(e);if("NaN"===e)return new Ge(NaN);if("Infinity"===e)return new Ge(1/0);if("-Infinity"===e)return new Ge(-1/0);if(!Number.isFinite(t))throw new V(`Input: ${e} is not representable as a Double`);if(e.trim()!==e)throw new V(`Input: '${e}' contains whitespace`);if(""===e)throw new V("Input is an empty string");if(/[^-0-9.+eE]/.test(e))throw new V(`Input: '${e}' is not in decimal or exponential notation`);return new Ge(t)}valueOf(){return this.value}toJSON(){return this.value}toString(e){return this.value.toString(e)}toExtendedJSON(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-0.0"}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}static fromExtendedJSON(e,t){const r=parseFloat(e.$numberDouble);return t&&t.relaxed?r:new Ge(r)}inspect(e,t,r){return r??=p,`new Double(${r(this.value,t)})`}}class He extends ce{get _bsontype(){return"Int32"}value;constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=0|+e}static fromString(e){const t=Ne(e),r=Number(e);if(b<r)throw new V(`Input: '${e}' is larger than the maximum value for Int32`);if(w>r)throw new V(`Input: '${e}' is smaller than the minimum value for Int32`);if(!Number.isSafeInteger(r))throw new V(`Input: '${e}' is not a safe integer`);if(r.toString()!==t)throw new V(`Input: '${e}' is not a valid Int32 string`);return new He(r)}valueOf(){return this.value}toString(e){return this.value.toString(e)}toJSON(){return this.value}toExtendedJSON(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}}static fromExtendedJSON(e,t){return t&&t.relaxed?parseInt(e.$numberInt,10):new He(e.$numberInt)}inspect(e,t,r){return r??=p,`new Int32(${r(this.value,t)})`}}class Ve extends ce{get _bsontype(){return"MaxKey"}toExtendedJSON(){return{$maxKey:1}}static fromExtendedJSON(){return new Ve}inspect(){return"new MaxKey()"}}class ze extends ce{get _bsontype(){return"MinKey"}toExtendedJSON(){return{$minKey:1}}static fromExtendedJSON(){return new ze}inspect(){return"new MinKey()"}}let Ye=null;const We=new WeakMap;class Je extends ce{get _bsontype(){return"ObjectId"}static index=Math.floor(16777215*Math.random());static cacheHexString;buffer;constructor(e){let t;if(super(),"object"==typeof e&&e&&"id"in e){if("string"!=typeof e.id&&!ArrayBuffer.isView(e.id))throw new V("Argument passed in must have an id that is of type string or Buffer");t="toHexString"in e&&"function"==typeof e.toHexString?oe.fromHex(e.toHexString()):e.id}else t=e;if(null==t)this.buffer=Je.generate();else if(ArrayBuffer.isView(t)&&12===t.byteLength)this.buffer=oe.toLocalBufferType(t);else{if("string"!=typeof t)throw new V("Argument passed in does not match the accepted types");if(!Je.validateHexString(t))throw new V("input must be a 24 character hex string, 12 byte Uint8Array, or an integer");this.buffer=oe.fromHex(t),Je.cacheHexString&&We.set(this,t)}}get id(){return this.buffer}set id(e){this.buffer=e,Je.cacheHexString&&We.set(this,oe.toHex(e))}static validateHexString(e){if(24!==e?.length)return!1;for(let t=0;t<24;t++){const r=e.charCodeAt(t);if(!(r>=48&&r<=57||r>=97&&r<=102||r>=65&&r<=70))return!1}return!0}toHexString(){if(Je.cacheHexString){const e=We.get(this);if(e)return e}const e=oe.toHex(this.id);return Je.cacheHexString&&We.set(this,e),e}static getInc(){return Je.index=(Je.index+1)%16777215}static generate(e){"number"!=typeof e&&(e=Math.floor(Date.now()/1e3));const t=Je.getInc(),r=oe.allocateUnsafe(12);return fe.setInt32BE(r,0,e),null===Ye&&(Ye=oe.randomBytes(5)),r[4]=Ye[0],r[5]=Ye[1],r[6]=Ye[2],r[7]=Ye[3],r[8]=Ye[4],r[11]=255&t,r[10]=t>>8&255,r[9]=t>>16&255,r}toString(e){return"base64"===e?oe.toBase64(this.id):this.toHexString()}toJSON(){return this.toHexString()}static is(e){return null!=e&&"object"==typeof e&&"_bsontype"in e&&"ObjectId"===e._bsontype}equals(e){if(null==e)return!1;if(Je.is(e))return this.buffer[11]===e.buffer[11]&&oe.equals(this.buffer,e.buffer);if("string"==typeof e)return e.toLowerCase()===this.toHexString();if("object"==typeof e&&"function"==typeof e.toHexString){const t=e.toHexString(),r=this.toHexString();return"string"==typeof t&&t.toLowerCase()===r}return!1}getTimestamp(){const e=new Date,t=fe.getUint32BE(this.buffer,0);return e.setTime(1e3*Math.floor(t)),e}static createPk(){return new Je}serializeInto(e,t){return e[t]=this.buffer[0],e[t+1]=this.buffer[1],e[t+2]=this.buffer[2],e[t+3]=this.buffer[3],e[t+4]=this.buffer[4],e[t+5]=this.buffer[5],e[t+6]=this.buffer[6],e[t+7]=this.buffer[7],e[t+8]=this.buffer[8],e[t+9]=this.buffer[9],e[t+10]=this.buffer[10],e[t+11]=this.buffer[11],12}static createFromTime(e){const t=oe.allocate(12);for(let e=11;e>=4;e--)t[e]=0;return fe.setInt32BE(t,0,e),new Je(t)}static createFromHexString(e){if(24!==e?.length)throw new V("hex string must be 24 characters");return new Je(oe.fromHex(e))}static createFromBase64(e){if(16!==e?.length)throw new V("base64 string must be 16 characters");return new Je(oe.fromBase64(e))}static isValid(e){if(null==e)return!1;if("string"==typeof e)return Je.validateHexString(e);try{return new Je(e),!0}catch{return!1}}toExtendedJSON(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}static fromExtendedJSON(e){return new Je(e.$oid)}isCached(){return Je.cacheHexString&&We.has(this)}inspect(e,t,r){return r??=p,`new ObjectId(${r(this.toHexString(),t)})`}}class Xe extends ce{get _bsontype(){return"BSONRegExp"}pattern;options;constructor(e,t){if(super(),this.pattern=e,this.options=(t??"").split("").sort().join(""),-1!==this.pattern.indexOf("\0"))throw new V(`BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`);if(-1!==this.options.indexOf("\0"))throw new V(`BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`);for(let e=0;e<this.options.length;e++)if("i"!==this.options[e]&&"m"!==this.options[e]&&"x"!==this.options[e]&&"l"!==this.options[e]&&"s"!==this.options[e]&&"u"!==this.options[e])throw new V(`The regular expression option [${this.options[e]}] is not supported`)}static parseOptions(e){return e?e.split("").sort().join(""):""}toExtendedJSON(e){return(e=e||{}).legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}static fromExtendedJSON(e){if("$regex"in e){if("string"==typeof e.$regex)return new Xe(e.$regex,Xe.parseOptions(e.$options));if("BSONRegExp"===e.$regex._bsontype)return e}if("$regularExpression"in e)return new Xe(e.$regularExpression.pattern,Xe.parseOptions(e.$regularExpression.options));throw new V(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify(e)}`)}inspect(e,t,r){const n=function(e){if(null!=e&&"object"==typeof e&&"stylize"in e&&"function"==typeof e.stylize)return e.stylize}(t)??(e=>e);r??=p;return`new BSONRegExp(${n(r(this.pattern),"regexp")}, ${n(r(this.options),"regexp")})`}}class Ke extends ce{get _bsontype(){return"BSONSymbol"}value;constructor(e){super(),this.value=e}valueOf(){return this.value}toString(){return this.value}toJSON(){return this.value}toExtendedJSON(){return{$symbol:this.value}}static fromExtendedJSON(e){return new Ke(e.$symbol)}inspect(e,t,r){return r??=p,`new BSONSymbol(${r(this.value,t)})`}}const Ze=xe;class Qe extends Ze{get _bsontype(){return"Timestamp"}get[ae](){return"Timestamp"}static MAX_VALUE=xe.MAX_UNSIGNED_VALUE;get i(){return this.low>>>0}get t(){return this.high>>>0}constructor(e){if(null==e)super(0,0,!0);else if("bigint"==typeof e)super(e,!0);else if(xe.isLong(e))super(e.low,e.high,!0);else{if("object"!=typeof e||!("t"in e)||!("i"in e))throw new V("A Timestamp can only be constructed with: bigint, Long, or { t: number; i: number }");{if("number"!=typeof e.t&&("object"!=typeof e.t||"Int32"!==e.t._bsontype))throw new V("Timestamp constructed from { t, i } must provide t as a number");if("number"!=typeof e.i&&("object"!=typeof e.i||"Int32"!==e.i._bsontype))throw new V("Timestamp constructed from { t, i } must provide i as a number");const t=Number(e.t),r=Number(e.i);if(t<0||Number.isNaN(t))throw new V("Timestamp constructed from { t, i } must provide a positive t");if(r<0||Number.isNaN(r))throw new V("Timestamp constructed from { t, i } must provide a positive i");if(t>4294967295)throw new V("Timestamp constructed from { t, i } must provide t equal or less than uint32 max");if(r>4294967295)throw new V("Timestamp constructed from { t, i } must provide i equal or less than uint32 max");super(r,t,!0)}}}toJSON(){return{$timestamp:this.toString()}}static fromInt(e){return new Qe(xe.fromInt(e,!0))}static fromNumber(e){return new Qe(xe.fromNumber(e,!0))}static fromBits(e,t){return new Qe({i:e,t:t})}static fromString(e,t){return new Qe(xe.fromString(e,!0,t))}toExtendedJSON(){return{$timestamp:{t:this.t,i:this.i}}}static fromExtendedJSON(e){const t=xe.isLong(e.$timestamp.i)?e.$timestamp.i.getLowBitsUnsigned():e.$timestamp.i,r=xe.isLong(e.$timestamp.t)?e.$timestamp.t.getLowBitsUnsigned():e.$timestamp.t;return new Qe({t:r,i:t})}inspect(e,t,r){r??=p;return`new Timestamp({ t: ${r(this.t,t)}, i: ${r(this.i,t)} })`}}const et=xe.fromNumber(N),tt=xe.fromNumber(T);function rt(e,t,r){const n=(t=null==t?{}:t)&&t.index?t.index:0,i=fe.getInt32LE(e,n);if(i<5)throw new V(`bson size must be >= 5, is ${i}`);if(t.allowObjectSmallerThanBufferSize&&e.length<i)throw new V(`buffer length ${e.length} must be >= bson size ${i}`);if(!t.allowObjectSmallerThanBufferSize&&e.length!==i)throw new V(`buffer length ${e.length} must === bson size ${i}`);if(i+n>e.byteLength)throw new V(`(bson size ${i} + options.index ${n} must be <= buffer length ${e.byteLength})`);if(0!==e[n+i-1])throw new V("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return it(e,n,t,r)}const nt=/^\$ref$|^\$id$|^\$db$/;function it(e,t,r,n=!1){const i=null==r.fieldsAsRaw?null:r.fieldsAsRaw,s=null!=r.raw&&r.raw,o="boolean"==typeof r.bsonRegExp&&r.bsonRegExp,a=r.promoteBuffers??!1,c=r.promoteLongs??!0,l=r.promoteValues??!0,h=r.useBigInt64??!1;if(h&&!l)throw new V("Must either request bigint or Long for int64 deserialization");if(h&&!c)throw new V("Must either request bigint or Long for int64 deserialization");let u,f,d=!0;const p=(null==r.validation?{utf8:!0}:r.validation).utf8;if("boolean"==typeof p)u=p;else{d=!1;const e=Object.keys(p).map((function(e){return p[e]}));if(0===e.length)throw new V("UTF-8 validation setting cannot be empty");if("boolean"!=typeof e[0])throw new V("Invalid UTF-8 validation option, must specify boolean values");if(u=e[0],!e.every((e=>e===u)))throw new V("Invalid UTF-8 validation option - keys must be all true or all false")}if(!d){f=new Set;for(const e of Object.keys(p))f.add(e)}const g=t;if(e.length<5)throw new V("corrupt bson message < 5 bytes long");const m=fe.getInt32LE(e,t);if(t+=4,m<5||m>e.length)throw new V("corrupt bson message");const b=n?[]:{};let w=0,y=!n&&null;for(;;){const p=e[t++];if(0===p)break;let g=t;for(;0!==e[g]&&g<e.length;)g++;if(g>=e.byteLength)throw new V("Bad BSON Document: illegal CString");const m=n?w++:oe.toUTF8(e,t,g,!1);let E,N=!0;if(N=d||f?.has(m)?u:!u,!1!==y&&"$"===m[0]&&(y=nt.test(m)),t=g+1,p===S){const r=fe.getInt32LE(e,t);if(t+=4,r<=0||r>e.length-t||0!==e[t+r-1])throw new V("bad string length in bson");E=oe.toUTF8(e,t,t+r-1,N),t+=r}else if(p===x){const r=oe.allocateUnsafe(12);for(let n=0;n<12;n++)r[n]=e[t+n];E=new Je(r),t+=12}else if(p===$&&!1===l)E=new He(fe.getInt32LE(e,t)),t+=4;else if(p===$)E=fe.getInt32LE(e,t),t+=4;else if(p===v)E=fe.getFloat64LE(e,t),t+=8,!1===l&&(E=new Ge(E));else if(p===U){const r=fe.getInt32LE(e,t),n=fe.getInt32LE(e,t+4);t+=8,E=new Date(new xe(r,n).toNumber())}else if(p===D){if(0!==e[t]&&1!==e[t])throw new V("illegal boolean type value");E=1===e[t++]}else if(p===_){const n=t,i=fe.getInt32LE(e,t);if(i<=0||i>e.length-t)throw new V("bad embedded document length in bson");if(s)E=e.subarray(t,t+i);else{let t=r;d||(t={...r,validation:{utf8:N}}),E=it(e,n,t,!1)}t+=i}else if(p===A){const n=t,s=fe.getInt32LE(e,t);let o=r;const a=t+s;if(i&&i[m]&&(o={...r,raw:!0}),d||(o={...o,validation:{utf8:N}}),E=it(e,n,o,!0),0!==e[(t+=s)-1])throw new V("invalid array terminator byte");if(t!==a)throw new V("corrupted array bson")}else if(p===I)E=void 0;else if(p===R)E=null;else if(p===F)if(h)E=fe.getBigInt64LE(e,t),t+=8;else{const r=fe.getInt32LE(e,t),n=fe.getInt32LE(e,t+4);t+=8;const i=new xe(r,n);E=c&&!0===l&&i.lessThanOrEqual(et)&&i.greaterThanOrEqual(tt)?i.toNumber():i}else if(p===q){const r=oe.allocateUnsafe(16);for(let n=0;n<16;n++)r[n]=e[t+n];t+=16,E=new je(r)}else if(p===O){let r=fe.getInt32LE(e,t);t+=4;const n=r,i=e[t++];if(r<0)throw new V("Negative binary type element size found");if(r>e.byteLength)throw new V("Binary type size larger than document size");if(i===de.SUBTYPE_BYTE_ARRAY){if(r=fe.getInt32LE(e,t),t+=4,r<0)throw new V("Negative binary type element size found for subtype 0x02");if(r>n-4)throw new V("Binary type with subtype 0x02 contains too long binary size");if(r<n-4)throw new V("Binary type with subtype 0x02 contains too short binary size")}a&&l?E=oe.toLocalBufferType(e.subarray(t,t+r)):(E=new de(e.subarray(t,t+r),i),i===H&&be.isValid(E)&&(E=E.toUUID())),t+=r}else if(p===L&&!1===o){for(g=t;0!==e[g]&&g<e.length;)g++;if(g>=e.length)throw new V("Bad BSON Document: illegal CString");const r=oe.toUTF8(e,t,g,!1);for(g=t=g+1;0!==e[g]&&g<e.length;)g++;if(g>=e.length)throw new V("Bad BSON Document: illegal CString");const n=oe.toUTF8(e,t,g,!1);t=g+1;const i=new Array(n.length);for(g=0;g<n.length;g++)switch(n[g]){case"m":i[g]="m";break;case"s":i[g]="g";break;case"i":i[g]="i"}E=new RegExp(r,i.join(""))}else if(p===L&&!0===o){for(g=t;0!==e[g]&&g<e.length;)g++;if(g>=e.length)throw new V("Bad BSON Document: illegal CString");const r=oe.toUTF8(e,t,g,!1);for(g=t=g+1;0!==e[g]&&g<e.length;)g++;if(g>=e.length)throw new V("Bad BSON Document: illegal CString");const n=oe.toUTF8(e,t,g,!1);t=g+1,E=new Xe(r,n)}else if(p===B){const r=fe.getInt32LE(e,t);if(t+=4,r<=0||r>e.length-t||0!==e[t+r-1])throw new V("bad string length in bson");const n=oe.toUTF8(e,t,t+r-1,N);E=l?n:new Ke(n),t+=r}else if(p===P)E=new Qe({i:fe.getUint32LE(e,t),t:fe.getUint32LE(e,t+4)}),t+=8;else if(p===j)E=new ze;else if(p===G)E=new Ve;else if(p===M){const r=fe.getInt32LE(e,t);if(t+=4,r<=0||r>e.length-t||0!==e[t+r-1])throw new V("bad string length in bson");const n=oe.toUTF8(e,t,t+r-1,N);E=new we(n),t+=r}else if(p===k){const n=fe.getInt32LE(e,t);if(t+=4,n<13)throw new V("code_w_scope total size shorter minimum expected length");const i=fe.getInt32LE(e,t);if(t+=4,i<=0||i>e.length-t||0!==e[t+i-1])throw new V("bad string length in bson");const s=oe.toUTF8(e,t,t+i-1,N),o=t+=i,a=fe.getInt32LE(e,t),c=it(e,o,r,!1);if(t+=a,n<8+a+i)throw new V("code_w_scope total size is too short, truncating scope");if(n>8+a+i)throw new V("code_w_scope total size is too long, clips outer document");E=new we(s,c)}else{if(p!==C)throw new V(`Detected unknown BSON type ${p.toString(16)} for fieldname "${m}"`);{const r=fe.getInt32LE(e,t);if(t+=4,r<=0||r>e.length-t||0!==e[t+r-1])throw new V("bad string length in bson");const n=oe.toUTF8(e,t,t+r-1,N);t+=r;const i=oe.allocateUnsafe(12);for(let r=0;r<12;r++)i[r]=e[t+r];const s=new Je(i);t+=12,E=new Ee(n,s)}}"__proto__"===m?Object.defineProperty(b,m,{value:E,writable:!0,enumerable:!0,configurable:!0}):b[m]=E}if(m!==t-g){if(n)throw new V("corrupt array bson");throw new V("corrupt object bson")}if(!y)return b;if(ye(b)){const e=Object.assign({},b);return delete e.$ref,delete e.$id,delete e.$db,new Ee(b.$ref,b.$id,b.$db,e)}return b}const st={$oid:Je,$binary:de,$uuid:de,$symbol:Ke,$numberInt:He,$numberDecimal:je,$numberDouble:Ge,$numberLong:xe,$minKey:ze,$maxKey:Ve,$regex:Xe,$regularExpression:Xe,$timestamp:Qe};function ot(e,t={}){if("number"==typeof e){const r=e<=b&&e>=w,n=e<=y&&e>=E;if(t.relaxed||t.legacy)return e;if(Number.isInteger(e)&&!Object.is(e,-0)){if(r)return new He(e);if(n)return t.useBigInt64?BigInt(e):xe.fromNumber(e)}return new Ge(e)}if(null==e||"object"!=typeof e)return e;if(e.$undefined)return null;const r=Object.keys(e).filter((t=>t.startsWith("$")&&null!=e[t]));for(let n=0;n<r.length;n++){const i=st[r[n]];if(i)return i.fromExtendedJSON(e,t)}if(null!=e.$date){const r=e.$date,n=new Date;if(t.legacy)if("number"==typeof r)n.setTime(r);else if("string"==typeof r)n.setTime(Date.parse(r));else{if("bigint"!=typeof r)throw new Y("Unrecognized type for EJSON date: "+typeof r);n.setTime(Number(r))}else if("string"==typeof r)n.setTime(Date.parse(r));else if(xe.isLong(r))n.setTime(r.toNumber());else if("number"==typeof r&&t.relaxed)n.setTime(r);else{if("bigint"!=typeof r)throw new Y("Unrecognized type for EJSON date: "+typeof r);n.setTime(Number(r))}return n}if(null!=e.$code){const t=Object.assign({},e);return e.$scope&&(t.$scope=ot(e.$scope)),we.fromExtendedJSON(e)}if(ye(e)||e.$dbPointer){const t=e.$ref?e:e.$dbPointer;if(t instanceof Ee)return t;const r=Object.keys(t).filter((e=>e.startsWith("$")));let n=!0;if(r.forEach((e=>{-1===["$ref","$id","$db"].indexOf(e)&&(n=!1)})),n)return Ee.fromExtendedJSON(t)}return e}function at(e){const t=e.toISOString();return 0!==e.getUTCMilliseconds()?t:t.slice(0,-5)+"Z"}function ct(e,t){if(e instanceof Map||d(e)){const r=Object.create(null);for(const[t,n]of e){if("string"!=typeof t)throw new V("Can only serialize maps with string keys");r[t]=n}return ct(r,t)}if(("object"==typeof e||"function"==typeof e)&&null!==e){const r=t.seenObjects.findIndex((t=>t.obj===e));if(-1!==r){const e=t.seenObjects.map((e=>e.propertyName)),n=e.slice(0,r).map((e=>`${e} -> `)).join(""),i=e[r],s=" -> "+e.slice(r+1,e.length-1).map((e=>`${e} -> `)).join(""),o=e[e.length-1],a=" ".repeat(n.length+i.length/2),c="-".repeat(s.length+(i.length+o.length)/2-1);throw new V(`Converting circular structure to EJSON:\n    ${n}${i}${s}${o}\n    ${a}\\${c}/`)}t.seenObjects[t.seenObjects.length-1].obj=e}if(Array.isArray(e))return function(e,t){return e.map(((e,r)=>{t.seenObjects.push({propertyName:`index ${r}`,obj:null});try{return ct(e,t)}finally{t.seenObjects.pop()}}))}(e,t);if(void 0===e)return t.ignoreUndefined?void 0:null;if(e instanceof Date||((r=e)instanceof Date||"[object Date]"===Object.prototype.toString.call(r))){const r=e.getTime(),n=r>-1&&r<2534023188e5;return t.legacy?t.relaxed&&n?{$date:e.getTime()}:{$date:at(e)}:t.relaxed&&n?{$date:at(e)}:{$date:{$numberLong:e.getTime().toString()}}}var r,n;if(!("number"!=typeof e||t.relaxed&&isFinite(e))){if(Number.isInteger(e)&&!Object.is(e,-0)){if(e>=w&&e<=b)return{$numberInt:e.toString()};if(e>=E&&e<=y)return{$numberLong:e.toString()}}return{$numberDouble:Object.is(e,-0)?"-0.0":e.toString()}}if("bigint"==typeof e)return t.relaxed?Number(BigInt.asIntN(64,e)):{$numberLong:BigInt.asIntN(64,e).toString()};if(e instanceof RegExp||((n=e)instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(n))){let r=e.flags;if(void 0===r){const t=e.toString().match(/[gimuy]*$/);t&&(r=t[0])}return new Xe(e.source,r).toExtendedJSON(t)}return null!=e&&"object"==typeof e?function(e,t){if(null==e||"object"!=typeof e)throw new V("not an object instance");const r=e._bsontype;if(void 0===r){const r={};for(const n of Object.keys(e)){t.seenObjects.push({propertyName:n,obj:null});try{const i=ct(e[n],t);"__proto__"===n?Object.defineProperty(r,n,{value:i,writable:!0,enumerable:!0,configurable:!0}):r[n]=i}finally{t.seenObjects.pop()}}return r}if(null!=e&&"object"==typeof e&&"string"==typeof e._bsontype&&e[m]!==g)throw new z;if(function(e){return null!=e&&"object"==typeof e&&"_bsontype"in e&&"string"==typeof e._bsontype}(e)){let n=e;if("function"!=typeof n.toExtendedJSON){const t=lt[e._bsontype];if(!t)throw new V("Unrecognized or invalid _bsontype: "+e._bsontype);n=t(n)}return"Code"===r&&n.scope?n=new we(n.code,ct(n.scope,t)):"DBRef"===r&&n.oid&&(n=new Ee(ct(n.collection,t),ct(n.oid,t),ct(n.db,t),ct(n.fields,t))),n.toExtendedJSON(t)}throw new V("_bsontype must be a string, but was: "+typeof r)}(e,t):e}const lt={Binary:e=>new de(e.value(),e.sub_type),Code:e=>new we(e.code,e.scope),DBRef:e=>new Ee(e.collection||e.namespace,e.oid,e.db,e.fields),Decimal128:e=>new je(e.bytes),Double:e=>new Ge(e.value),Int32:e=>new He(e.value),Long:e=>xe.fromBits(null!=e.low?e.low:e.low_,null!=e.low?e.high:e.high_,null!=e.low?e.unsigned:e.unsigned_),MaxKey:()=>new Ve,MinKey:()=>new ze,ObjectId:e=>new Je(e),BSONRegExp:e=>new Xe(e.pattern,e.options),BSONSymbol:e=>new Ke(e.value),Timestamp:e=>Qe.fromBits(e.low,e.high)};function ht(e,t){const r={useBigInt64:t?.useBigInt64??!1,relaxed:t?.relaxed??!0,legacy:t?.legacy??!1};return JSON.parse(e,((e,t)=>{if(-1!==e.indexOf("\0"))throw new V(`BSON Document field names cannot contain null bytes, found: ${JSON.stringify(e)}`);return ot(t,r)}))}function ut(e,t,r,n){null!=r&&"object"==typeof r&&(n=r,r=0),null==t||"object"!=typeof t||Array.isArray(t)||(n=t,t=void 0,r=0);const i=ct(e,Object.assign({relaxed:!0,legacy:!1},n,{seenObjects:[{propertyName:"(root)",obj:null}]}));return JSON.stringify(i,t,r)}const ft=Object.create(null);ft.parse=ht,ft.stringify=ut,ft.serialize=function(e,t){return t=t||{},JSON.parse(ut(e,t))},ft.deserialize=function(e,t){return t=t||{},ht(JSON.stringify(e),t)},Object.freeze(ft);const dt=1,pt=2,gt=3,mt=4,bt=5,wt=6,yt=7,Et=8,Nt=9,Tt=10,vt=11,St=12,_t=13,At=14,Ot=15,It=16,xt=17,Dt=18,Ut=19,Rt=255,Lt=127;function Ct(e,t){try{return fe.getNonnegativeInt32LE(e,t)}catch(e){throw new W("BSON size cannot be negative",t,{cause:e})}}function Mt(e,t){let r=t;for(;0!==e[r];r++);if(r===e.length-1)throw new W("Null terminator not found",t);return r}const Bt=Object.create(null);Bt.parseToElements=function(e,t=0){if(t??=0,e.length<5)throw new W(`Input must be at least 5 bytes, got ${e.length} bytes`,t);const r=Ct(e,t);if(r>e.length-t)throw new W(`Parsed documentSize (${r} bytes) does not match input length (${e.length} bytes)`,t);if(0!==e[t+r-1])throw new W("BSON documents must end in 0x00",t+r);const n=[];let i=t+4;for(;i<=r+t;){const s=e[i];if(i+=1,0===s){if(i-t!==r)throw new W("Invalid 0x00 type byte",i);break}const o=i,a=Mt(e,i)-o;let c;if(i+=a+1,s===dt||s===Dt||s===Nt||s===xt)c=8;else if(s===It)c=4;else if(s===yt)c=12;else if(s===Ut)c=16;else if(s===Et)c=1;else if(s===Tt||s===wt||s===Lt||s===Rt)c=0;else if(s===vt)c=Mt(e,Mt(e,i)+1)+1-i;else if(s===gt||s===mt||s===Ot)c=Ct(e,i);else{if(s!==pt&&s!==bt&&s!==St&&s!==_t&&s!==At)throw new W(`Invalid 0x${s.toString(16).padStart(2,"0")} type byte`,i);c=Ct(e,i)+4,s===bt&&(c+=1),s===St&&(c+=12)}if(c>r)throw new W("value reports length larger than document",i);n.push([s,o,a,i,c]),i+=c}return n},Bt.ByteUtils=oe,Bt.NumberUtils=fe,Object.freeze(Bt);oe.allocate(17825792);const kt={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7},$t={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,CBOR:24,URI:32,BASE64URL:33,BASE64:34,DATE_EPOCH_DAYS:100,SET:258,JSON:262,WTF8:273,DATE_FULL:1004,REGEXP:21066,SELF_DESCRIBED:55799,INVALID_16:65535,INVALID_32:4294967295,INVALID_64:0xffffffffffffffffn},Pt={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31},Ft=20,qt=21,jt=22,Gt=23;let Ht=class{static BREAK=Symbol.for("github.com/hildjj/cbor2/break");static ENCODED=Symbol.for("github.com/hildjj/cbor2/cbor-encoded");static LENGTH=Symbol.for("github.com/hildjj/cbor2/length")};const Vt={MIN:-(2n**63n),MAX:2n**64n-1n};let zt=class e{static#e=new Map;tag;contents;constructor(e,t=void 0){this.tag=e,this.contents=t}get noChildren(){return!!e.#e.get(this.tag)?.noChildren}static registerDecoder(e,t,r){const n=this.#e.get(e);return this.#e.set(e,t),n&&("comment"in t||(t.comment=n.comment),"noChildren"in t||(t.noChildren=n.noChildren)),r&&!t.comment&&(t.comment=()=>`(${r})`),n}static clearDecoder(e){const t=this.#e.get(e);return this.#e.delete(e),t}static getDecoder(e){return this.#e.get(e)}static getAllDecoders(){return new Map(this.#e)}*[Symbol.iterator](){yield this.contents}push(e){return this.contents=e,1}decode(t){const r=t?.tags?.get(this.tag)??(t?.ignoreGlobalTags?void 0:e.#e.get(this.tag));return r?r(this,t):this}comment(t,r){const n=t?.tags?.get(this.tag)??(t?.ignoreGlobalTags?void 0:e.#e.get(this.tag));if(n?.comment)return n.comment(this,t,r)}toCBOR(){return[this.tag,this.contents]}[Symbol.for("nodejs.util.inspect.custom")](e,t,r){return`${this.tag}(${r(this.contents,t)})`}};function Yt(e){if(null!=e&&"object"==typeof e)return e[Ht.ENCODED]}function Wt(e,t){Object.defineProperty(e,Ht.ENCODED,{configurable:!0,enumerable:!1,value:t})}function Jt(e,t){const r=Object(e);return Wt(r,t),r}const Xt=Symbol("CBOR_RANGES");function Kt(e,t){Object.defineProperty(e,Xt,{configurable:!1,enumerable:!1,writable:!1,value:t})}function Zt(e){return e[Xt]}function Qt(e,t=0,r=e.length-1){const n=e.subarray(t,r),i=Zt(e);if(i){const e=[];for(const n of i)if(n[0]>=t&&n[0]+n[1]<=r){const r=[...n];r[0]-=t,e.push(r)}e.length&&Kt(n,e)}return n}function er(e){let t=Math.ceil(e.length/2);const r=new Uint8Array(t);t--;for(let n=e.length,i=n-2;n>=0;n=i,i-=2,t--)r[t]=parseInt(e.substring(i,n),16);return r}function tr(e){return e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"")}function rr(e){const t=e.reduce(((e,t)=>e+t.length),0),r=e.some((e=>function(e){return void 0!==Zt(e)}(e))),n=[],i=new Uint8Array(t);let s=0;for(const t of e){if(!(t instanceof Uint8Array))throw new TypeError(`Invalid array: ${t}`);if(i.set(t,s),r){const e=t[Xt]??[[0,t.length]];for(const t of e)t[0]+=s;n.push(...e)}s+=t.length}return r&&Kt(i,n),i}function nr(e){const t=atob(e);return Uint8Array.from(t,(e=>e.codePointAt(0)))}const ir={"-":"+",_:"/"};function sr(e){let t="";for(const r of e){const e=r.codePointAt(0)?.toString(16).padStart(4,"0");t&&(t+=", "),t+=`U+${e}`}return t}function or(e,t){const[r,n,i]=e,[s,o,a]=t,c=Math.min(i.length,a.length);for(let e=0;e<c;e++){const t=i[e]-a[e];if(0!==t)return t}return 0}class ar{static defaultOptions={chunkSize:4096};#t;#r=[];#n=null;#i=0;#s=0;constructor(e={}){if(this.#t={...ar.defaultOptions,...e},this.#t.chunkSize<8)throw new RangeError(`Expected size >= 8, got ${this.#t.chunkSize}`);this.#o()}get length(){return this.#s}read(){this.#a();const e=new Uint8Array(this.#s);let t=0;for(const r of this.#r)e.set(r,t),t+=r.length;return this.#o(),e}write(e){const t=e.length;t>this.#c()?(this.#a(),t>this.#t.chunkSize?(this.#r.push(e),this.#o()):(this.#o(),this.#r[this.#r.length-1].set(e),this.#i=t)):(this.#r[this.#r.length-1].set(e,this.#i),this.#i+=t),this.#s+=t}writeUint8(e){this.#e(1),this.#n.setUint8(this.#i,e),this.#l(1)}writeUint16(e,t=!1){this.#e(2),this.#n.setUint16(this.#i,e,t),this.#l(2)}writeUint32(e,t=!1){this.#e(4),this.#n.setUint32(this.#i,e,t),this.#l(4)}writeBigUint64(e,t=!1){this.#e(8),this.#n.setBigUint64(this.#i,e,t),this.#l(8)}writeInt16(e,t=!1){this.#e(2),this.#n.setInt16(this.#i,e,t),this.#l(2)}writeInt32(e,t=!1){this.#e(4),this.#n.setInt32(this.#i,e,t),this.#l(4)}writeBigInt64(e,t=!1){this.#e(8),this.#n.setBigInt64(this.#i,e,t),this.#l(8)}writeFloat32(e,t=!1){this.#e(4),this.#n.setFloat32(this.#i,e,t),this.#l(4)}writeFloat64(e,t=!1){this.#e(8),this.#n.setFloat64(this.#i,e,t),this.#l(8)}clear(){this.#s=0,this.#r=[],this.#o()}#o(){const e=new Uint8Array(this.#t.chunkSize);this.#r.push(e),this.#i=0,this.#n=new DataView(e.buffer,e.byteOffset,e.byteLength)}#a(){if(0===this.#i)return void this.#r.pop();const e=this.#r.length-1;this.#r[e]=this.#r[e].subarray(0,this.#i),this.#i=0,this.#n=null}#c(){const e=this.#r.length-1;return this.#r[e].length-this.#i}#e(e){this.#c()<e&&(this.#a(),this.#o())}#l(e){this.#i+=e,this.#s+=e}}const cr=1n<<15n,lr=0b11111n<<10n,hr=1n<<9n,ur=hr-1n,fr=hr|ur,dr=1n<<31n,pr=0b11111111n<<23n,gr=1n<<22n,mr=gr-1n,br=gr|mr,wr=1n<<63n,yr=0b11111111111n<<52n,Er=1n<<51n,Nr=Er-1n,Tr=Er|Nr,vr=Nr-(ur<<42n),Sr=Nr-(mr<<29n),_r={2:"0b",8:"0o",16:"0x"};var Ar=(e=>(e[e.NATURAL=-2]="NATURAL",e[e.UNKNOWN=-1]="UNKNOWN",e[e.F16=2]="F16",e[e.F32=4]="F32",e[e.F64=8]="F64",e))(Ar||{});function Or(e,t,r,n){let i="nan'";return e.quiet||(i+="!"),-1===e.sign&&(i+="-"),i+=n(Math.abs(e.payload),r),i+="'",i+=e.encodingIndicator,i}let Ir=class extends Number{#o;#i=-1;constructor(e,t=!0,r=-1){super(NaN);const n=e;if("number"==typeof e){if(!Number.isSafeInteger(e))throw new Error(`Invalid NAN payload: ${e}`);let i=0n;if((e=BigInt(e))<0&&(i=wr,e=-e),e>=Er)throw new Error(`Payload too large: ${n}`);const s=t?Er:0n;switch(this.#o=i|yr|s|e,r){case-2:throw new Error("NAN_SIZE.NATURAL only valid for bigint constructor");case-1:r=this.preferredSize;break;case 2:if(this.#o&vr)throw new Error("Invalid size for payload");break;case 4:if(this.#o&Sr)throw new Error("Invalid size for payload");break;case 8:break;default:throw new Error(`Invalid size: ${r}`)}this.#i=r}else if("bigint"==typeof e){let t=-1;if((e&yr)===yr)this.#o=e,t=8;else if((e&pr)===pr){const r=(e&dr)<<32n;this.#o=r|yr|(e&br)<<29n,t=4}else{if((e&lr)!==lr)throw new Error(`Invalid raw NaN value: ${e}`);{const r=(e&cr)<<48n;this.#o=r|yr|(e&fr)<<42n,t=2}}if(-1===r)this.#i=this.preferredSize;else if(-2===r)this.#i=t;else{if(r<t)throw new Error("Invalid bigint NaN size");this.#i=r}}else{const t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.length){case 3:{if(249!==e[0])throw new Error("Invalid CBOR encoding for half float");const r=BigInt(t.getUint16(1,!1));if((r&lr)!==lr)throw new Error("Not a NaN");const n=(r&cr)<<48n;this.#o=n|yr|(r&fr)<<42n,this.#i=2;break}case 5:{if(250!==e[0])throw new Error("Invalid CBOR encoding for single float");const r=BigInt(t.getUint32(1,!1));if((r&pr)!==pr)throw new Error("Not a NaN");const n=(r&dr)<<32n;this.#o=n|yr|(r&br)<<29n,this.#i=4;break}case 9:if(251!==e[0])throw new Error("Invalid CBOR encoding for double float");if(this.#o=t.getBigUint64(1,!1),(this.#o&yr)!==yr)throw new Error("Not a NaN (NaNaN)");this.#i=8;break;default:throw new RangeError("Invalid NAN size (should be 2, 4, or 8): "+(e.length-1))}}if(!this.payload&&!this.quiet)throw new Error("Signalling NaN with zero payload")}get bytes(){const e=new ArrayBuffer(this.#i+1),t=new DataView(e);switch(this.#i){case 2:{t.setUint8(0,249);const e=(this.#o&wr?cr:0n)|lr|(this.#o&Tr)>>42n;t.setUint16(1,Number(e),!1);break}case 4:{t.setUint8(0,250);const e=(this.#o&wr?dr:0n)|pr|(this.#o&Tr)>>29n;t.setUint32(1,Number(e),!1);break}case 8:t.setUint8(0,251),t.setBigUint64(1,this.#o)}return new Uint8Array(e)}get quiet(){return!!(this.#o&Er)}get sign(){return this.#o&wr?-1:1}get payload(){return Number(this.#o&Nr)*this.sign}get raw(){return this.#o}get encodingIndicator(){switch(this.#i){case 2:return"_1";case 4:return"_2"}return"_3"}get size(){return this.#i}get preferredSize(){return 0n===(this.#o&vr)?2:0n===(this.#o&Sr)?4:8}get isShortestEncoding(){return this.preferredSize===this.#i}toCBOR(e){e.write(this.bytes)}toString(e=10){return Or(this,0,{},(t=>(_r[e]??"")+t.toString(e)))}[Symbol.for("nodejs.util.inspect.custom")](e,t,r){return Or(this,0,t,r)}};function xr(e,t=0,r=!1){const n=128&e[t]?-1:1,i=(124&e[t])>>2,s=(3&e[t])<<8|e[t+1];if(0===i){if(r&&0!==s)throw new Error("Unwanted subnormal: "+5.960464477539063e-8*n*s);return 5.960464477539063e-8*n*s}return 31===i?s?NaN:n*(1/0):n*2**(i-25)*(1024+s)}function Dr(e){const t=new DataView(new ArrayBuffer(4));t.setFloat32(0,e,!1);const r=t.getUint32(0,!1);if(0!=(8191&r))return null;let n=r>>16&32768;const i=r>>23&255,s=8388607&r;if(0!==i||0!==s)if(i>=113&&i<=142)n+=(i-112<<10)+(s>>13);else if(i>=103&&i<113){if(s&(1<<126-i)-1)return null;n+=s+8388608>>126-i}else{if(255!==i)return null;n|=31744,n|=s>>13}return n}class Ur extends TypeError{code="ERR_ENCODING_INVALID_ENCODED_DATA";constructor(){super("The encoded data was not valid for encoding wtf-8")}}class Rr extends RangeError{code="ERR_ENCODING_NOT_SUPPORTED";constructor(e){super(`Invalid encoding: "${e}"`)}}const Lr=new Uint8Array(0),Cr="wtf-8";function Mr(e){return e?e instanceof Uint8Array?e:function(e){return e&&!(e instanceof ArrayBuffer)&&e.buffer instanceof ArrayBuffer}(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e):Lr}const Br=[0,0,0,0,0,0,0,0,-1,-1,-1,-1,1,1,2,3];class kr{static DEFAULT_BUFFERSIZE=4096;encoding=Cr;fatal;ignoreBOM;bufferSize;#h=0;#u=0;#f=0;#d=!0;#p;constructor(e="wtf8",t=void 0){if("wtf8"!==e.toLowerCase().replace("-",""))throw new Rr(e);if(this.fatal=Boolean(t?.fatal),this.ignoreBOM=Boolean(t?.ignoreBOM),this.bufferSize=Math.floor(t?.bufferSize??kr.DEFAULT_BUFFERSIZE),isNaN(this.bufferSize)||this.bufferSize<1)throw new RangeError(`Invalid buffer size: ${t?.bufferSize}`);this.#p=new Uint16Array(this.bufferSize)}decode(e,t){const r=Boolean(t?.stream),n=Mr(e),i=[],s=this.#p,o=this.bufferSize-3;let a=0;const c=()=>{if(this.#u=0,this.#h=0,this.#f=0,this.fatal)throw new Ur;s[a++]=65533},l=()=>{const e=this.#f;for(let t=0;t<e;t++)c()},h=e=>{if(0===this.#h){switch(Br[e>>4]){case-1:c();break;case 0:s[a++]=e;break;case 1:this.#u=31&e,0==(30&this.#u)?c():(this.#h=1,this.#f=1);break;case 2:this.#u=15&e,this.#h=2,this.#f=1;break;case 3:8&e?c():(this.#u=7&e,this.#h=3,this.#f=1)}}else{if(128!=(192&e))return l(),h(e);if(1===this.#f&&2===this.#h&&0===this.#u&&0==(32&e))return l(),h(e);if(3===this.#h&&0===this.#u&&0==(48&e))return l(),h(e);if(this.#u=this.#u<<6|63&e,this.#f++,0==--this.#h){if(this.ignoreBOM||!this.#d||65279!==this.#u)if(this.#u<65536)s[a++]=this.#u;else{const e=this.#u-65536;s[a++]=e>>>10&1023|55296,s[a++]=1023&e|56320}this.#u=0,this.#f=0,this.#d=!1}}};for(const e of n)a>=o&&(i.push(String.fromCharCode.apply(null,s.subarray(0,a))),a=0),h(e);return r||(this.#d=!0,(this.#u||this.#h)&&l()),a>0&&i.push(String.fromCharCode.apply(null,s.subarray(0,a))),i.join("")}}const $r=kt.SIMPLE_FLOAT<<5|Pt.TWO,Pr=kt.SIMPLE_FLOAT<<5|Pt.FOUR,Fr=kt.SIMPLE_FLOAT<<5|Pt.EIGHT,qr=kt.SIMPLE_FLOAT<<5|qt,jr=kt.SIMPLE_FLOAT<<5|Ft,Gr=kt.SIMPLE_FLOAT<<5|Gt,Hr=kt.SIMPLE_FLOAT<<5|jt,Vr=new TextEncoder,zr=new class{encoding=Cr;encode(e){if(!e)return Lr;const t=new Uint8Array(function(e){let t=0;for(const r of e){const e=r.codePointAt(0);e<128?t++:t+=e<2048?2:e<65536?3:4}return t}(String(e)));return this.encodeInto(e,t),t}encodeInto(e,t){const r=String(e),n=r.length,i=t.length;let s=0,o=0;for(o=0;o<n;o++){const e=r.codePointAt(o);if(e<128){if(s>=i)break;t[s++]=e}else if(e<2048){if(s>=i-1)break;t[s++]=192|e>>6,t[s++]=128|63&e}else if(e<65536){if(s>=i-2)break;t[s++]=224|e>>12,t[s++]=128|e>>6&63,t[s++]=128|63&e}else{if(s>=i-3)break;t[s++]=240|e>>18,t[s++]=128|e>>12&63,t[s++]=128|e>>6&63,t[s++]=128|63&e,o++}}return{read:o,written:s}}},Yr={...ar.defaultOptions,avoidInts:!1,cde:!1,collapseBigInts:!0,dateTag:$t.DATE_EPOCH,dcbor:!1,float64:!1,flushToZero:!1,forceEndian:null,ignoreOriginalEncoding:!1,largeNegativeAsBigInt:!1,reduceUnsafeNumbers:!1,rejectBigInts:!1,rejectCustomSimples:!1,rejectDuplicateKeys:!1,rejectFloats:!1,rejectUndefined:!1,simplifyNegativeZero:!1,sortKeys:null,stringNormalization:null,types:null,wtf8:!1,ignoreGlobalTags:!1},Wr={cde:!0,ignoreOriginalEncoding:!0,sortKeys:or},Jr={...Wr,dcbor:!0,largeNegativeAsBigInt:!0,reduceUnsafeNumbers:!0,rejectCustomSimples:!0,rejectDuplicateKeys:!0,rejectUndefined:!0,simplifyNegativeZero:!0,stringNormalization:"NFC"};function Xr(e){const t=e<0;return"bigint"==typeof e?[t?-e-1n:e,t]:[t?-e-1:e,t]}function Kr(e,t,r){if(r.rejectFloats)throw new Error(`Attempt to encode an unwanted floating point number: ${e}`);if(isNaN(e))t.writeUint8($r),t.writeUint16(32256);else if(r.float64||Math.fround(e)!==e)t.writeUint8(Fr),t.writeFloat64(e);else{const r=Dr(e);null===r?(t.writeUint8(Pr),t.writeFloat32(e)):(t.writeUint8($r),t.writeUint16(r))}}function Zr(e,t,r){const[n,i]=Xr(e);if(i&&r)throw new TypeError(`Negative size: ${e}`);r??=i?kt.NEG_INT:kt.POS_INT,r<<=5,n<24?t.writeUint8(r|n):n<=255?(t.writeUint8(r|Pt.ONE),t.writeUint8(n)):n<=65535?(t.writeUint8(r|Pt.TWO),t.writeUint16(n)):n<=4294967295?(t.writeUint8(r|Pt.FOUR),t.writeUint32(n)):(t.writeUint8(r|Pt.EIGHT),t.writeBigUint64(BigInt(n)))}function Qr(e,t,r){"number"==typeof e?Zr(e,t,kt.TAG):"object"==typeof e&&!r.ignoreOriginalEncoding&&Ht.ENCODED in e?t.write(e[Ht.ENCODED]):e<=Number.MAX_SAFE_INTEGER?Zr(Number(e),t,kt.TAG):(t.writeUint8(kt.TAG<<5|Pt.EIGHT),t.writeBigUint64(BigInt(e)))}function en(e,t,r){const[n,i]=Xr(e);if(r.collapseBigInts&&(!r.largeNegativeAsBigInt||e>=-0x8000000000000000n)){if(n<=0xffffffffn)return void Zr(Number(e),t);if(n<=0xffffffffffffffffn){const e=(i?kt.NEG_INT:kt.POS_INT)<<5;return t.writeUint8(e|Pt.EIGHT),void t.writeBigUint64(n)}}if(r.rejectBigInts)throw new Error(`Attempt to encode unwanted bigint: ${e}`);const s=i?$t.NEG_BIGINT:$t.POS_BIGINT,o=n.toString(16),a=o.length%2?"0":"";Qr(s,t,r);const c=er(a+o);Zr(c.length,t,kt.BYTE_STRING),t.write(c)}function tn(e,t,r){r.flushToZero&&(e=function(e){if(0!==e){const t=new ArrayBuffer(8),r=new DataView(t);r.setFloat64(0,e,!1);const n=r.getBigUint64(0,!1);if(0n===(0x7ff0000000000000n&n))return 0x8000000000000000n&n?-0:0}return e}(e)),Object.is(e,-0)?r.simplifyNegativeZero?r.avoidInts?Kr(0,t,r):Zr(0,t):Kr(e,t,r):!r.avoidInts&&Number.isSafeInteger(e)?Zr(e,t):r.reduceUnsafeNumbers&&Math.floor(e)===e&&e>=Vt.MIN&&e<=Vt.MAX?en(BigInt(e),t,r):Kr(e,t,r)}const rn=new class{#e=new Map;registerEncoder(e,t){const r=this.#e.get(e);return this.#e.set(e,t),r}get(e){return this.#e.get(e)}delete(e){return this.#e.delete(e)}clear(){this.#e.clear()}};function nn(e,t){return rn.registerEncoder(e,t)}function sn(e,t,r,n,i){const s=function(e){if(null!=e&&"object"==typeof e)return e[Ht.LENGTH]}(e);s&&!i.ignoreOriginalEncoding?n.write(s):Zr(t,n,r)}function on(e,t,r){switch(typeof e){case"number":tn(e,t,r);break;case"bigint":en(e,t,r);break;case"string":!function(e,t,r){const n=r.stringNormalization?e.normalize(r.stringNormalization):e;if(r.wtf8&&!e.isWellFormed()){const e=zr.encode(n);Qr($t.WTF8,t,r),Zr(e.length,t,kt.BYTE_STRING),t.write(e)}else{const e=Vr.encode(n);Zr(e.length,t,kt.UTF8_STRING),t.write(e)}}(e,t,r);break;case"boolean":t.writeUint8(e?qr:jr);break;case"undefined":if(r.rejectUndefined)throw new Error("Attempt to encode unwanted undefined.");t.writeUint8(Gr);break;case"object":!function(e,t,r){if(null===e)return void t.writeUint8(Hr);if(!r.ignoreOriginalEncoding&&Ht.ENCODED in e)return void t.write(e[Ht.ENCODED]);const n=e.constructor;if(n){const i=r.types?.get(n)??(r.ignoreGlobalTags?void 0:rn.get(n));if(i){const n=i(e,t,r);if(void 0!==n){if(!Array.isArray(n)||2!==n.length)throw new Error("Invalid encoder return value");("bigint"==typeof n[0]||isFinite(Number(n[0])))&&Qr(n[0],t,r),on(n[1],t,r)}return}}if("function"==typeof e.toCBOR){const n=e.toCBOR(t,r);return void(n&&(("bigint"==typeof n[0]||isFinite(Number(n[0])))&&Qr(n[0],t,r),on(n[1],t,r)))}if("function"==typeof e.toJSON)return void on(e.toJSON(),t,r);const i=Object.entries(e).map((e=>[e[0],e[1],an(e[0],r)]));r.sortKeys&&i.sort(r.sortKeys),sn(e,i.length,kt.MAP,t,r);for(const[e,n,s]of i)t.write(s),on(n,t,r)}(e,t,r);break;case"symbol":throw new TypeError(`Unknown symbol: ${e.toString()}`);default:throw new TypeError(`Unknown type: ${typeof e}, ${String(e)}`)}}function an(e,t={}){const r={...Yr};t.dcbor?Object.assign(r,Jr):t.cde&&Object.assign(r,Wr),Object.assign(r,t);const n=new ar(r);return on(e,n,r),n.read()}rn.registerEncoder(Array,(function(e,t,r){const n=e;sn(n,n.length,kt.ARRAY,t,r);for(const e of n)on(e,t,r)})),rn.registerEncoder(Uint8Array,(function(e,t){Zr(e.length,t,kt.BYTE_STRING),t.write(e)}));var cn=(e=>(e[e.NEVER=-1]="NEVER",e[e.PREFERRED=0]="PREFERRED",e[e.ALWAYS=1]="ALWAYS",e))(cn||{});class ln{static KnownSimple=new Map([[Ft,!1],[qt,!0],[jt,null],[Gt,void 0]]);value;constructor(e){this.value=e}static create(e){return ln.KnownSimple.has(e)?ln.KnownSimple.get(e):new ln(e)}toCBOR(e,t){if(t.rejectCustomSimples)throw new Error(`Cannot encode non-standard Simple value: ${this.value}`);Zr(this.value,e,kt.SIMPLE_FLOAT)}toString(){return`simple(${this.value})`}decode(){return ln.KnownSimple.has(this.value)?ln.KnownSimple.get(this.value):this}[Symbol.for("nodejs.util.inspect.custom")](e,t,r){return`simple(${r(this.value,t)})`}}const hn=new TextDecoder("utf8",{fatal:!0,ignoreBOM:!0});let un=class e{static defaultOptions={maxDepth:1024,encoding:"hex",requirePreferred:!1};#i;#t;#e=0;#r;constructor(t,r){if(this.#r={...e.defaultOptions,...r},"string"==typeof t)switch(this.#r.encoding){case"hex":this.#i=er(t);break;case"base64":this.#i=nr(t);break;default:throw new TypeError(`Encoding not implemented: "${this.#r.encoding}"`)}else this.#i=t;this.#t=new DataView(this.#i.buffer,this.#i.byteOffset,this.#i.byteLength)}toHere(e){return Qt(this.#i,e,this.#e)}*[Symbol.iterator](){if(yield*this.#o(0),this.#e!==this.#i.length)throw new Error("Extra data in input")}*seq(){for(;this.#e<this.#i.length;)yield*this.#o(0)}*#o(e){if(e++>this.#r.maxDepth)throw new Error(`Maximum depth ${this.#r.maxDepth} exceeded`);const t=this.#e,r=this.#t.getUint8(this.#e++),n=r>>5,i=31&r;let s=i,o=!1,a=0;switch(i){case Pt.ONE:if(a=1,s=this.#t.getUint8(this.#e),n===kt.SIMPLE_FLOAT){if(s<32)throw new Error(`Invalid simple encoding in extra byte: ${s}`);o=!0}else if(this.#r.requirePreferred&&s<24)throw new Error(`Unexpectedly long integer encoding (1) for ${s}`);break;case Pt.TWO:if(a=2,n===kt.SIMPLE_FLOAT)s=xr(this.#i,this.#e);else if(s=this.#t.getUint16(this.#e,!1),this.#r.requirePreferred&&s<=255)throw new Error(`Unexpectedly long integer encoding (2) for ${s}`);break;case Pt.FOUR:if(a=4,n===kt.SIMPLE_FLOAT)s=this.#t.getFloat32(this.#e,!1);else if(s=this.#t.getUint32(this.#e,!1),this.#r.requirePreferred&&s<=65535)throw new Error(`Unexpectedly long integer encoding (4) for ${s}`);break;case Pt.EIGHT:if(a=8,n===kt.SIMPLE_FLOAT)s=this.#t.getFloat64(this.#e,!1);else if(s=this.#t.getBigUint64(this.#e,!1),s<=Number.MAX_SAFE_INTEGER&&(s=Number(s)),this.#r.requirePreferred&&s<=4294967295)throw new Error(`Unexpectedly long integer encoding (8) for ${s}`);break;case 28:case 29:case 30:throw new Error(`Additional info not implemented: ${i}`);case Pt.INDEFINITE:switch(n){case kt.POS_INT:case kt.NEG_INT:case kt.TAG:throw new Error(`Invalid indefinite encoding for MT ${n}`);case kt.SIMPLE_FLOAT:return void(yield[n,i,Ht.BREAK,t,0])}s=1/0;break;default:o=!0}switch(this.#e+=a,n){case kt.POS_INT:yield[n,i,s,t,a];break;case kt.NEG_INT:yield[n,i,"bigint"==typeof s?-1n-s:-1-Number(s),t,a];break;case kt.BYTE_STRING:s===1/0?yield*this.#n(n,e,t):yield[n,i,this.#s(s),t,s];break;case kt.UTF8_STRING:s===1/0?yield*this.#n(n,e,t):yield[n,i,hn.decode(this.#s(s)),t,s];break;case kt.ARRAY:if(s===1/0)yield*this.#n(n,e,t,!1);else{const r=Number(s);yield[n,i,r,t,a];for(let t=0;t<r;t++)yield*this.#o(e+1)}break;case kt.MAP:if(s===1/0)yield*this.#n(n,e,t,!1);else{const r=Number(s);yield[n,i,r,t,a];for(let t=0;t<r;t++)yield*this.#o(e),yield*this.#o(e)}break;case kt.TAG:yield[n,i,s,t,a],yield*this.#o(e);break;case kt.SIMPLE_FLOAT:{const e=s;o&&(s=ln.create(Number(s))),yield[n,i,s,t,e];break}}}#s(e){const t=Qt(this.#i,this.#e,this.#e+=e);if(t.length!==e)throw new Error(`Unexpected end of stream reading ${e} bytes, got ${t.length}`);return t}*#n(e,t,r,n=!0){for(yield[e,Pt.INDEFINITE,1/0,r,1/0];;){const r=this.#o(t),i=r.next(),[s,o,a]=i.value;if(a===Ht.BREAK)return yield i.value,void r.next();if(n){if(s!==e)throw new Error(`Unmatched major type.  Expected ${e}, got ${s}.`);if(o===Pt.INDEFINITE)throw new Error("New stream started in typed stream")}yield i.value,yield*r}}};const fn=new Map([[Pt.ZERO,1],[Pt.ONE,2],[Pt.TWO,3],[Pt.FOUR,5],[Pt.EIGHT,9]]),dn=new Uint8Array(0);function pn(e,t){return t.boxed||t.preferMap||!e.every((([e])=>"string"==typeof e))?new Map(e):Object.fromEntries(e)}let gn=class e{static defaultDecodeOptions={...un.defaultOptions,ParentType:e,boxed:!1,cde:!1,dcbor:!1,diagnosticSizes:cn.PREFERRED,collapseBigInts:!1,convertUnsafeIntsToFloat:!1,createObject:pn,keepNanPayloads:!1,pretty:!1,preferBigInt:!1,preferMap:!1,rejectLargeNegatives:!1,rejectBigInts:!1,rejectDuplicateKeys:!1,rejectFloats:!1,rejectInts:!1,rejectLongLoundNaN:!1,rejectLongFloats:!1,rejectNegativeZero:!1,rejectSimple:!1,rejectStreaming:!1,rejectStringsNotNormalizedAs:null,rejectSubnormals:!1,rejectUndefined:!1,rejectUnsafeFloatInts:!1,saveOriginal:!1,sortKeys:null,tags:null,ignoreGlobalTags:!1};static cdeDecodeOptions={cde:!0,rejectStreaming:!0,requirePreferred:!0,sortKeys:or};static dcborDecodeOptions={...this.cdeDecodeOptions,dcbor:!0,convertUnsafeIntsToFloat:!0,rejectDuplicateKeys:!0,rejectLargeNegatives:!0,rejectLongLoundNaN:!0,rejectLongFloats:!0,rejectNegativeZero:!0,rejectSimple:!0,rejectUndefined:!0,rejectUnsafeFloatInts:!0,rejectStringsNotNormalizedAs:"NFC"};parent;mt;ai;left;offset;count=0;children=[];depth=0;#e;#i=null;constructor(e,t,r,n){if([this.mt,this.ai,,this.offset]=e,this.left=t,this.parent=r,this.#e=n,r&&(this.depth=r.depth+1),this.mt===kt.MAP&&(this.#e.sortKeys||this.#e.rejectDuplicateKeys)&&(this.#i=[]),this.#e.rejectStreaming&&this.ai===Pt.INDEFINITE)throw new Error("Streaming not supported")}get isStreaming(){return this.left===1/0}get done(){return 0===this.left}static create(e,t,r,n){const[i,s,o,a]=e;switch(i){case kt.POS_INT:case kt.NEG_INT:{if(r.rejectInts)throw new Error(`Unexpected integer: ${o}`);if(r.rejectLargeNegatives&&o<-0x8000000000000000n)throw new Error(`Invalid 65bit negative number: ${o}`);let e=o;return r.preferBigInt?e=BigInt(e):r.convertUnsafeIntsToFloat&&e>=Vt.MIN&&e<=Vt.MAX&&(e=Number(o)),r.boxed?Jt(e,n.toHere(a)):e}case kt.SIMPLE_FLOAT:if(s>Pt.ONE){if("symbol"==typeof o)return o;if(r.rejectFloats)throw new Error(`Decoding unwanted floating point number: ${o}`);if(r.rejectNegativeZero&&Object.is(o,-0))throw new Error("Decoding negative zero");if(isNaN(o)){const e=n.toHere(a),t=new Ir(e);if(r.rejectLongLoundNaN){if(t.payload||e.length>3)throw new Error(`Invalid NaN encoding: "${tr(e)}"`)}else if(r.keepNanPayloads&&(t.payload||-1===t.sign)){if(r.rejectLongFloats&&!t.isShortestEncoding)throw new Error(`NaN should have been encoded shorter: ${o}`);return t}}if(r.rejectSubnormals&&function(e){switch(e.length){case 2:xr(e,0,!0);break;case 4:{const t=new DataView(e.buffer,e.byteOffset,e.byteLength),r=t.getUint32(0,!1);if(0==(2139095040&r)&&8388607&r)throw new Error(`Unwanted subnormal: ${t.getFloat32(0,!1)}`);break}case 8:{const t=new DataView(e.buffer,e.byteOffset,e.byteLength),r=t.getBigUint64(0,!1);if(0n===(0x7ff0000000000000n&r)&&0x000fffffffffffn&r)throw new Error(`Unwanted subnormal: ${t.getFloat64(0,!1)}`);break}default:throw new TypeError(`Bad input to isSubnormal: ${e}`)}}(n.toHere(a+1)),r.rejectLongFloats){const e=an(o,{chunkSize:9,reduceUnsafeNumbers:r.rejectUnsafeFloatInts});if(e[0]>>5!==i)throw new Error(`Should have been encoded as int, not float: ${o}`);if(e.length<fn.get(s))throw new Error(`Number should have been encoded shorter: ${o}`)}if("number"==typeof o&&r.boxed)return Jt(o,n.toHere(a))}else{if(r.rejectSimple&&o instanceof ln)throw new Error(`Invalid simple value: ${o}`);if(r.rejectUndefined&&void 0===o)throw new Error("Unexpected undefined")}return o;case kt.BYTE_STRING:case kt.UTF8_STRING:if(o===1/0)return new r.ParentType(e,1/0,t,r);if(r.rejectStringsNotNormalizedAs&&"string"==typeof o){const e=o.normalize(r.rejectStringsNotNormalizedAs);if(o!==e)throw new Error(`String not normalized as "${r.rejectStringsNotNormalizedAs}", got [${sr(o)}] instead of [${sr(e)}]`)}return r.boxed?Jt(o,n.toHere(a)):o;case kt.ARRAY:return new r.ParentType(e,o,t,r);case kt.MAP:return new r.ParentType(e,2*o,t,r);case kt.TAG:{const n=new r.ParentType(e,1,t,r);return n.children=new zt(o),n}}throw new TypeError(`Invalid major type: ${i}`)}static decodeToEncodeOpts(e){return{...Yr,avoidInts:e.rejectInts,float64:!e.rejectLongFloats,flushToZero:e.rejectSubnormals,largeNegativeAsBigInt:e.rejectLargeNegatives,sortKeys:e.sortKeys}}push(e,t,r){if(this.children.push(e),this.#i){const n=Yt(e)||t.toHere(r);this.#i.push(n)}return--this.left}replaceLast(e,t,r){let n,i=-1/0;if(this.children instanceof zt?(i=0,n=this.children.contents,this.children.contents=e):(i=this.children.length-1,n=this.children[i],this.children[i]=e),this.#i){const n=Yt(e)||r.toHere(t.offset);this.#i[i]=n}return n}convert(e){let t;switch(this.mt){case kt.ARRAY:t=this.children;break;case kt.MAP:{const e=this.#t();if(this.#e.sortKeys){let t;for(const r of e){if(t&&this.#e.sortKeys(t,r)>=0)throw new Error(`Duplicate or out of order key: "0x${r[2]}"`);t=r}}else if(this.#e.rejectDuplicateKeys){const t=new Set;for(const[r,n,i]of e){const e=tr(i);if(t.has(e))throw new Error(`Duplicate key: "0x${e}"`);t.add(e)}}t=this.#e.createObject(e,this.#e);break}case kt.BYTE_STRING:return rr(this.children);case kt.UTF8_STRING:{const r=this.children.join("");t=this.#e.boxed?Jt(r,e.toHere(this.offset)):r;break}case kt.TAG:t=this.children.decode(this.#e);break;default:throw new TypeError(`Invalid mt on convert: ${this.mt}`)}return this.#e.saveOriginal&&t&&"object"==typeof t&&Wt(t,e.toHere(this.offset)),t}#t(){const e=this.children,t=e.length;if(t%2)throw new Error("Missing map value");const r=new Array(t/2);if(this.#i)for(let n=0;n<t;n+=2)r[n>>1]=[e[n],e[n+1],this.#i[n]];else for(let n=0;n<t;n+=2)r[n>>1]=[e[n],e[n+1],dn];return r}};const mn="  ",bn=new TextEncoder;class wn extends gn{close="";quote='"';get isEmptyStream(){return(this.mt===kt.UTF8_STRING||this.mt===kt.BYTE_STRING)&&0===this.count}}function yn(e,t,r,n){let i="";if(t===Pt.INDEFINITE)i+="_";else{if(n.diagnosticSizes===cn.NEVER)return"";{let s=n.diagnosticSizes===cn.ALWAYS;if(!s){let n=Pt.ZERO;if(Object.is(r,-0))n=Pt.TWO;else if(e===kt.POS_INT||e===kt.NEG_INT){const e=r<0?-r-("bigint"==typeof r?1n:1):r;n=e<=23?Number(e):e<=255?Pt.ONE:e<=65535?Pt.TWO:e<=4294967295?Pt.FOUR:Pt.EIGHT}else n=isFinite(r)?Math.fround(r)===r?null==Dr(r)?Pt.FOUR:Pt.TWO:Pt.EIGHT:Pt.TWO;s=n!==t}s&&(i+="_",t<Pt.ONE?i+="i":i+=String(t-24))}}return i}function En(e,t){const r={...gn.defaultDecodeOptions,...t,ParentType:wn},n=new un(e,r);let i,s,o="";for(const e of n){const[t,a,c]=e;switch(i&&(i.count>0&&c!==Ht.BREAK&&(i.mt===kt.MAP&&i.count%2?o+=": ":(o+=",",r.pretty||(o+=" "))),r.pretty&&(i.mt!==kt.MAP||i.count%2==0)&&(o+=`\n${mn.repeat(i.depth+1)}`)),s=gn.create(e,i,r,n),t){case kt.POS_INT:case kt.NEG_INT:o+=String(c),o+=yn(t,a,c,r);break;case kt.SIMPLE_FLOAT:if(c!==Ht.BREAK)if("number"==typeof c){const e=Object.is(c,-0)?"-0.0":String(c);o+=e,isFinite(c)&&!/[.e]/.test(e)&&(o+=".0"),o+=yn(t,a,c,r)}else c instanceof ln?(o+="simple(",o+=String(c.value),o+=yn(kt.POS_INT,a,c.value,r),o+=")"):o+=String(c);break;case kt.BYTE_STRING:c===1/0?(o+="(_ ",s.close=")",s.quote="'"):(o+="h'",o+=tr(c),o+="'",o+=yn(kt.POS_INT,a,c.length,r));break;case kt.UTF8_STRING:c===1/0?(o+="(_ ",s.close=")"):(o+=JSON.stringify(c),o+=yn(kt.POS_INT,a,bn.encode(c).length,r));break;case kt.ARRAY:{o+="[";const e=yn(kt.POS_INT,a,c,r);o+=e,e&&(o+=" "),r.pretty&&c?s.close=`\n${mn.repeat(s.depth)}]`:s.close="]";break}case kt.MAP:{o+="{";const e=yn(kt.POS_INT,a,c,r);o+=e,e&&(o+=" "),r.pretty&&c?s.close=`\n${mn.repeat(s.depth)}}`:s.close="}";break}case kt.TAG:o+=String(c),o+=yn(kt.POS_INT,a,c,r),o+="(",s.close=")"}if(s===Ht.BREAK){if(!i?.isStreaming)throw new Error("Unexpected BREAK");i.left=0}else i&&(i.count++,i.left--);for(s instanceof wn&&(i=s);i?.done;){if(i.isEmptyStream)o=o.slice(0,-3),o+=`${i.quote}${i.quote}_`;else{if(i.mt===kt.MAP&&i.count%2!=0)throw new Error(`Odd streaming map size: ${i.count}`);o+=i.close}i=i.parent}}return o}const Nn=new TextDecoder;class Tn extends gn{depth=0;leaf=!1;value;length;[Ht.ENCODED];constructor(e,t,r,n){super(e,t,r,n),this.parent?this.depth=this.parent.depth+1:this.depth=n.initialDepth,[,,this.value,,this.length]=e}numBytes(){switch(this.ai){case Pt.ONE:return 1;case Pt.TWO:return 2;case Pt.FOUR:return 4;case Pt.EIGHT:return 8}return 0}}function vn(e){return e instanceof Tn}function Sn(e,t){return e===1/0?"Indefinite":t?`${e} ${t}${1!==e&&1n!==e?"s":""}`:String(e)}function _n(e){return"".padStart(e," ")}function An(e,t,r){let n="";n+=_n(2*e.depth);const i=Yt(e);n+=tr(i.subarray(0,1));const s=e.numBytes();s&&(n+=" ",n+=tr(i.subarray(1,s+1))),n=n.padEnd(t.minCol+1," "),n+="-- ",void 0!==r&&(n+=_n(2*e.depth),""!==r&&(n+=`[${r}] `));let o=!1;const[a]=e.children;switch(e.mt){case kt.POS_INT:n+=`Unsigned: ${a}`,"bigint"==typeof a&&(n+="n");break;case kt.NEG_INT:n+=`Negative: ${a}`,"bigint"==typeof a&&(n+="n");break;case kt.BYTE_STRING:n+=`Bytes (Length: ${Sn(e.length)})`;break;case kt.UTF8_STRING:n+=`UTF8 (Length: ${Sn(e.length)})`,e.length!==1/0&&(n+=`: ${JSON.stringify(a)}`);break;case kt.ARRAY:n+=`Array (Length: ${Sn(e.value,"item")})`;break;case kt.MAP:n+=`Map (Length: ${Sn(e.value,"pair")})`;break;case kt.TAG:{n+=`Tag #${e.value}`;const r=e.children,[s]=r.contents.children,a=new zt(r.tag,s);Wt(a,i);const c=a.comment(t,e.depth);c&&(n+=": ",n+=c),o||=a.noChildren;break}case kt.SIMPLE_FLOAT:a===Ht.BREAK?n+="BREAK":e.ai>Pt.ONE?Object.is(a,-0)?n+="Float: -0":n+=`Float: ${a}`:(n+="Simple: ",n+=a instanceof ln?a.value:a)}if(!o)if(e.leaf){if(n+="\n",i.length>s+1){const r=_n(2*(e.depth+1)),o=Zt(i);if(o?.length){o.sort(((e,t)=>e[0]-t[0]||t[1]-e[1]));let a=0;for(const[c,l,h]of o)if(!(c<a)){if(a=c+l,"<<"===h){n+=_n(t.minCol+1),n+="--",n+=r,n+="<< ";const s=Qt(i,c,c+l),o=Zt(s);if(o){const e=o.findIndex((([e,t,r])=>0===e&&t===l&&"<<"===r));e>=0&&o.splice(e,1)}n+=En(s),n+=" >>\n",n+=In(s,{initialDepth:e.depth+1,minCol:t.minCol,noPrefixHex:!0});continue}if("'"===h&&(n+=_n(t.minCol+1),n+="--",n+=r,n+="'",n+=Nn.decode(i.subarray(c,c+l)),n+="'\n"),c>s)for(let e=c;e<c+l;e+=8){const t=Math.min(e+8,c+l);n+=r,n+=tr(i.subarray(e,t)),n+="\n"}}}else for(let e=s+1;e<i.length;e+=8)n+=r,n+=tr(i.subarray(e,e+8)),n+="\n"}}else{n+="\n";let r=0;for(const i of e.children){if(vn(i)){let s=String(r);e.mt===kt.MAP?s=r%2?"val "+(r-1)/2:"key "+r/2:e.mt===kt.TAG&&(s=""),n+=An(i,t,s)}r++}}return n}const On={...gn.defaultDecodeOptions,initialDepth:0,noPrefixHex:!1,minCol:0};function In(e,t){const r={...On,...t,ParentType:Tn,saveOriginal:!0},n=new un(e,r);let i,s;for(const e of n){if(s=gn.create(e,i,r,n),e[2]===Ht.BREAK){if(!i?.isStreaming)throw new Error("Unexpected BREAK");i.left=1}if(!vn(s)){const t=new Tn(e,0,i,r);t.leaf=!0,t.children.push(s),Wt(t,n.toHere(e[3])),s=t}let t=2*(s.depth+1);const o=s.numBytes();for(o&&(t+=1,t+=2*o),r.minCol=Math.max(r.minCol,t),i&&i.push(s,n,e[3]),i=s;i?.done;)s=i,s.leaf||Wt(s,n.toHere(s.offset)),({parent:i}=i)}t&&(t.minCol=r.minCol);let o=r.noPrefixHex?"":`0x${tr(n.toHere(0))}\n`;return o+=An(s,r),o}const xn=!function(){const e=new Uint8Array(4);return!((new Uint32Array(e.buffer)[0]=1)&e[0])}();function Dn(e){if("object"==typeof e&&e){if(e.constructor!==Number)throw new Error(`Expected number: ${e}`)}else if("number"!=typeof e)throw new Error(`Expected number: ${e}`)}function Un(e){if("object"==typeof e&&e){if(e.constructor!==String)throw new Error(`Expected string: ${e}`)}else if("string"!=typeof e)throw new Error(`Expected string: ${e}`)}function Rn(e){if(!(e instanceof Uint8Array))throw new Error(`Expected Uint8Array: ${e}`)}function Ln(e){if(!Array.isArray(e))throw new Error(`Expected Array: ${e}`)}function Cn(e){return Un(e.contents),new Date(e.contents)}function Mn(e){return Dn(e.contents),new Date(1e3*e.contents)}nn(Map,((e,t,r)=>{const n=[...e.entries()].map((e=>[e[0],e[1],an(e[0],r)]));if(r.rejectDuplicateKeys){const e=new Set;for(const[t,r,i]of n){const t=tr(i);if(e.has(t))throw new Error(`Duplicate map key: 0x${t}`);e.add(t)}}r.sortKeys&&n.sort(r.sortKeys),sn(e,e.size,kt.MAP,t,r);for(const[e,i,s]of n)t.write(s),on(i,t,r)})),Cn.comment=e=>{Un(e.contents);const t=new Date(e.contents);return`(String ${e.tag===$t.DATE_FULL?"Full ":""}Date) ${t.toISOString()}`},zt.registerDecoder($t.DATE_STRING,Cn),zt.registerDecoder($t.DATE_FULL,Cn),Mn.comment=e=>(Dn(e.contents),`(Epoch Date) ${new Date(1e3*e.contents).toISOString()}`),zt.registerDecoder($t.DATE_EPOCH,Mn);const Bn=864e5;function kn(e){return Dn(e.contents),new Date(e.contents*Bn)}function $n(e,t,r){if(Rn(t.contents),r.rejectBigInts)throw new Error(`Decoding unwanted big integer: ${t}(h'${tr(t.contents)}')`);if(r.requirePreferred&&0===t.contents[0])throw new Error(`Decoding overly-large bigint: ${t.tag}(h'${tr(t.contents)})`);let n=t.contents.reduce(((e,t)=>e<<8n|BigInt(t)),0n);e&&(n=-1n-n);const i=n>=Number.MIN_SAFE_INTEGER&&n<=Number.MAX_SAFE_INTEGER;if(r.requirePreferred&&i)throw new Error(`Decoding bigint that could have been int: ${n}n`);return r.collapseBigInts&&i&&(n=Number(n)),r.boxed?Jt(n,t.contents):n}kn.comment=e=>(Dn(e.contents),`(Epoch Date) ${new Date(e.contents*Bn).toISOString()}`),zt.registerDecoder($t.DATE_EPOCH_DAYS,kn),nn(Date,((e,t,r)=>{switch(r.dateTag){case $t.DATE_EPOCH:return[r.dateTag,e.valueOf()/1e3];case $t.DATE_STRING:return[r.dateTag,e.toISOString().replace(/\.000Z$/,"Z")];case $t.DATE_EPOCH_DAYS:return[r.dateTag,Math.floor(e.valueOf()/Bn)];case $t.DATE_FULL:return[r.dateTag,e.toISOString().split("T")[0]];default:throw new Error(`Unsupported date tag: ${r.dateTag}`)}}));const Pn=$n.bind(null,!1),Fn=$n.bind(null,!0);function qn(e,t){return Rn(e.contents),e}function jn(e,t,r){Rn(e.contents);let n=e.contents.length;if(n%t.BYTES_PER_ELEMENT!=0)throw new Error(`Number of bytes must be divisible by ${t.BYTES_PER_ELEMENT}, got: ${n}`);n/=t.BYTES_PER_ELEMENT;const i=new t(n),s=new DataView(e.contents.buffer,e.contents.byteOffset,e.contents.byteLength),o=s[`get${t.name.replace(/Array/,"")}`].bind(s);for(let e=0;e<n;e++)i[e]=o(e*t.BYTES_PER_ELEMENT,r);return i}function Gn(e,t,r,n,i){const s=i.forceEndian??xn;if(Qr(s?t:r,e,i),Zr(n.byteLength,e,kt.BYTE_STRING),xn===s)e.write(new Uint8Array(n.buffer,n.byteOffset,n.byteLength));else{const t=e[`write${n.constructor.name.replace(/Array/,"")}`].bind(e);for(const e of n)t(e,s)}}function Hn(e){return Rn(e.contents),(new kr).decode(e.contents)}function Vn(e){throw new Error(`Encoding ${e.constructor.name} intentionally unimplmented.  It is not concrete enough to interoperate.  Convert to Uint8Array first.`)}function zn(e){return[NaN,e.valueOf()]}Pn.comment=(e,t)=>`(Positive BigInt) ${$n(!1,e,t)}n`,Fn.comment=(e,t)=>`(Negative BigInt) ${$n(!0,e,t)}n`,zt.registerDecoder($t.POS_BIGINT,Pn),zt.registerDecoder($t.NEG_BIGINT,Fn),qn.comment=(e,t,r)=>{Rn(e.contents);const n={...t,initialDepth:r+2,noPrefixHex:!0},i=Yt(e);let s=2**((31&i[0])-24)+1;const o=31&i[s];let a=tr(i.subarray(s,++s));o>=24&&(a+=" ",a+=tr(i.subarray(s,s+2**(o-24)))),n.minCol=Math.max(n.minCol,2*(r+1)+a.length);const c=In(e.contents,n);let l="Embedded CBOR\n";return l+=`${"".padStart(2*(r+1)," ")}${a}`.padEnd(n.minCol+1," "),l+=`-- Bytes (Length: ${e.contents.length})\n`,l+=c,l},qn.noChildren=!0,zt.registerDecoder($t.CBOR,qn),zt.registerDecoder($t.URI,(e=>(Un(e.contents),new URL(e.contents))),"URI"),nn(URL,(e=>[$t.URI,e.toString()])),zt.registerDecoder($t.BASE64URL,(e=>(Un(e.contents),function(e){const t=e.replace(/[_-]/g,(e=>ir[e]));return nr(t.padEnd(4*Math.ceil(t.length/4),"="))}(e.contents))),"Base64url-encoded"),zt.registerDecoder($t.BASE64,(e=>(Un(e.contents),nr(e.contents))),"Base64-encoded"),zt.registerDecoder(35,(e=>(Un(e.contents),new RegExp(e.contents))),"RegExp"),zt.registerDecoder(21065,(e=>{Un(e.contents);const t=`^(?:${e.contents})$`;return new RegExp(t,"u")}),"I-RegExp"),zt.registerDecoder($t.REGEXP,(e=>{if(Ln(e.contents),e.contents.length<1||e.contents.length>2)throw new Error(`Invalid RegExp Array: ${e.contents}`);return new RegExp(e.contents[0],e.contents[1])}),"RegExp"),nn(RegExp,(e=>[$t.REGEXP,[e.source,e.flags]])),zt.registerDecoder(64,(e=>(Rn(e.contents),e.contents)),"uint8 Typed Array"),zt.registerDecoder(65,(e=>jn(e,Uint16Array,!1)),"uint16, big endian, Typed Array"),zt.registerDecoder(66,(e=>jn(e,Uint32Array,!1)),"uint32, big endian, Typed Array"),zt.registerDecoder(67,(e=>jn(e,BigUint64Array,!1)),"uint64, big endian, Typed Array"),zt.registerDecoder(68,(e=>(Rn(e.contents),new Uint8ClampedArray(e.contents))),"uint8 Typed Array, clamped arithmetic"),nn(Uint8ClampedArray,(e=>[68,new Uint8Array(e.buffer,e.byteOffset,e.byteLength)])),zt.registerDecoder(69,(e=>jn(e,Uint16Array,!0)),"uint16, little endian, Typed Array"),nn(Uint16Array,((e,t,r)=>Gn(t,69,65,e,r))),zt.registerDecoder(70,(e=>jn(e,Uint32Array,!0)),"uint32, little endian, Typed Array"),nn(Uint32Array,((e,t,r)=>Gn(t,70,66,e,r))),zt.registerDecoder(71,(e=>jn(e,BigUint64Array,!0)),"uint64, little endian, Typed Array"),nn(BigUint64Array,((e,t,r)=>Gn(t,71,67,e,r))),zt.registerDecoder(72,(e=>(Rn(e.contents),new Int8Array(e.contents))),"sint8 Typed Array"),nn(Int8Array,(e=>[72,new Uint8Array(e.buffer,e.byteOffset,e.byteLength)])),zt.registerDecoder(73,(e=>jn(e,Int16Array,!1)),"sint16, big endian, Typed Array"),zt.registerDecoder(74,(e=>jn(e,Int32Array,!1)),"sint32, big endian, Typed Array"),zt.registerDecoder(75,(e=>jn(e,BigInt64Array,!1)),"sint64, big endian, Typed Array"),zt.registerDecoder(77,(e=>jn(e,Int16Array,!0)),"sint16, little endian, Typed Array"),nn(Int16Array,((e,t,r)=>Gn(t,77,73,e,r))),zt.registerDecoder(78,(e=>jn(e,Int32Array,!0)),"sint32, little endian, Typed Array"),nn(Int32Array,((e,t,r)=>Gn(t,78,74,e,r))),zt.registerDecoder(79,(e=>jn(e,BigInt64Array,!0)),"sint64, little endian, Typed Array"),nn(BigInt64Array,((e,t,r)=>Gn(t,79,75,e,r))),zt.registerDecoder(81,(e=>jn(e,Float32Array,!1)),"IEEE 754 binary32, big endian, Typed Array"),zt.registerDecoder(82,(e=>jn(e,Float64Array,!1)),"IEEE 754 binary64, big endian, Typed Array"),zt.registerDecoder(85,(e=>jn(e,Float32Array,!0)),"IEEE 754 binary32, little endian, Typed Array"),nn(Float32Array,((e,t,r)=>Gn(t,85,81,e,r))),zt.registerDecoder(86,(e=>jn(e,Float64Array,!0)),"IEEE 754 binary64, big endian, Typed Array"),nn(Float64Array,((e,t,r)=>Gn(t,86,82,e,r))),zt.registerDecoder($t.SET,((e,t)=>{if(Ln(e.contents),t.sortKeys){const r=gn.decodeToEncodeOpts(t);let n=null;for(const i of e.contents){const e=[i,void 0,an(i,r)];if(n&&t.sortKeys(n,e)>=0)throw new Error(`Set items out of order in tag #${$t.SET}`);n=e}}return new Set(e.contents)}),"Set"),nn(Set,((e,t,r)=>{let n=[...e];if(r.sortKeys){const e=n.map((e=>[e,void 0,an(e,r)]));e.sort(r.sortKeys),n=e.map((([e])=>e))}return[$t.SET,n]})),zt.registerDecoder($t.JSON,(e=>(Un(e.contents),JSON.parse(e.contents))),"JSON-encoded"),Hn.comment=e=>{Rn(e.contents);const t=new kr;return`(WTF8 string): ${JSON.stringify(t.decode(e.contents))}`},zt.registerDecoder($t.WTF8,Hn),zt.registerDecoder($t.SELF_DESCRIBED,(e=>e.contents),"Self-Described"),zt.registerDecoder($t.INVALID_16,(()=>{throw new Error(`Tag always invalid: ${$t.INVALID_16}`)}),"Invalid"),zt.registerDecoder($t.INVALID_32,(()=>{throw new Error(`Tag always invalid: ${$t.INVALID_32}`)}),"Invalid"),zt.registerDecoder($t.INVALID_64,(()=>{throw new Error(`Tag always invalid: ${$t.INVALID_64}`)}),"Invalid"),nn(ArrayBuffer,Vn),nn(DataView,Vn),typeof SharedArrayBuffer<"u"&&nn(SharedArrayBuffer,Vn),nn(Boolean,zn),nn(Number,zn),nn(String,zn),nn(BigInt,zn);let Yn=class{parent=void 0;ret=void 0;step(e,t,r){if(this.ret=gn.create(e,this.parent,t,r),e[2]===Ht.BREAK){if(!this.parent?.isStreaming)throw new Error("Unexpected BREAK");this.parent.left=0}else this.parent&&this.parent.push(this.ret,r,e[3]);for(this.ret instanceof gn&&(this.parent=this.ret);this.parent?.done;){this.ret=this.parent.convert(r);const e=this.parent.parent;e?.replaceLast(this.ret,this.parent,r),this.parent=e}}};function Wn(e,t={}){const r=function(e){const t={...gn.defaultDecodeOptions};if(e.dcbor?Object.assign(t,gn.dcborDecodeOptions):e.cde&&Object.assign(t,gn.cdeDecodeOptions),Object.assign(t,e),Object.hasOwn(t,"rejectLongNumbers"))throw new TypeError("rejectLongNumbers has changed to requirePreferred");return t.boxed&&(t.saveOriginal=!0),t}(t),n=new un(e,r),i=new Yn;for(const e of n)i.step(e,r,n);return i.ret}const{cdeDecodeOptions:Jn,dcborDecodeOptions:Xn,defaultDecodeOptions:Kn}=gn;var Zn=Uint8Array,Qn=Uint16Array,ei=Int32Array,ti=new Zn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ri=new Zn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ni=new Zn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ii=function(e,t){for(var r=new Qn(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];var i=new ei(r[30]);for(n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)i[s]=s-r[n]<<5|n;return{b:r,r:i}},si=ii(ti,2),oi=si.b,ai=si.r;oi[28]=258,ai[258]=28;for(var ci=ii(ri,0).b,li=new Qn(32768),hi=0;hi<32768;++hi){var ui=(43690&hi)>>1|(21845&hi)<<1;ui=(61680&(ui=(52428&ui)>>2|(13107&ui)<<2))>>4|(3855&ui)<<4,li[hi]=((65280&ui)>>8|(255&ui)<<8)>>1}var fi=function(e,t,r){for(var n=e.length,i=0,s=new Qn(t);i<n;++i)e[i]&&++s[e[i]-1];var o,a=new Qn(t);for(i=1;i<t;++i)a[i]=a[i-1]+s[i-1]<<1;if(r){o=new Qn(1<<t);var c=15-t;for(i=0;i<n;++i)if(e[i])for(var l=i<<4|e[i],h=t-e[i],u=a[e[i]-1]++<<h,f=u|(1<<h)-1;u<=f;++u)o[li[u]>>c]=l}else for(o=new Qn(n),i=0;i<n;++i)e[i]&&(o[i]=li[a[e[i]-1]++]>>15-e[i]);return o},di=new Zn(288);for(hi=0;hi<144;++hi)di[hi]=8;for(hi=144;hi<256;++hi)di[hi]=9;for(hi=256;hi<280;++hi)di[hi]=7;for(hi=280;hi<288;++hi)di[hi]=8;var pi=new Zn(32);for(hi=0;hi<32;++hi)pi[hi]=5;var gi=fi(di,9,1),mi=fi(pi,5,1),bi=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},wi=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(7&t)&r},yi=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(7&t)},Ei=function(e){return(e+7)/8|0},Ni=function(e,t,r){return(null==t||t<0)&&(t=0),(null==r||r>e.length)&&(r=e.length),new Zn(e.subarray(t,r))},Ti=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],vi=function(e,t,r){var n=new Error(t||Ti[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,vi),!r)throw n;return n},Si=function(e,t,r,n){var i=e.length;if(!i||t.f&&!t.l)return r||new Zn(0);var s=!r,o=s||2!=t.i,a=t.i;s&&(r=new Zn(3*i));var c=function(e){var t=r.length;if(e>t){var n=new Zn(Math.max(2*t,e));n.set(r),r=n}},l=t.f||0,h=t.p||0,u=t.b||0,f=t.l,d=t.d,p=t.m,g=t.n,m=8*i;do{if(!f){l=wi(e,h,1);var b=wi(e,h+1,3);if(h+=3,!b){var w=e[(x=Ei(h)+4)-4]|e[x-3]<<8,y=x+w;if(y>i){a&&vi(0);break}o&&c(u+w),r.set(e.subarray(x,y),u),t.b=u+=w,t.p=h=8*y,t.f=l;continue}if(1==b)f=gi,d=mi,p=9,g=5;else if(2==b){var E=wi(e,h,31)+257,N=wi(e,h+10,15)+4,T=E+wi(e,h+5,31)+1;h+=14;for(var v=new Zn(T),S=new Zn(19),_=0;_<N;++_)S[ni[_]]=wi(e,h+3*_,7);h+=3*N;var A=bi(S),O=(1<<A)-1,I=fi(S,A,1);for(_=0;_<T;){var x,D=I[wi(e,h,O)];if(h+=15&D,(x=D>>4)<16)v[_++]=x;else{var U=0,R=0;for(16==x?(R=3+wi(e,h,3),h+=2,U=v[_-1]):17==x?(R=3+wi(e,h,7),h+=3):18==x&&(R=11+wi(e,h,127),h+=7);R--;)v[_++]=U}}var L=v.subarray(0,E),C=v.subarray(E);p=bi(L),g=bi(C),f=fi(L,p,1),d=fi(C,g,1)}else vi(1);if(h>m){a&&vi(0);break}}o&&c(u+131072);for(var M=(1<<p)-1,B=(1<<g)-1,k=h;;k=h){var $=(U=f[yi(e,h)&M])>>4;if((h+=15&U)>m){a&&vi(0);break}if(U||vi(2),$<256)r[u++]=$;else{if(256==$){k=h,f=null;break}var P=$-254;if($>264){var F=ti[_=$-257];P=wi(e,h,(1<<F)-1)+oi[_],h+=F}var q=d[yi(e,h)&B],j=q>>4;q||vi(3),h+=15&q;C=ci[j];if(j>3){F=ri[j];C+=yi(e,h)&(1<<F)-1,h+=F}if(h>m){a&&vi(0);break}o&&c(u+131072);var G=u+P;if(u<C){var H=0-C,V=Math.min(C,G);for(H+u<0&&vi(3);u<V;++u)r[u]=n[H+u]}for(;u<G;++u)r[u]=r[u-C]}}t.l=f,t.p=k,t.b=u,t.f=l,f&&(l=1,t.m=p,t.d=d,t.n=g)}while(!l);return u!=r.length&&s?Ni(r,0,u):r.subarray(0,u)},_i=new Zn(0),Ai=function(e,t){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&vi(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&vi(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)},Oi=function(){function e(e,t){"function"==typeof e&&(t=e,e={}),this.ondata=t;var r=e&&e.dictionary&&e.dictionary.subarray(-32768);this.s={i:0,b:r?r.length:0},this.o=new Zn(32768),this.p=new Zn(0),r&&this.o.set(r)}return e.prototype.e=function(e){if(this.ondata||vi(5),this.d&&vi(4),this.p.length){if(e.length){var t=new Zn(this.p.length+e.length);t.set(this.p),t.set(e,this.p.length),this.p=t}}else this.p=e},e.prototype.c=function(e){this.s.i=+(this.d=e||!1);var t=this.s.b,r=Si(this.p,this.s,this.o);this.ondata(Ni(r,t,this.s.b),this.d),this.o=Ni(r,this.s.b-32768),this.s.b=this.o.length,this.p=Ni(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(e,t){this.e(e),this.c(t)},e}(),Ii=function(){function e(e,t){Oi.call(this,e,t),this.v=e&&e.dictionary?2:1}return e.prototype.push=function(e,t){if(Oi.prototype.e.call(this,e),this.v){if(this.p.length<6&&!t)return;this.p=this.p.subarray(Ai(this.p,this.v-1)),this.v=0}t&&(this.p.length<4&&vi(6,"invalid zlib data"),this.p=this.p.subarray(0,-4)),Oi.prototype.c.call(this,t)},e}();var xi="undefined"!=typeof TextDecoder&&new TextDecoder;try{xi.decode(_i,{stream:!0}),1}catch(ar){}function Di(e,t="utf8"){return new TextDecoder(t).decode(e)}const Ui=new TextEncoder;const Ri=(()=>{const e=new Uint8Array(4);return!((new Uint32Array(e.buffer)[0]=1)&e[0])})(),Li={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Ci{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=8192,t={}){let r=!1;"number"==typeof e?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const n=t.offset?t.offset>>>0:0,i=e.byteLength-n;let s=n;(ArrayBuffer.isView(e)||e instanceof Ci)&&(e.byteLength!==e.buffer.byteLength&&(s=e.byteOffset+n),e=e.buffer),this.lastWrittenByte=r?i:0,this.buffer=e,this.length=i,this.byteLength=i,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,i),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(void 0===e)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const t=2*(this.offset+e),r=new Uint8Array(t);r.set(new Uint8Array(this.buffer)),this.buffer=r.buffer,this.length=t,this.byteLength=t,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const r=Li[t].BYTES_PER_ELEMENT*e,n=this.byteOffset+this.offset,i=this.buffer.slice(n,n+r);if(this.littleEndian===Ri&&"uint8"!==t&&"int8"!==t){const e=new Uint8Array(this.buffer.slice(n,n+r));e.reverse();const i=new Li[t](e.buffer);return this.offset+=r,i.reverse(),i}const s=new Li[t](i);return this.offset+=r,s}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(e=1){return Di(this.readBytes(e))}decodeText(e=1,t="utf8"){return Di(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(function(e){return Ui.encode(e)}(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}const Mi=[];for(let e=0;e<256;e++){let t=e;for(let e=0;e<8;e++)1&t?t=3988292384^t>>>1:t>>>=1;Mi[e]=t}const Bi=4294967295;function ki(e,t){return(function(e,t,r){let n=e;for(let e=0;e<r;e++)n=Mi[255&(n^t[e])]^n>>>8;return n}(Bi,e,t)^Bi)>>>0}function $i(e,t,r){const n=e.readUint32(),i=ki(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(i!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${i}`)}function Pi(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function Fi(e,t,r,n){let i=0;for(;i<n;i++)t[i]=e[i];for(;i<r;i++)t[i]=e[i]+t[i-n]&255}function qi(e,t,r,n){let i=0;if(0===r.length)for(;i<n;i++)t[i]=e[i];else for(;i<n;i++)t[i]=e[i]+r[i]&255}function ji(e,t,r,n,i){let s=0;if(0===r.length){for(;s<i;s++)t[s]=e[s];for(;s<n;s++)t[s]=e[s]+(t[s-i]>>1)&255}else{for(;s<i;s++)t[s]=e[s]+(r[s]>>1)&255;for(;s<n;s++)t[s]=e[s]+(t[s-i]+r[s]>>1)&255}}function Gi(e,t,r,n,i){let s=0;if(0===r.length){for(;s<i;s++)t[s]=e[s];for(;s<n;s++)t[s]=e[s]+t[s-i]&255}else{for(;s<i;s++)t[s]=e[s]+r[s]&255;for(;s<n;s++)t[s]=e[s]+Hi(t[s-i],r[s],r[s-i])&255}}function Hi(e,t,r){const n=e+t-r,i=Math.abs(n-e),s=Math.abs(n-t),o=Math.abs(n-r);return i<=s&&i<=o?e:s<=o?t:r}function Vi(e,t,r,n,i,s){switch(e){case 0:Pi(t,r,i);break;case 1:Fi(t,r,i,s);break;case 2:qi(t,r,n,i);break;case 3:ji(t,r,n,i,s);break;case 4:Gi(t,r,n,i,s);break;default:throw new Error(`Unsupported filter: ${e}`)}}const zi=new Uint16Array([255]),Yi=255===new Uint8Array(zi.buffer)[0];const Wi=new Uint16Array([255]),Ji=255===new Uint8Array(Wi.buffer)[0],Xi=new Uint8Array(0);function Ki(e){const{data:t,width:r,height:n,channels:i,depth:s}=e,o=Math.ceil(s/8)*i,a=Math.ceil(s/8*i*r),c=new Uint8Array(n*a);let l,h,u=Xi,f=0;for(let e=0;e<n;e++){switch(l=t.subarray(f+1,f+1+a),h=c.subarray(e*a,(e+1)*a),t[f]){case 0:Pi(l,h,a);break;case 1:Fi(l,h,a,o);break;case 2:qi(l,h,u,a);break;case 3:ji(l,h,u,a,o);break;case 4:Gi(l,h,u,a,o);break;default:throw new Error(`Unsupported filter: ${t[f]}`)}u=h,f+=a+1}if(16===s){const e=new Uint16Array(c.buffer);if(Ji)for(let t=0;t<e.length;t++)e[t]=(255&(d=e[t]))<<8|d>>8&255;return e}return c;var d}const Zi=Uint8Array.of(137,80,78,71,13,10,26,10);function Qi(e){if(!function(e){if(e.length<Zi.length)return!1;for(let t=0;t<Zi.length;t++)if(e[t]!==Zi[t])return!1;return!0}(e.readBytes(Zi.length)))throw new Error("wrong PNG signature")}const es=0,ts=new TextDecoder("latin1");function rs(e){if(function(e){if(!ns.test(e))throw new Error("invalid latin1 text")}(e),0===e.length||e.length>79)throw new Error("keyword length must be between 1 and 79")}const ns=/^[\u0000-\u00FF]*$/;function is(e,t,r){const n=ss(t);e[n]=function(e,t){return ts.decode(e.readBytes(t))}(t,r-n.length-1)}function ss(e){for(e.mark();e.readByte()!==es;);const t=e.offset;e.reset();const r=ts.decode(e.readBytes(t-e.offset-1));return e.skip(1),rs(r),r}const os=-1,as=0,cs=2,ls=3,hs=4,us=6,fs=-1,ds=0,ps=-1,gs=0,ms=-1,bs=0,ws=1,ys=0,Es=1,Ns=2,Ts=0,vs=1;class Ss extends Ci{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;_chunks;_inflatorResult;constructor(e,t={}){super(e);const{checkCrc:r=!1}=t;this._checkCrc=r,this._inflator=new Ii(((e,t)=>{if(this._chunks.push(e),t){const e=this._chunks.reduce(((e,t)=>e+t.length),0);this._inflatorResult=new Uint8Array(e);let t=0;for(const e of this._chunks)this._inflatorResult.set(e,t),t+=e.length;this._chunks=[]}})),this._chunks=[],this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=fs,this._filterMethod=ps,this._interlaceMethod=ms,this._colorType=os,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this._inflatorResult=new Uint8Array(0),this.setBigEndian()}decode(){for(Qi(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this._inflator.push(new Uint8Array(0),!0),this.decodeImage(),this._png}decodeApng(){for(Qi(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const r=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case"tEXt":is(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e)}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?$i(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const r=this.offset;switch("fdAT"!==t&&"IDAT"!==t&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=r+e}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?$i(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=function(e){if(1!==e&&2!==e&&4!==e&&8!==e&&16!==e)throw new Error(`invalid bit depth: ${e}`);return e}(this.readUint8());const t=this.readUint8();let r;switch(this._colorType=t,t){case as:r=1;break;case cs:r=3;break;case ls:r=1;break;case hs:r=2;break;case us:r=4;break;default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==ds)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!=0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const r=[];this._palette=r;for(let e=0;e<t;e++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,r=this.offset+this.byteOffset;try{this._inflator.push(new Uint8Array(this.buffer,r,t),!1)}catch(e){throw new Error("Error while decompressing the data:",{cause:e})}this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;r+=4,t-=4;try{this._inflator.push(new Uint8Array(this.buffer,r,t),!1)}catch(e){throw new Error("Error while decompressing the data:",{cause:e})}this.skip(e)}decodetRNS(e){switch(this._colorType){case as:case cs:if(e%2!=0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break;case ls:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const e=this.readByte();this._palette[t].push(e)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=ss(this),r=this.readUint8();if(r!==ds)throw new Error(`Unsupported iCCP compression method: ${r}`);const n=this.readBytes(e-t.length-2);var i,s;this._png.iccEmbeddedProfile={name:t,profile:(i=n,Si(i.subarray(Ai(i,s),-4),{i:2},s,s))}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:t,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:8===this._apng.depth?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=Ki({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),0===e||0===r.xOffset&&0===r.yOffset&&r.width===this._png.width&&r.height===this._png.height)t.data=r.data;else{const n=this._apng.frames.at(e-1);this.disposeFrame(r,n,t),this.addFrameDataToCanvas(t,r)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,r){switch(e.disposeOp){case ys:break;case Es:for(let t=0;t<this._png.height;t++)for(let n=0;n<this._png.width;n++){const i=(t*e.width+n)*this._png.channels;for(let e=0;e<this._png.channels;e++)r.data[i+e]=0}break;case Ns:r.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const r=1<<this._png.depth,n=(e,r)=>({index:((e+t.yOffset)*this._png.width+t.xOffset+r)*this._png.channels,frameIndex:(e*t.width+r)*this._png.channels});switch(t.blendOp){case Ts:for(let r=0;r<t.height;r++)for(let i=0;i<t.width;i++){const{index:s,frameIndex:o}=n(r,i);for(let r=0;r<this._png.channels;r++)e.data[s+r]=t.data[o+r]}break;case vs:for(let i=0;i<t.height;i++)for(let s=0;s<t.width;s++){const{index:o,frameIndex:a}=n(i,s);for(let n=0;n<this._png.channels;n++){const i=t.data[a+this._png.channels-1]/r,s=n%(this._png.channels-1)==0?1:t.data[a+n],c=Math.floor(i*s+(1-i)*e.data[o+n]);e.data[o+n]+=c}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){const e=this._inflatorResult;if(this._filterMethod!==gs)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===bs)this._png.data=Ki({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else{if(this._interlaceMethod!==ws)throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._png.data=function(e){const{data:t,width:r,height:n,channels:i,depth:s}=e,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(s/8)*i,c=new Uint8Array(n*r*a);let l=0;for(let e=0;e<7;e++){const i=o[e],s=Math.ceil((r-i.x)/i.xStep),h=Math.ceil((n-i.y)/i.yStep);if(s<=0||h<=0)continue;const u=s*a,f=new Uint8Array(u);for(let e=0;e<h;e++){const o=t[l++],h=t.subarray(l,l+u);l+=u;const d=new Uint8Array(u);Vi(o,h,d,f,u,a),f.set(d);for(let t=0;t<s;t++){const s=i.x+t*i.xStep,o=i.y+e*i.yStep;if(!(s>=r||o>=n))for(let e=0;e<a;e++)c[(o*r+s)*a+e]=d[t*a+e]}}}if(16===s){const e=new Uint16Array(c.buffer);if(Yi)for(let t=0;t<e.length;t++)e[t]=(255&(h=e[t]))<<8|h>>8&255;return e}return c;var h}({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth})}this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){this._inflator.push(new Uint8Array(0),!0);const e=this._inflatorResult,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:ys,blendOp:Ts,data:e}),this._inflator=new Ii(((e,t)=>{if(this._chunks.push(e),t){const e=this._chunks.reduce(((e,t)=>e+t.length),0);this._inflatorResult=new Uint8Array(e);let t=0;for(const e of this._chunks)this._inflatorResult.set(e,t),t+=e.length;this._chunks=[]}})),this._chunks=[],this._writingDataChunks=!1}}function _s(e){return e instanceof Object&&"op"in e&&"string"==typeof e.op}function As(e){return"status"===e.op}function Os(e){return"fragment"===e.op}function Is(e){return"png"===e.op}function xs(e){return"publish"===e.op}function Ds(e){return"call_service"===e.op}function Us(e){return"service_response"===e.op}function Rs(e){return"send_action_goal"===e.op}function Ls(e){return"cancel_action_goal"===e.op}function Cs(e){return"action_feedback"===e.op}function Ms(e){return"action_result"===e.op}class Bs extends i{constructor({ros:e,name:t,serviceType:r}){super(),this.#e=null,this.isAdvertised=!1,this.#i=Promise.resolve(),this.#t=!1,this.ros=e,this.name=t,this.serviceType=r}#e;#i;#t;callService(e,t,r=console.error,n){if(this.isAdvertised)return;const i=`call_service:${this.name}:${h()}`;this.ros.once(i,(function(e){Us(e)&&(e.result?t?.(e.values):r(e.values??""))})),this.ros.callOnConnection({op:"call_service",id:i,service:this.name,args:e,timeout:n})}async advertise(e){return this.#i=this.#i.then((()=>{this.isAdvertised&&this.#g(),this.#e=t=>{if(!Ds(t))throw new Error(`Invalid message received on service channel: ${JSON.stringify(t)}`);const r={};let n;try{n=e(t.args,r)}catch{n=!1}n?this.ros.callOnConnection({op:"service_response",service:this.name,values:r,result:n,id:t.id}):this.ros.callOnConnection({op:"service_response",service:this.name,result:n,id:t.id})},this.ros.on(this.name,this.#e),this.ros.callOnConnection({op:"advertise_service",type:this.serviceType,service:this.name}),this.isAdvertised=!0})).catch((e=>{throw this.emit("error",e),e})),this.#i}#g(){if(this.isAdvertised&&!this.#t){this.#t=!0;try{this.isAdvertised=!1,this.#e&&(this.ros.off(this.name,this.#e),this.#e=null),this.ros.callOnConnection({op:"unadvertise_service",service:this.name})}finally{this.#t=!1}}}async unadvertise(){return this.#i=this.#i.then((()=>{this.#g()})).catch((e=>{throw this.emit("error",e),e})),this.#i}async advertiseAsync(e){return this.#i=this.#i.then((()=>{this.isAdvertised&&this.#g(),this.#e=t=>{if(!Ds(t))throw new Error(`Invalid message received on service channel: ${JSON.stringify(t)}`);(async()=>{try{this.ros.callOnConnection({op:"service_response",service:this.name,result:!0,values:await e(t.args),id:t.id})}catch(e){this.ros.callOnConnection({op:"service_response",service:this.name,result:!1,values:String(e),id:t.id})}})().catch(console.error)},this.ros.on(this.name,this.#e),this.ros.callOnConnection({op:"advertise_service",type:this.serviceType,service:this.name}),this.isAdvertised=!0})).catch((e=>{throw this.emit("error",e),e})),this.#i}}class ks extends i{constructor({ros:e,name:t,messageType:r,compression:n="none",throttle_rate:i=0,latch:s=!1,queue_size:o=100,queue_length:a=0,reconnect_on_close:c=!0}){super(),this.waitForReconnect=!1,this.reconnectFunc=void 0,this.isAdvertised=!1,this.subscribeId=null,this.#e=e=>{if(!xs(e))throw new Error(`Unexpected message on topic channel: ${JSON.stringify(e)}`);this.emit("message",e.msg)},this.ros=e,this.name=t,this.messageType=r,this.compression=n,this.throttle_rate=i,this.latch=s,this.queue_size=o,this.queue_length=a,this.reconnect_on_close=c,this.compression&&"png"!==this.compression&&"cbor"!==this.compression&&"cbor-raw"!==this.compression&&"none"!==this.compression&&(this.emit("warning",`${this.compression} compression is not supported. No compression will be used.`),this.compression="none"),this.throttle_rate<0&&(this.emit("warning",`${this.throttle_rate.toString()} is not allowed. Set to 0`),this.throttle_rate=0),this.reconnect_on_close?this.callForSubscribeAndAdvertise=e=>{this.ros.callOnConnection(e),this.waitForReconnect=!1,this.reconnectFunc=()=>{this.waitForReconnect||(this.waitForReconnect=!0,this.ros.callOnConnection(e),this.ros.once("connection",(()=>{this.waitForReconnect=!1})))},this.ros.on("close",this.reconnectFunc)}:this.callForSubscribeAndAdvertise=e=>{this.ros.callOnConnection(e)}}#e;subscribe(e){this.on("message",e),!this.subscribeId&&(this.ros.on(this.name,this.#e),this.subscribeId=`subscribe:${this.name}:${h()}`,this.callForSubscribeAndAdvertise({op:"subscribe",id:this.subscribeId,type:this.messageType,topic:this.name,compression:this.compression,throttle_rate:this.throttle_rate,queue_length:this.queue_length}))}unsubscribe(e){e&&(this.off("message",e),this.listeners("message").length)||this.subscribeId&&(this.ros.off(this.name,this.#e),this.reconnect_on_close&&this.ros.off("close",this.reconnectFunc),this.emit("unsubscribe"),this.ros.callOnConnection({op:"unsubscribe",id:this.subscribeId,topic:this.name}),this.subscribeId=null)}advertise(){this.isAdvertised||(this.advertiseId=`advertise:${this.name}:${h()}`,this.callForSubscribeAndAdvertise({op:"advertise",id:this.advertiseId,type:this.messageType,topic:this.name,latch:this.latch,queue_size:this.queue_size}),this.isAdvertised=!0,this.reconnect_on_close||this.ros.on("close",(()=>{this.isAdvertised=!1})))}unadvertise(){this.isAdvertised&&(this.reconnect_on_close&&this.ros.off("close",this.reconnectFunc),this.emit("unadvertise"),this.ros.callOnConnection({op:"unadvertise",id:this.advertiseId,topic:this.name}),this.isAdvertised=!1)}publish(e){this.isAdvertised||this.advertise(),this.ros.callOnConnection({op:"publish",id:`publish:${this.name}:${h()}`,topic:this.name,msg:e})}getPublishers(e,t=console.error){const r=new Bs({ros:this.ros,name:"/rosapi/publishers",serviceType:"rosapi/Publishers"}),n={topic:this.name};r.callService(n,(function(t){e(t.publishers)}),(function(e){t(e)}))}}class $s{constructor({ros:e,name:t}){this.ros=e,this.name=t}get(e,t=console.error){const r=new Bs({ros:this.ros,name:"rosapi/get_param",serviceType:"rosapi/GetParam"}),n={name:this.name};r.callService(n,(function(r){"successful"in r&&!r.successful?t(r.reason):e(JSON.parse(r.value))}),t)}set(e,t,r=console.error){const n=new Bs({ros:this.ros,name:"rosapi/set_param",serviceType:"rosapi/SetParam"}),i={name:this.name,value:JSON.stringify(e)};n.callService(i,(function(e){"successful"in e&&!e.successful?r(e.reason):t&&t(e)}),r)}delete(e,t=console.error){const r=new Bs({ros:this.ros,name:"rosapi/delete_param",serviceType:"rosapi/DeleteParam"}),n={name:this.name};r.callService(n,(function(r){"successful"in r&&!r.successful?t(r.reason):e(r)}),t)}}class Ps extends i{constructor({ros:e,serverName:t,actionName:r,timeout:n,omitFeedback:i,omitStatus:s,omitResult:o}){super(),this.goals={},this.receivedStatus=!1,this.ros=e,this.serverName=t,this.actionName=r,this.timeout=n,this.omitFeedback=i,this.omitStatus=s,this.omitResult=o,this.feedbackListener=new ks({ros:this.ros,name:`${this.serverName}/feedback`,messageType:`${this.actionName}Feedback`}),this.statusListener=new ks({ros:this.ros,name:`${this.serverName}/status`,messageType:"actionlib_msgs/GoalStatusArray"}),this.resultListener=new ks({ros:this.ros,name:`${this.serverName}/result`,messageType:`${this.actionName}Result`}),this.goalTopic=new ks({ros:this.ros,name:`${this.serverName}/goal`,messageType:`${this.actionName}Goal`}),this.cancelTopic=new ks({ros:this.ros,name:`${this.serverName}/cancel`,messageType:"actionlib_msgs/GoalID"}),this.goalTopic.advertise(),this.cancelTopic.advertise(),this.omitStatus||this.statusListener.subscribe((e=>{this.receivedStatus=!0,e.status_list.forEach((e=>{const t=this.goals[e.goal_id.id];t&&t.emit("status",e)}))})),this.omitFeedback||this.feedbackListener.subscribe((e=>{const t=this.goals[e.status.goal_id.id];t&&(t.emit("status",e.status),t.emit("feedback",e.feedback))})),this.omitResult||this.resultListener.subscribe((e=>{const t=this.goals[e.status.goal_id.id];t&&(t.emit("status",e.status),t.emit("result",e.result))})),this.timeout&&setTimeout((()=>{this.receivedStatus||this.emit("timeout")}),this.timeout)}cancel(){this.cancelTopic.publish({})}dispose(){this.goalTopic.unadvertise(),this.cancelTopic.unadvertise(),this.omitStatus||this.statusListener.unsubscribe(),this.omitFeedback||this.feedbackListener.unsubscribe(),this.omitResult||this.resultListener.unsubscribe()}}class Fs extends i{constructor({actionClient:e,goalMessage:t}){super(),this.isFinished=!1,this.status=void 0,this.result=void 0,this.feedback=void 0,this.goalID=`goal_${h()}`,this.actionClient=e,this.goalMessage={goal_id:{stamp:{secs:0,nsecs:0},id:this.goalID},goal:t},this.on("status",(e=>{this.status=e})),this.on("result",(e=>{this.isFinished=!0,this.result=e})),this.on("feedback",(e=>{this.feedback=e})),this.actionClient.goals[this.goalID]=this}send(e){this.actionClient.goalTopic.publish(this.goalMessage),e&&setTimeout((()=>{this.isFinished||this.emit("timeout")}),e)}cancel(){const e={id:this.goalID};this.actionClient.cancelTopic.publish(e)}}class qs{constructor(e){this.x=e?.x??0,this.y=e?.y??0,this.z=e?.z??0}add(e){this.x+=e.x,this.y+=e.y,this.z+=e.z}subtract(e){this.x-=e.x,this.y-=e.y,this.z-=e.z}multiplyQuaternion(e){const t=e.w*this.x+e.y*this.z-e.z*this.y,r=e.w*this.y+e.z*this.x-e.x*this.z,n=e.w*this.z+e.x*this.y-e.y*this.x,i=-e.x*this.x-e.y*this.y-e.z*this.z;this.x=t*e.w+i*-e.x+r*-e.z-n*-e.y,this.y=r*e.w+i*-e.y+n*-e.x-t*-e.z,this.z=n*e.w+i*-e.z+t*-e.y-r*-e.x}clone(){return new qs(this)}}class js{constructor(e){this.x=e?.x??0,this.y=e?.y??0,this.z=e?.z??0,this.w="number"==typeof e?.w?e.w:1}conjugate(){this.x*=-1,this.y*=-1,this.z*=-1}norm(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e)}invert(){this.conjugate(),this.normalize()}multiply(e){const t=this.x*e.w+this.y*e.z-this.z*e.y+this.w*e.x,r=-this.x*e.z+this.y*e.w+this.z*e.x+this.w*e.y,n=this.x*e.y-this.y*e.x+this.z*e.w+this.w*e.z,i=-this.x*e.x-this.y*e.y-this.z*e.z+this.w*e.w;this.x=t,this.y=r,this.z=n,this.w=i}clone(){return new js(this)}}class Gs{constructor(e){this.translation=new qs(e.translation),this.rotation=new js(e.rotation)}clone(){return new Gs(this)}}class Hs{constructor({ros:e,fixedFrame:t="base_link",angularThres:r=2,transThres:n=.01,rate:i=10,updateDelay:s=50,topicTimeout:o=2,serverName:a="/tf2_web_republisher"}){this.frameInfos={},this.republisherUpdateRequested=!1,this.ros=e,this.fixedFrame=t,this.angularThres=r,this.transThres=n,this.rate=i,this.updateDelay=s;const c=o,l=Math.floor(c),h=Math.floor(1e9*(c-l));this.topicTimeout={secs:l,nsecs:h},this.serverName=a}processTFArray(e){e.transforms.forEach((e=>{let t=e.child_frame_id;t.startsWith("/")&&(t=t.substring(1));const r=this.frameInfos[t];if(r){const t=new Gs({translation:e.transform.translation,rotation:e.transform.rotation});r.transform=t,r.cbs.forEach((e=>{e(t)}))}}),this)}updateGoal(){throw new Error("updateGoal() must be implemented by subclass")}subscribe(e,t){e.startsWith("/")&&(e=e.substring(1)),this.frameInfos[e]||(this.frameInfos[e]={cbs:[]},this.republisherUpdateRequested||(setTimeout((()=>{this.updateGoal()}),this.updateDelay),this.republisherUpdateRequested=!0));const r=this.frameInfos[e]?.transform;r&&t(r),this.frameInfos[e]?.cbs.push(t)}unsubscribe(e,t){e.startsWith("/")&&(e=e.substring(1));const r=this.frameInfos[e];for(var n=r?.cbs??[],i=n.length;i--;)n[i]===t&&n.splice(i,1);(!t||0===n.length)&&delete this.frameInfos[e]}}class Vs extends Hs{constructor(e){super(e),this.currentGoal=!1,this.currentTopic=!1,this.#e=void 0,this.#i=!1,this.actionClient=new Ps({ros:this.ros,serverName:this.serverName,actionName:"tf2_web_republisher/TFSubscriptionAction",omitStatus:!0,omitResult:!0})}#e;#i;updateGoal(){const e={source_frames:Object.keys(this.frameInfos),target_frame:this.fixedFrame,angular_thres:this.angularThres,trans_thres:this.transThres,rate:this.rate};this.currentGoal&&this.currentGoal.cancel(),this.currentGoal=new Fs({actionClient:this.actionClient,goalMessage:e}),this.currentGoal.on("feedback",(e=>{this.processTFArray(e)})),this.currentGoal.send(),this.republisherUpdateRequested=!1}processResponse(e){this.#i||(this.currentTopic&&this.currentTopic.unsubscribe(this.#e),this.currentTopic=new ks({ros:this.ros,name:e.topic_name,messageType:"tf2_web_republisher/TFArray"}),this.#e=e=>{this.processTFArray(e)},this.currentTopic.subscribe(this.#e))}dispose(){this.#i=!0,this.actionClient.dispose(),this.currentTopic&&this.currentTopic.unsubscribe(this.#e)}}class zs extends i{constructor({ros:e,serverName:t,actionName:r}){super(),this.currentGoal=null,this.nextGoal=null,this.ros=e,this.serverName=t,this.actionName=r,this.feedbackPublisher=new ks({ros:this.ros,name:`${this.serverName}/feedback`,messageType:`${this.actionName}Feedback`}),this.feedbackPublisher.advertise();const n=new ks({ros:this.ros,name:`${this.serverName}/status`,messageType:"actionlib_msgs/GoalStatusArray"});n.advertise(),this.resultPublisher=new ks({ros:this.ros,name:`${this.serverName}/result`,messageType:`${this.actionName}Result`}),this.resultPublisher.advertise();const i=new ks({ros:this.ros,name:`${this.serverName}/goal`,messageType:`${this.actionName}Goal`}),s=new ks({ros:this.ros,name:`${this.serverName}/cancel`,messageType:"actionlib_msgs/GoalID"});this.statusMessage={header:{stamp:{secs:0,nsecs:100},frame_id:""},status_list:[]},i.subscribe((e=>{this.currentGoal?(this.nextGoal=e,this.emit("cancel")):(this.statusMessage.status_list=[{goal_id:e.goal_id,status:1}],this.currentGoal=e,this.emit("goal",e.goal))}));const o=function(e,t){return!(e.secs>t.secs)&&(e.secs<t.secs||e.nsecs<t.nsecs)};s.subscribe((e=>{0===e.stamp.secs&&0===e.stamp.nsecs&&""===e.id?(this.nextGoal=null,this.currentGoal&&this.emit("cancel")):(e.id===this.currentGoal?.goal_id.id?this.emit("cancel"):e.id===this.nextGoal?.goal_id.id&&(this.nextGoal=null),this.nextGoal&&o(this.nextGoal.goal_id.stamp,e.stamp)&&(this.nextGoal=null),this.currentGoal&&o(this.currentGoal.goal_id.stamp,e.stamp)&&this.emit("cancel"))})),setInterval((()=>{const e=new Date,t=Math.floor(e.getTime()/1e3),r=Math.round(1e9*(e.getTime()/1e3-t));this.statusMessage.header={...this.statusMessage.header,stamp:{secs:t,nsecs:r}},n.publish(this.statusMessage)}),500)}setSucceeded(e){if(null!==this.currentGoal){const t={status:{goal_id:this.currentGoal.goal_id,status:3},result:e};this.resultPublisher.publish(t),this.statusMessage.status_list=[],this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null}}setAborted(e){if(null!==this.currentGoal){const t={status:{goal_id:this.currentGoal.goal_id,status:4},result:e};this.resultPublisher.publish(t),this.statusMessage.status_list=[],this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null}}sendFeedback(e){if(null!==this.currentGoal){const t={status:{goal_id:this.currentGoal.goal_id,status:1},feedback:e};this.feedbackPublisher.publish(t)}}setPreempted(){if(null!==this.currentGoal){this.statusMessage.status_list=[];const e={status:{goal_id:this.currentGoal.goal_id,status:2}};this.resultPublisher.publish(e),this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null}}}const Ys=async e=>{if("function"==typeof WebSocket){const t=await Promise.resolve().then((function(){return $o})),{NativeWebSocketTransport:r}=t,n=new WebSocket(e);return n.binaryType="arraybuffer",new r(n)}const t=await import("ws"),r=await Promise.resolve().then((function(){return Po})),{WsWebSocketTransport:n}=r,i=new t.WebSocket(e);return i.binaryType="arraybuffer",new n(i)};var Ws=(e=>(e[e.STATUS_UNKNOWN=0]="STATUS_UNKNOWN",e[e.STATUS_ACCEPTED=1]="STATUS_ACCEPTED",e[e.STATUS_EXECUTING=2]="STATUS_EXECUTING",e[e.STATUS_CANCELING=3]="STATUS_CANCELING",e[e.STATUS_SUCCEEDED=4]="STATUS_SUCCEEDED",e[e.STATUS_CANCELED=5]="STATUS_CANCELED",e[e.STATUS_ABORTED=6]="STATUS_ABORTED",e))(Ws||{});class Js extends Error{constructor(e,t){super(`${function(e){switch(e){case Ws.STATUS_CANCELED:return"Action was canceled";case Ws.STATUS_ABORTED:return"Action was aborted";case Ws.STATUS_CANCELING:return"Action is canceling";case Ws.STATUS_UNKNOWN:return"Action status unknown";default:return`Action failed with status ${String(e)}`}}(e)}${t?`: ${t}`:""}`),this.name="GoalError"}}class Xs{constructor({ros:e,name:t,actionType:r}){this.isAdvertised=!1,this.#e=null,this.#i=null,this.ros=e,this.name=t,this.actionType=r}#e;#i;sendGoal(e,t,r,n=console.error){if(this.isAdvertised)return;const i=`send_action_goal:${this.name}:${h()}`;return this.ros.on(i,(e=>{if(Ms(e)){const r=e.status;e.result?r!==Ws.STATUS_SUCCEEDED?n(String(new Js(r,JSON.stringify(e.values)))):t(e.values):n(String(new Js(r,e.values)))}else Cs(e)&&r?.(e.values)})),this.ros.callOnConnection({op:"send_action_goal",id:i,action:this.name,action_type:this.actionType,args:e,feedback:!0}),i}cancelGoal(e){this.ros.callOnConnection({op:"cancel_action_goal",id:e,action:this.name})}cancelAllGoals(){this.ros.callOnConnection({op:"call_service",service:`${this.name}/_action/cancel_goal`,args:{}})}advertise(e,t){this.isAdvertised||"function"!=typeof e||(this.#e=e,this.#i=t,this.ros.on(this.name,(e=>{if(!Rs(e))throw new Error("Received unrelated message on Action server event stream!");this.#t(e)})),this.ros.callOnConnection({op:"advertise_action",type:this.actionType,action:this.name}),this.isAdvertised=!0)}unadvertise(){this.isAdvertised&&(this.ros.callOnConnection({op:"unadvertise_action",action:this.name}),this.isAdvertised=!1)}#t(e){const t=e.id;if("string"==typeof t&&this.ros.on(t,(e=>{Ls(e)&&this.#i&&this.#i(t)})),this.#e){if(!e.args)throw new Error("Received Action goal with no arguments! This should never happen, because rosbridge should fill in blanks!");this.#e(e.args,t)}}sendFeedback(e,t){this.ros.callOnConnection({op:"action_feedback",id:e,action:this.name,values:t})}setSucceeded(e,t){this.ros.callOnConnection({op:"action_result",id:e,action:this.name,values:t,status:Ws.STATUS_SUCCEEDED,result:!0})}setCanceled(e,t){this.ros.callOnConnection({op:"action_result",id:e,action:this.name,values:t,status:Ws.STATUS_CANCELED,result:!0})}setFailed(e){this.ros.callOnConnection({op:"action_result",id:e,action:this.name,status:Ws.STATUS_ABORTED,result:!1})}}const Ks=new TextDecoder;function Zs(e){const t=Uint8Array.from(atob(e),(e=>e.charCodeAt(0))),r=function(e){try{return new Ss(e,t).decode()}catch(e){throw new Error("Error decoding PNG buffer",{cause:e})}var t}(t);try{return JSON.parse(Ks.decode(r.data))}catch(e){throw new Error("Error parsing PNG JSON contents",{cause:e})}}class Qs extends i{#e=new Map;handleRawMessage(e){try{_s(e)?this.handleRosbridgeMessage(e):typeof Blob<"u"&&e instanceof Blob?this.handleBsonMessage(e):e instanceof ArrayBuffer?this.handleCborMessage(e):this.handleJsonMessage(String(e))}catch(e){this.emit("error",e)}}handleRosbridgeMessage(e){Os(e)?this.handleRosbridgeFragmentMessage(e):Is(e)?this.handleRosbridgePngMessage(e):this.emit("message",e)}handleRosbridgeFragmentMessage(e){const{id:t,data:r,num:n,total:i}=e;if(!t||"number"!=typeof n||"number"!=typeof i||"string"!=typeof r)return;const s=Math.floor(i);this.#e.has(t)||this.#e.set(t,{fragments:[],received:0,total:s});const o=this.#e.get(t);if(!o)throw new Error(`Fragment buffer entry missing for id: ${t}`);if(n<s&&typeof o.fragments[n]>"u"&&(o.fragments[n]=r,o.received++),o.received===s){const e=o.fragments.join("");let r;try{r=JSON.parse(e)}catch(e){throw new Error("Fragments did not form a valid JSON message!",{cause:e})}finally{this.#e.delete(t)}if(!_s(r))throw new Error("Received invalid rosbridge message!");this.handleRosbridgeMessage(r)}}handleRosbridgePngMessage(e){const t=Zs(e.data);if(!_s(t))throw new Error("Decompressed PNG data was invalid!");this.handleRosbridgeMessage(t)}handleBsonMessage(e){const t=new FileReader;t.onload=()=>{if(t.result instanceof ArrayBuffer){const e=function(e,t={}){return rt(oe.toLocalBufferType(e),t)}(new Uint8Array(t.result));_s(e)?this.handleRosbridgeMessage(e):this.emit("error",new Error("Decoded BSON data was invalid!"))}},t.readAsArrayBuffer(e)}handleCborMessage(e){const t=Wn(new Uint8Array(e));if(!_s(t))throw new Error("Decoded CBOR data was invalid!");this.handleRosbridgeMessage(t)}handleJsonMessage(e){const t=JSON.parse(e);if(!_s(t))throw new Error("Received invalid rosbridge message!");this.handleRosbridgeMessage(t)}}class eo{constructor(e){this.position=new qs(e?.position),this.orientation=new js(e?.orientation)}applyTransform(e){this.position.multiplyQuaternion(e.rotation),this.position.add(e.translation);const t=new js(e.rotation);t.multiply(this.orientation),this.orientation=t}clone(){return new eo(this)}multiply(e){const t=e.clone();return t.applyTransform({rotation:this.orientation,translation:this.position}),t}getInverse(){const e=this.clone();return e.orientation.invert(),e.position.multiplyQuaternion(e.orientation),e.position.x*=-1,e.position.y*=-1,e.position.z*=-1,e}}var to=(e=>(e[e.SPHERE=0]="SPHERE",e[e.BOX=1]="BOX",e[e.CYLINDER=2]="CYLINDER",e[e.MESH=3]="MESH",e))(to||{}),ro=(e=>(e.Name="name",e.Type="type",e.Parent="parent",e.Link="link",e.Child="child",e.Limit="limit",e.Upper="upper",e.Lower="lower",e.Origin="origin",e.Xyz="xyz",e.Rpy="rpy",e.Size="size",e.Rgba="rgba",e.Length="length",e.Radius="radius",e.Visuals="visual",e.Texture="texture",e.Filename="filename",e.Color="color",e.Geometry="geometry",e.Material="material",e.Scale="scale",e.Axis="axis",e))(ro||{});class no{constructor({xml:e}){this.dimension=null,this.type=to.BOX;const t=e.getAttribute(ro.Size)?.split(" ");t?.[0]&&t[1]&&t[2]&&(this.dimension=new qs({x:parseFloat(t[0]),y:parseFloat(t[1]),z:parseFloat(t[2])}))}}class io{constructor({xml:e}){this.r=0,this.g=0,this.b=0,this.a=1;const t=e.getAttribute(ro.Rgba)?.split(" ");t?.[0]&&t[1]&&t[2]&&t[3]&&(this.r=parseFloat(t[0]),this.g=parseFloat(t[1]),this.b=parseFloat(t[2]),this.a=parseFloat(t[3]))}}class so{constructor({xml:e}){this.type=to.CYLINDER,this.length=parseFloat(e.getAttribute(ro.Length)??"NaN"),this.radius=parseFloat(e.getAttribute(ro.Radius)??"NaN")}}class oo{constructor({xml:e}){this.textureFilename=null,this.color=null,this.name=e.getAttribute(ro.Name)??"unknown_name";const t=e.getElementsByTagName(ro.Texture);t[0]&&(this.textureFilename=t[0].getAttribute(ro.Filename));const r=e.getElementsByTagName(ro.Color);r[0]&&(this.color=new io({xml:r[0]}))}isLink(){return null===this.color&&null===this.textureFilename}assign(e){return Object.assign(this,e)}}class ao{constructor({xml:e}){this.scale=null,this.type=to.MESH,this.filename=e.getAttribute(ro.Filename);const t=e.getAttribute(ro.Scale)?.split(" ");t?.[0]&&t[1]&&t[2]&&(this.scale=new qs({x:parseFloat(t[0]),y:parseFloat(t[1]),z:parseFloat(t[2])}))}}class co{constructor({xml:e}){this.radius=NaN,this.type=to.SPHERE,this.radius=parseFloat(e.getAttribute(ro.Radius)??"NaN")}}function lo(e){const t=e.getAttribute(ro.Xyz)?.split(" ");let r=new qs;t?.[0]&&t[1]&&t[2]&&(r=new qs({x:parseFloat(t[0]),y:parseFloat(t[1]),z:parseFloat(t[2])}));const n=e.getAttribute(ro.Rpy)?.split(" ");let i=new js;if(n?.[0]&&n[1]&&n[2]){const e=parseFloat(n[0])/2,t=parseFloat(n[1])/2,r=parseFloat(n[2])/2,s=Math.sin(e)*Math.cos(t)*Math.cos(r)-Math.cos(e)*Math.sin(t)*Math.sin(r),o=Math.cos(e)*Math.sin(t)*Math.cos(r)+Math.sin(e)*Math.cos(t)*Math.sin(r),a=Math.cos(e)*Math.cos(t)*Math.sin(r)-Math.sin(e)*Math.sin(t)*Math.cos(r),c=Math.cos(e)*Math.cos(t)*Math.cos(r)+Math.sin(e)*Math.sin(t)*Math.sin(r);i=new js({x:s,y:o,z:a,w:c}),i.normalize()}return new eo({position:r,orientation:i})}function ho(e){return 1===e.nodeType}class uo{constructor({xml:e}){this.origin=new eo,this.geometry=null,this.material=null,this.name=e.getAttribute(ro.Name);const t=e.getElementsByTagName(ro.Origin);t[0]&&(this.origin=lo(t[0]));const r=e.getElementsByTagName(ro.Geometry);r[0]&&(this.geometry=function(e){let t=null;for(const r of e.childNodes)if(ho(r)){t=r;break}if(!t)return null;const r={xml:t};switch(t.nodeName){case"sphere":return new co(r);case"box":return new no(r);case"cylinder":return new so(r);case"mesh":return new ao(r);default:return console.warn(`Unknown geometry type ${t.nodeName}`),null}}(r[0]));const n=e.getElementsByTagName(ro.Material);n[0]&&(this.material=new oo({xml:n[0]}))}}class fo{constructor({xml:e}){this.visuals=[],this.name=e.getAttribute(ro.Name)??"unknown_name";const t=e.getElementsByTagName(ro.Visuals);for(const e of t)this.visuals.push(new uo({xml:e}))}}var po,go={},mo={};function bo(){if(po)return mo;function e(e,t){return void 0===t&&(t=Object),t&&"function"==typeof t.getOwnPropertyDescriptors&&(e=t.create(null,t.getOwnPropertyDescriptors(e))),t&&"function"==typeof t.freeze?t.freeze(e):e}function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}po=1;var r=e({allowfullscreen:!0,async:!0,autofocus:!0,autoplay:!0,checked:!0,controls:!0,default:!0,defer:!0,disabled:!0,formnovalidate:!0,hidden:!0,ismap:!0,itemscope:!0,loop:!0,multiple:!0,muted:!0,nomodule:!0,novalidate:!0,open:!0,playsinline:!0,readonly:!0,required:!0,reversed:!0,selected:!0});var n=e({area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});var i=e({script:!1,style:!1,textarea:!0,title:!0});function s(e){return e===o.HTML}var o=e({HTML:"text/html",XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),a=Object.keys(o).map((function(e){return o[e]}));var c=e({HTML:"http://www.w3.org/1999/xhtml",SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return mo.assign=function(e,r){if(null===e||"object"!=typeof e)throw new TypeError("target is not an object");for(var n in r)t(r,n)&&(e[n]=r[n]);return e},mo.find=function(e,r,n){if(void 0===n&&(n=Array.prototype),e&&"function"==typeof n.find)return n.find.call(e,r);for(var i=0;i<e.length;i++)if(t(e,i)){var s=e[i];if(r.call(void 0,s,i,e))return s}},mo.freeze=e,mo.HTML_BOOLEAN_ATTRIBUTES=r,mo.HTML_RAW_TEXT_ELEMENTS=i,mo.HTML_VOID_ELEMENTS=n,mo.hasDefaultHTMLNamespace=function(e){return s(e)||e===o.XML_XHTML_APPLICATION},mo.hasOwn=t,mo.isHTMLBooleanAttribute=function(e){return t(r,e.toLowerCase())},mo.isHTMLRawTextElement=function(e){var r=e.toLowerCase();return t(i,r)&&!i[r]},mo.isHTMLEscapableRawTextElement=function(e){var r=e.toLowerCase();return t(i,r)&&i[r]},mo.isHTMLMimeType=s,mo.isHTMLVoidElement=function(e){return t(n,e.toLowerCase())},mo.isValidMimeType=function(e){return a.indexOf(e)>-1},mo.MIME_TYPE=o,mo.NAMESPACE=c,mo}var wo,yo={};function Eo(){if(wo)return yo;function e(e,t){e.prototype=Object.create(Error.prototype,{constructor:{value:e},name:{value:e.name,enumerable:!0,writable:t}})}wo=1;var t=bo().freeze({Error:"Error",IndexSizeError:"IndexSizeError",DomstringSizeError:"DomstringSizeError",HierarchyRequestError:"HierarchyRequestError",WrongDocumentError:"WrongDocumentError",InvalidCharacterError:"InvalidCharacterError",NoDataAllowedError:"NoDataAllowedError",NoModificationAllowedError:"NoModificationAllowedError",NotFoundError:"NotFoundError",NotSupportedError:"NotSupportedError",InUseAttributeError:"InUseAttributeError",InvalidStateError:"InvalidStateError",SyntaxError:"SyntaxError",InvalidModificationError:"InvalidModificationError",NamespaceError:"NamespaceError",InvalidAccessError:"InvalidAccessError",ValidationError:"ValidationError",TypeMismatchError:"TypeMismatchError",SecurityError:"SecurityError",NetworkError:"NetworkError",AbortError:"AbortError",URLMismatchError:"URLMismatchError",QuotaExceededError:"QuotaExceededError",TimeoutError:"TimeoutError",InvalidNodeTypeError:"InvalidNodeTypeError",DataCloneError:"DataCloneError",EncodingError:"EncodingError",NotReadableError:"NotReadableError",UnknownError:"UnknownError",ConstraintError:"ConstraintError",DataError:"DataError",TransactionInactiveError:"TransactionInactiveError",ReadOnlyError:"ReadOnlyError",VersionError:"VersionError",OperationError:"OperationError",NotAllowedError:"NotAllowedError",OptOutError:"OptOutError"}),r=Object.keys(t);function n(e){return"number"==typeof e&&e>=1&&e<=25}function i(e,s){n(e)?(this.name=r[e],this.message=s||""):(this.message=e,this.name=function(e){return"string"==typeof e&&e.substring(e.length-t.Error.length)===t.Error}(s)?s:t.Error),Error.captureStackTrace&&Error.captureStackTrace(this,i)}e(i,!0),Object.defineProperties(i.prototype,{code:{enumerable:!0,get:function(){var e=r.indexOf(this.name);return n(e)?e:0}}});for(var s={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25},o=Object.entries(s),a=0;a<o.length;a++){i[o[a][0]]=o[a][1]}function c(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,c)}return e(c),yo.DOMException=i,yo.DOMExceptionName=t,yo.ExceptionCode=s,yo.ParseError=c,yo}var No,To,vo={},So={};function _o(){if(No)return So;function e(e){try{"function"!=typeof e&&(e=RegExp);var t=new e("","u").exec("");return!!t&&2===t[0].length}catch{}return!1}No=1;var t=e();function r(e){if("["!==e.source[0])throw new Error(e+" can not be used with chars");return e.source.slice(1,e.source.lastIndexOf("]"))}function n(e,r){if("["!==e.source[0])throw new Error("/"+e.source+"/ can not be used with chars_without");if(!r||"string"!=typeof r)throw new Error(JSON.stringify(r)+" is not a valid search");if(-1===e.source.indexOf(r))throw new Error('"'+r+'" is not is /'+e.source+"/");if("-"===r&&1!==e.source.indexOf(r))throw new Error('"'+r+'" is not at the first postion of /'+e.source+"/");return new RegExp(e.source.replace(r,""),t?"u":"")}function i(e){var r=this;return new RegExp(Array.prototype.slice.call(arguments).map((function(e){var t="string"==typeof e;if(t&&void 0===r&&"|"===e)throw new Error("use regg instead of reg to wrap expressions with `|`!");return t?e:e.source})).join(""),t?"mu":"m")}function s(e){if(0===arguments.length)throw new Error("no parameters provided");return i.apply(s,["(?:"].concat(Array.prototype.slice.call(arguments),[")"]))}var o=/[-\x09\x0A\x0D\x20-\x2C\x2E-\uD7FF\uE000-\uFFFD]/;t&&(o=i("[",r(o),"\\u{10000}-\\u{10FFFF}","]"));var a=/[\x20\x09\x0D\x0A]/,c=r(a),l=i(a,"+"),h=i(a,"*"),u=/[:_a-zA-Z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;t&&(u=i("[",r(u),"\\u{10000}-\\u{10FFFF}","]"));var f=i("[",r(u),r(/[-.0-9\xB7]/),r(/[\u0300-\u036F\u203F-\u2040]/),"]"),d=i(u,f,"*"),p=i(f,"+"),g=i("&",d,";"),m=s(/&#[0-9]+;|&#x[0-9a-fA-F]+;/),b=s(g,"|",m),w=i("%",d,";"),y=s(i('"',s(/[^%&"]/,"|",w,"|",b),"*",'"'),"|",i("'",s(/[^%&']/,"|",w,"|",b),"*","'")),E=s('"',s(/[^<&"]/,"|",b),"*",'"',"|","'",s(/[^<&']/,"|",b),"*","'"),N=i(n(u,":"),n(f,":"),"*"),T=i(N,s(":",N),"?"),v=i("^",T,"$"),S=i("(",T,")"),_=s(/"[^"]*"|'[^']*'/),A=i(/^<\?/,"(",d,")",s(l,"(",o,"*?)"),"?",/\?>/),O=/[\x20\x0D\x0Aa-zA-Z0-9-'()+,./:=?;!*#@$_%]/,I=s('"',O,'*"',"|","'",n(O,"'"),"*'"),x="\x3c!--",D=i(x,s(n(o,"-"),"|",i("-",n(o,"-"))),"*","--\x3e"),U="#PCDATA",R=s(i(/\(/,h,U,s(h,/\|/,h,T),"*",h,/\)\*/),"|",i(/\(/,h,U,h,/\)/)),L=s("EMPTY","|","ANY","|",R,"|",i(/\([^>]+\)/,/[?*+]?/)),C=i("<!ELEMENT",l,s(T,"|",w),l,s(L,"|",w),h,">"),M=i("NOTATION",l,/\(/,h,d,s(h,/\|/,h,d),"*",h,/\)/),B=i(/\(/,h,p,s(h,/\|/,h,p),"*",h,/\)/),k=s(M,"|",B),$=s(/CDATA|ID|IDREF|IDREFS|ENTITY|ENTITIES|NMTOKEN|NMTOKENS/,"|",k),P=s(/#REQUIRED|#IMPLIED/,"|",s(s("#FIXED",l),"?",E)),F=i("<!ATTLIST",l,d,s(l,d,l,$,l,P),"*",h,">"),q="about:legacy-compat",j=s('"'+q+'"',"|","'"+q+"'"),G="SYSTEM",H="PUBLIC",V=s(s(G,l,_),"|",s(H,l,I,l,_)),z=i("^",s(s(G,l,"(?<SystemLiteralOnly>",_,")"),"|",s(H,l,"(?<PubidLiteral>",I,")",l,"(?<SystemLiteral>",_,")"))),Y=s(l,"NDATA",l,d),W="<!ENTITY",J=i(W,l,d,l,s(y,"|",s(V,Y,"?")),h,">"),X=s(y,"|",V),K=s(J,"|",i(W,l,"%",l,d,l,X,h,">")),Z=i(H,l,I),Q=i("<!NOTATION",l,d,l,s(V,"|",Z),h,">"),ee=i(h,"=",h),te=/1[.]\d+/,re=i(l,"version",ee,s("'",te,"'","|",'"',te,'"')),ne=/[A-Za-z][-A-Za-z0-9._]*/,ie=i(/^<\?xml/,re,s(l,"encoding",ee,s('"',ne,'"',"|","'",ne,"'")),"?",s(l,"standalone",ee,s("'",s("yes","|","no"),"'","|",'"',s("yes","|","no"),'"')),"?",h,/\?>/),se=i(o,"*?",/\]\]>/),oe=i(/<!\[CDATA\[/,se);return So.chars=r,So.chars_without=n,So.detectUnicodeSupport=e,So.reg=i,So.regg=s,So.ABOUT_LEGACY_COMPAT=q,So.ABOUT_LEGACY_COMPAT_SystemLiteral=j,So.AttlistDecl=F,So.CDATA_START="<![CDATA[",So.CDATA_END="]]>",So.CDSect=oe,So.Char=o,So.Comment=D,So.COMMENT_START=x,So.COMMENT_END="--\x3e",So.DOCTYPE_DECL_START="<!DOCTYPE",So.elementdecl=C,So.EntityDecl=K,So.EntityValue=y,So.ExternalID=V,So.ExternalID_match=z,So.Name=d,So.NotationDecl=Q,So.Reference=b,So.PEReference=w,So.PI=A,So.PUBLIC=H,So.PubidLiteral=I,So.QName=T,So.QName_exact=v,So.QName_group=S,So.S=l,So.SChar_s=c,So.S_OPT=h,So.SYSTEM=G,So.SystemLiteral=_,So.UNICODE_REPLACEMENT_CHARACTER="",So.UNICODE_SUPPORT=t,So.XMLDecl=ie,So}function Ao(){if(To)return vo;To=1;var e=bo(),t=e.find,r=e.hasDefaultHTMLNamespace,n=e.hasOwn,i=e.isHTMLMimeType,s=e.isHTMLRawTextElement,o=e.isHTMLVoidElement,a=e.MIME_TYPE,c=e.NAMESPACE,l=Symbol(),h=Eo(),u=h.DOMException,f=h.DOMExceptionName,d=_o();function p(e){if(e!==l)throw new TypeError("Illegal constructor")}function g(e){return""!==e}function m(e,t){return n(e,t)||(e[t]=!0),e}function b(e){if(!e)return[];var t=function(e){return e?e.split(/[\t\n\f\r ]+/).filter(g):[]}(e);return Object.keys(t.reduce(m,{}))}function w(e){if(!d.QName_exact.test(e))throw new u(u.INVALID_CHARACTER_ERR,'invalid character in qualified name "'+e+'"')}function y(t,r){w(r),t=t||null;var n=null,i=r;if(r.indexOf(":")>=0){var s=r.split(":");n=s[0],i=s[1]}if(null!==n&&null===t)throw new u(u.NAMESPACE_ERR,"prefix is non-null and namespace is null");if("xml"===n&&t!==e.NAMESPACE.XML)throw new u(u.NAMESPACE_ERR,'prefix is "xml" and namespace is not the XML namespace');if(("xmlns"===n||"xmlns"===r)&&t!==e.NAMESPACE.XMLNS)throw new u(u.NAMESPACE_ERR,'either qualifiedName or prefix is "xmlns" and namespace is not the XMLNS namespace');if(t===e.NAMESPACE.XMLNS&&"xmlns"!==n&&"xmlns"!==r)throw new u(u.NAMESPACE_ERR,'namespace is the XMLNS namespace and neither qualifiedName nor prefix is "xmlns"');return[t,n,i]}function E(e,t){for(var r in e)n(e,r)&&(t[r]=e[r])}function N(e,t){var r=e.prototype;if(!(r instanceof t)){let n=function(){};n.prototype=t.prototype,n=new n,E(r,n),e.prototype=r=n}r.constructor!=e&&("function"!=typeof e&&console.error("unknown Class:"+e),r.constructor=e)}var T={},v=T.ELEMENT_NODE=1,S=T.ATTRIBUTE_NODE=2,_=T.TEXT_NODE=3,A=T.CDATA_SECTION_NODE=4,O=T.ENTITY_REFERENCE_NODE=5,I=T.ENTITY_NODE=6,x=T.PROCESSING_INSTRUCTION_NODE=7,D=T.COMMENT_NODE=8,U=T.DOCUMENT_NODE=9,R=T.DOCUMENT_TYPE_NODE=10,L=T.DOCUMENT_FRAGMENT_NODE=11,C=T.NOTATION_NODE=12,M=e.freeze({DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32});function B(e,t){if(t.length<e.length)return B(t,e);var r=null;for(var n in e){if(e[n]!==t[n])return r;r=e[n]}return r}function k(e){return e.guid||(e.guid=Math.random()),e.guid}function $(){}function P(e,t){this._node=e,this._refresh=t,F(this)}function F(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!==t){var r=e._refresh(e._node);if(Oe(e,"length",r.length),!e.$$length||r.length<e.$$length)for(var i=r.length;i in e;i++)n(e,i)&&delete e[i];E(r,e),e._inc=t}}function q(){}function j(e,t){for(var r=0;r<e.length;){if(e[r]===t)return r;r++}}function G(e,t,r,n){if(n?t[j(t,n)]=r:(t[t.length]=r,t.length++),e){r.ownerElement=e;var i=e.ownerDocument;i&&(n&&X(i,e,n),function(e,t,r){e&&e._inc++;var n=r.namespaceURI;n===c.XMLNS&&(t._nsMap[r.prefix?r.localName:""]=r.value)}(i,e,r))}}function H(e,t,r){var n=j(t,r);if(n>=0){for(var i=t.length-1;n<=i;)t[n]=t[++n];if(t.length=i,e){var s=e.ownerDocument;s&&X(s,e,r),r.ownerElement=null}}}function V(){}function z(e){p(e)}function Y(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function W(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(W(e,t))return!0}while(e=e.nextSibling)}function J(e,t){p(e);var r=t||{};this.ownerDocument=this,this.contentType=r.contentType||a.XML_APPLICATION,this.type=i(this.contentType)?"html":"xml"}function X(e,t,r,n){e&&e._inc++,r.namespaceURI===c.XMLNS&&delete t._nsMap[r.prefix?r.localName:""]}function K(e,t,r){if(e&&e._inc){e._inc++;var n=t.childNodes;if(r&&!r.nextSibling)n[n.length++]=r;else{for(var i=t.firstChild,s=0;i;)n[s++]=i,i=i.nextSibling;n.length=s,delete n[n.length]}}}function Z(e,t){if(e!==t.parentNode)throw new u(u.NOT_FOUND_ERR,"child's parent is not parent");var r=t.previousSibling,n=t.nextSibling;return r?r.nextSibling=n:e.firstChild=n,n?n.previousSibling=r:e.lastChild=r,K(e.ownerDocument,e),t.parentNode=null,t.previousSibling=null,t.nextSibling=null,t}function Q(e){return e&&e.nodeType===z.DOCUMENT_TYPE_NODE}function ee(e){return e&&e.nodeType===z.ELEMENT_NODE}function te(e){return e&&e.nodeType===z.TEXT_NODE}function re(e,r){var n=e.childNodes||[];if(t(n,ee)||Q(r))return!1;var i=t(n,Q);return!(r&&i&&n.indexOf(i)>n.indexOf(r))}function ne(e,r){var n=e.childNodes||[];if(t(n,(function(e){return ee(e)&&e!==r})))return!1;var i=t(n,Q);return!(r&&i&&n.indexOf(i)>n.indexOf(r))}function ie(e,t,r){if(!function(e){return e&&(e.nodeType===z.DOCUMENT_NODE||e.nodeType===z.DOCUMENT_FRAGMENT_NODE||e.nodeType===z.ELEMENT_NODE)}(e))throw new u(u.HIERARCHY_REQUEST_ERR,"Unexpected parent node type "+e.nodeType);if(r&&r.parentNode!==e)throw new u(u.NOT_FOUND_ERR,"child not in parent");if(!function(e){return e&&(e.nodeType===z.CDATA_SECTION_NODE||e.nodeType===z.COMMENT_NODE||e.nodeType===z.DOCUMENT_FRAGMENT_NODE||e.nodeType===z.DOCUMENT_TYPE_NODE||e.nodeType===z.ELEMENT_NODE||e.nodeType===z.PROCESSING_INSTRUCTION_NODE||e.nodeType===z.TEXT_NODE)}(t)||Q(t)&&e.nodeType!==z.DOCUMENT_NODE)throw new u(u.HIERARCHY_REQUEST_ERR,"Unexpected node type "+t.nodeType+" for parent node type "+e.nodeType)}function se(e,r,n){var i=e.childNodes||[],s=r.childNodes||[];if(r.nodeType===z.DOCUMENT_FRAGMENT_NODE){var o=s.filter(ee);if(o.length>1||t(s,te))throw new u(u.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(1===o.length&&!re(e,n))throw new u(u.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(ee(r)&&!re(e,n))throw new u(u.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(Q(r)){if(t(i,Q))throw new u(u.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var a=t(i,ee);if(n&&i.indexOf(a)<i.indexOf(n))throw new u(u.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");if(!n&&a)throw new u(u.HIERARCHY_REQUEST_ERR,"Doctype can not be appended since element is present")}}function oe(e,r,n){var i=e.childNodes||[],s=r.childNodes||[];if(r.nodeType===z.DOCUMENT_FRAGMENT_NODE){var o=s.filter(ee);if(o.length>1||t(s,te))throw new u(u.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(1===o.length&&!ne(e,n))throw new u(u.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(ee(r)&&!ne(e,n))throw new u(u.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(Q(r)){if(t(i,(function(e){return Q(e)&&e!==n})))throw new u(u.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var a=t(i,ee);if(n&&i.indexOf(a)<i.indexOf(n))throw new u(u.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element")}}function ae(e,t,r,n){ie(e,t,r),e.nodeType===z.DOCUMENT_NODE&&(n||se)(e,t,r);var i=t.parentNode;if(i&&i.removeChild(t),t.nodeType===L){var s=t.firstChild;if(null==s)return t;var o=t.lastChild}else s=o=t;var a=r?r.previousSibling:e.lastChild;s.previousSibling=a,o.nextSibling=r,a?a.nextSibling=s:e.firstChild=s,null==r?e.lastChild=o:r.previousSibling=o;do{s.parentNode=e}while(s!==o&&(s=s.nextSibling));return K(e.ownerDocument||e,e,t),t.nodeType==L&&(t.firstChild=t.lastChild=null),t}function ce(e){p(e),this._nsMap=Object.create(null)}function le(e){p(e),this.namespaceURI=null,this.prefix=null,this.ownerElement=null}function he(e){p(e)}function ue(e){p(e)}function fe(e){p(e)}function de(e){p(e)}function pe(e){p(e)}function ge(e){p(e)}function me(e){p(e)}function be(e){p(e)}function we(e){p(e)}function ye(e){p(e)}function Ee(){}function Ne(e){var t=[],r=this.nodeType===U&&this.documentElement||this,n=r.prefix,i=r.namespaceURI;if(i&&null==n&&null==(n=r.lookupPrefix(i)))var s=[{namespace:i,prefix:null}];return Se(this,t,e,s),t.join("")}function Te(e,t,r){var n=e.prefix||"",i=e.namespaceURI;if(!i||"xml"===n&&i===c.XML||i===c.XMLNS)return!1;for(var s=r.length;s--;){var o=r[s];if(o.prefix===n)return o.namespace!==i}return!0}function ve(e,t,r){e.push(" ",t,'="',r.replace(/[<>&"\t\n\r]/g,Y),'"')}function Se(e,t,r,n){n||(n=[]);var i="html"===(e.nodeType===U?e:e.ownerDocument).type;if(r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case v:var a=e.attributes,l=a.length,h=e.firstChild,u=e.tagName,f=u;if(!i&&!e.prefix&&e.namespaceURI){for(var p,g=0;g<a.length;g++)if("xmlns"===a.item(g).name){p=a.item(g).value;break}if(!p)for(var m=n.length-1;m>=0;m--){if(""===(b=n[m]).prefix&&b.namespace===e.namespaceURI){p=b.namespace;break}}if(p!==e.namespaceURI)for(m=n.length-1;m>=0;m--){var b;if((b=n[m]).namespace===e.namespaceURI){b.prefix&&(f=b.prefix+":"+u);break}}}t.push("<",f);for(var w=0;w<l;w++){"xmlns"==(y=a.item(w)).prefix?n.push({prefix:y.localName,namespace:y.value}):"xmlns"==y.nodeName&&n.push({prefix:"",namespace:y.value})}for(w=0;w<l;w++){var y,E,N;if(Te(y=a.item(w),0,n))ve(t,(E=y.prefix||"")?"xmlns:"+E:"xmlns",N=y.namespaceURI),n.push({prefix:E,namespace:N});Se(y,t,r,n)}if(u===f&&Te(e,0,n))ve(t,(E=e.prefix||"")?"xmlns:"+E:"xmlns",N=e.namespaceURI),n.push({prefix:E,namespace:N});var T=!h;if(T&&(i||e.namespaceURI===c.HTML)&&(T=o(u)),T)t.push("/>");else{if(t.push(">"),i&&s(u))for(;h;)h.data?t.push(h.data):Se(h,t,r,n.slice()),h=h.nextSibling;else for(;h;)Se(h,t,r,n.slice()),h=h.nextSibling;t.push("</",f,">")}return;case U:case L:for(h=e.firstChild;h;)Se(h,t,r,n.slice()),h=h.nextSibling;return;case S:return ve(t,e.name,e.value);case _:return t.push(e.data.replace(/[<&>]/g,Y));case A:return t.push(d.CDATA_START,e.data,d.CDATA_END);case D:return t.push(d.COMMENT_START,e.data,d.COMMENT_END);case R:var I=e.publicId,C=e.systemId;return t.push(d.DOCTYPE_DECL_START," ",e.name),I?(t.push(" ",d.PUBLIC," ",I),C&&"."!==C&&t.push(" ",C)):C&&"."!==C&&t.push(" ",d.SYSTEM," ",C),e.internalSubset&&t.push(" [",e.internalSubset,"]"),void t.push(">");case x:return t.push("<?",e.target," ",e.data,"?>");case O:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function _e(e,t,r){var n;switch(t.nodeType){case v:(n=t.cloneNode(!1)).ownerDocument=e;case L:break;case S:r=!0}if(n||(n=t.cloneNode(!1)),n.ownerDocument=e,n.parentNode=null,r)for(var i=t.firstChild;i;)n.appendChild(_e(e,i,r)),i=i.nextSibling;return n}function Ae(e,t,r){var i=new t.constructor(l);for(var s in t)if(n(t,s)){var o=t[s];"object"!=typeof o&&o!=i[s]&&(i[s]=o)}switch(t.childNodes&&(i.childNodes=new $),i.ownerDocument=e,i.nodeType){case v:var a=t.attributes,c=i.attributes=new q,h=a.length;c._ownerElement=i;for(var u=0;u<h;u++)i.setAttributeNode(Ae(e,a.item(u),!0));break;case S:r=!0}if(r)for(var f=t.firstChild;f;)i.appendChild(Ae(e,f,r)),f=f.nextSibling;return i}function Oe(e,t,r){e[t]=r}$.prototype={length:0,item:function(e){return e>=0&&e<this.length?this[e]:null},toString:function(e){for(var t=[],r=0;r<this.length;r++)Se(this[r],t,e);return t.join("")},filter:function(e){return Array.prototype.filter.call(this,e)},indexOf:function(e){return Array.prototype.indexOf.call(this,e)}},$.prototype[Symbol.iterator]=function(){var e=this,t=0;return{next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0}},return:function(){return{done:!0}}}},P.prototype.item=function(e){return F(this),this[e]||null},N(P,$),q.prototype={length:0,item:$.prototype.item,getNamedItem:function(e){this._ownerElement&&this._ownerElement._isInHTMLDocumentAndNamespace()&&(e=e.toLowerCase());for(var t=0;t<this.length;){var r=this[t];if(r.nodeName===e)return r;t++}return null},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!==this._ownerElement)throw new u(u.INUSE_ATTRIBUTE_ERR);var r=this.getNamedItemNS(e.namespaceURI,e.localName);return r===e?e:(G(this._ownerElement,this,e,r),r)},setNamedItemNS:function(e){return this.setNamedItem(e)},removeNamedItem:function(e){var t=this.getNamedItem(e);if(!t)throw new u(u.NOT_FOUND_ERR,e);return H(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var r=this.getNamedItemNS(e,t);if(!r)throw new u(u.NOT_FOUND_ERR,e?e+" : "+t:t);return H(this._ownerElement,this,r),r},getNamedItemNS:function(e,t){e||(e=null);for(var r=0;r<this.length;){var n=this[r];if(n.localName===t&&n.namespaceURI===e)return n;r++}return null}},q.prototype[Symbol.iterator]=function(){var e=this,t=0;return{next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0}},return:function(){return{done:!0}}}},V.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,r){var n=a.XML_APPLICATION;e===c.HTML?n=a.XML_XHTML_APPLICATION:e===c.SVG&&(n=a.XML_SVG_IMAGE);var i=new J(l,{contentType:n});if(i.implementation=this,i.childNodes=new $,i.doctype=r||null,r&&i.appendChild(r),t){var s=i.createElementNS(e,t);i.appendChild(s)}return i},createDocumentType:function(e,t,r,n){w(e);var i=new pe(l);return i.name=e,i.nodeName=e,i.publicId=t||"",i.systemId=r||"",i.internalSubset=n||"",i.childNodes=new $,i},createHTMLDocument:function(e){var t=new J(l,{contentType:a.HTML});if(t.implementation=this,t.childNodes=new $,!1!==e){t.doctype=this.createDocumentType("html"),t.doctype.ownerDocument=t,t.appendChild(t.doctype);var r=t.createElement("html");t.appendChild(r);var n=t.createElement("head");if(r.appendChild(n),"string"==typeof e){var i=t.createElement("title");i.appendChild(t.createTextNode(e)),n.appendChild(i)}r.appendChild(t.createElement("body"))}return t}},z.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,parentNode:null,get parentElement(){return this.parentNode&&this.parentNode.nodeType===this.ELEMENT_NODE?this.parentNode:null},childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,baseURI:"about:blank",get isConnected(){var e=this.getRootNode();return e&&e.nodeType===e.DOCUMENT_NODE},contains:function(e){if(!e)return!1;var t=e;do{if(this===t)return!0;t=e.parentNode}while(t);return!1},getRootNode:function(e){var t=this;do{if(!t.parentNode)return t;t=t.parentNode}while(t)},isEqualNode:function(e){if(!e||this.nodeType!==e.nodeType)return!1;switch(this.nodeType){case this.DOCUMENT_TYPE_NODE:if(this.name!==e.name||this.publicId!==e.publicId||this.systemId!==e.systemId)return!1;break;case this.ELEMENT_NODE:if(this.namespaceURI!==e.namespaceURI||this.prefix!==e.prefix||this.localName!==e.localName||this.attributes.length!==e.attributes.length)return!1;for(var t=0;t<this.attributes.length;t++){var r=this.attributes.item(t);if(!r.isEqualNode(e.getAttributeNodeNS(r.namespaceURI,r.localName)))return!1}break;case this.ATTRIBUTE_NODE:if(this.namespaceURI!==e.namespaceURI||this.localName!==e.localName||this.value!==e.value)return!1;break;case this.PROCESSING_INSTRUCTION_NODE:if(this.target!==e.target||this.data!==e.data)return!1;break;case this.TEXT_NODE:case this.COMMENT_NODE:if(this.data!==e.data)return!1}if(this.childNodes.length!==e.childNodes.length)return!1;for(t=0;t<this.childNodes.length;t++)if(!this.childNodes[t].isEqualNode(e.childNodes[t]))return!1;return!0},isSameNode:function(e){return this===e},insertBefore:function(e,t){return ae(this,e,t)},replaceChild:function(e,t){ae(this,e,t,oe),t&&this.removeChild(t)},removeChild:function(e){return Z(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return Ae(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==_&&e.nodeType==_?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},lookupPrefix:function(e){for(var t=this;t;){var r=t._nsMap;if(r)for(var i in r)if(n(r,i)&&r[i]===e)return i;t=t.nodeType==S?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var r=t._nsMap;if(r&&n(r,e))return r[e];t=t.nodeType==S?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)},compareDocumentPosition:function(e){if(this===e)return 0;var t=e,r=this,n=null,i=null;if(t instanceof le&&(t=(n=t).ownerElement),r instanceof le&&(r=(i=r).ownerElement,n&&t&&r===t))for(var s,o=0;s=r.attributes[o];o++){if(s===n)return M.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+M.DOCUMENT_POSITION_PRECEDING;if(s===i)return M.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+M.DOCUMENT_POSITION_FOLLOWING}if(!t||!r||r.ownerDocument!==t.ownerDocument)return M.DOCUMENT_POSITION_DISCONNECTED+M.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+(k(r.ownerDocument)>k(t.ownerDocument)?M.DOCUMENT_POSITION_FOLLOWING:M.DOCUMENT_POSITION_PRECEDING);if(i&&t===r)return M.DOCUMENT_POSITION_CONTAINS+M.DOCUMENT_POSITION_PRECEDING;if(n&&t===r)return M.DOCUMENT_POSITION_CONTAINED_BY+M.DOCUMENT_POSITION_FOLLOWING;for(var a=[],c=t.parentNode;c;){if(!i&&c===r)return M.DOCUMENT_POSITION_CONTAINED_BY+M.DOCUMENT_POSITION_FOLLOWING;a.push(c),c=c.parentNode}a.reverse();for(var l=[],h=r.parentNode;h;){if(!n&&h===t)return M.DOCUMENT_POSITION_CONTAINS+M.DOCUMENT_POSITION_PRECEDING;l.push(h),h=h.parentNode}l.reverse();var u=B(a,l);for(var f in u.childNodes){var d=u.childNodes[f];if(d===r)return M.DOCUMENT_POSITION_FOLLOWING;if(d===t)return M.DOCUMENT_POSITION_PRECEDING;if(l.indexOf(d)>=0)return M.DOCUMENT_POSITION_FOLLOWING;if(a.indexOf(d)>=0)return M.DOCUMENT_POSITION_PRECEDING}return 0}},E(T,z),E(T,z.prototype),E(M,z),E(M,z.prototype),J.prototype={implementation:null,nodeName:"#document",nodeType:U,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType===L){for(var r=e.firstChild;r;){var n=r.nextSibling;this.insertBefore(r,t),r=n}return e}return ae(this,e,t),e.ownerDocument=this,null===this.documentElement&&e.nodeType===v&&(this.documentElement=e),e},removeChild:function(e){var t=Z(this,e);return t===this.documentElement&&(this.documentElement=null),t},replaceChild:function(e,t){ae(this,e,t,oe),e.ownerDocument=this,t&&this.removeChild(t),ee(e)&&(this.documentElement=e)},importNode:function(e,t){return _e(this,e,t)},getElementById:function(e){var t=null;return W(this.documentElement,(function(r){if(r.nodeType==v&&r.getAttribute("id")==e)return t=r,!0})),t},createElement:function(e){var t=new ce(l);return t.ownerDocument=this,"html"===this.type&&(e=e.toLowerCase()),r(this.contentType)&&(t.namespaceURI=c.HTML),t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new $,(t.attributes=new q)._ownerElement=t,t},createDocumentFragment:function(){var e=new we(l);return e.ownerDocument=this,e.childNodes=new $,e},createTextNode:function(e){var t=new ue(l);return t.ownerDocument=this,t.childNodes=new $,t.appendData(e),t},createComment:function(e){var t=new fe(l);return t.ownerDocument=this,t.childNodes=new $,t.appendData(e),t},createCDATASection:function(e){var t=new de(l);return t.ownerDocument=this,t.childNodes=new $,t.appendData(e),t},createProcessingInstruction:function(e,t){var r=new ye(l);return r.ownerDocument=this,r.childNodes=new $,r.nodeName=r.target=e,r.nodeValue=r.data=t,r},createAttribute:function(e){if(!d.QName_exact.test(e))throw new u(u.INVALID_CHARACTER_ERR,'invalid character in name "'+e+'"');return"html"===this.type&&(e=e.toLowerCase()),this._createAttribute(e)},_createAttribute:function(e){var t=new le(l);return t.ownerDocument=this,t.childNodes=new $,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){if(!d.Name.test(e))throw new u(u.INVALID_CHARACTER_ERR,'not a valid xml name "'+e+'"');if("html"===this.type)throw new u("document is an html document",f.NotSupportedError);var t=new be(l);return t.ownerDocument=this,t.childNodes=new $,t.nodeName=e,t},createElementNS:function(e,t){var r=y(e,t),n=new ce(l),i=n.attributes=new q;return n.childNodes=new $,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=r[0],n.prefix=r[1],n.localName=r[2],i._ownerElement=n,n},createAttributeNS:function(e,t){var r=y(e,t),n=new le(l);return n.ownerDocument=this,n.childNodes=new $,n.nodeName=t,n.name=t,n.specified=!0,n.namespaceURI=r[0],n.prefix=r[1],n.localName=r[2],n}},N(J,z),ce.prototype={nodeType:v,attributes:null,getQualifiedName:function(){return this.prefix?this.prefix+":"+this.localName:this.localName},_isInHTMLDocumentAndNamespace:function(){return"html"===this.ownerDocument.type&&this.namespaceURI===c.HTML},hasAttributes:function(){return!(!this.attributes||!this.attributes.length)},hasAttribute:function(e){return!!this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t?t.value:null},getAttributeNode:function(e){return this._isInHTMLDocumentAndNamespace()&&(e=e.toLowerCase()),this.attributes.getNamedItem(e)},setAttribute:function(e,t){this._isInHTMLDocumentAndNamespace()&&(e=e.toLowerCase());var r=this.getAttributeNode(e);r?r.value=r.nodeValue=""+t:((r=this.ownerDocument._createAttribute(e)).value=r.nodeValue=""+t,this.setAttributeNode(r))},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);r&&this.removeAttributeNode(r)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);return r?r.value:null},setAttributeNS:function(e,t,r){var n=y(e,t)[2],i=this.getAttributeNodeNS(e,n);i?i.value=i.nodeValue=""+r:((i=this.ownerDocument.createAttributeNS(e,t)).value=i.nodeValue=""+r,this.setAttributeNode(i))},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByClassName:function(e){var t=b(e);return new P(this,(function(r){var n=[];return t.length>0&&W(r,(function(i){if(i!==r&&i.nodeType===v){var s=i.getAttribute("class");if(s){var o=e===s;if(!o){var a=b(s);o=t.every(function(e){return function(t){return e&&-1!==e.indexOf(t)}}(a))}o&&n.push(i)}}})),n}))},getElementsByTagName:function(e){var t="html"===(this.nodeType===U?this:this.ownerDocument).type,r=e.toLowerCase();return new P(this,(function(n){var i=[];return W(n,(function(s){if(s!==n&&s.nodeType===v)if("*"===e)i.push(s);else{s.getQualifiedName()===(t&&s.namespaceURI===c.HTML?r:e)&&i.push(s)}})),i}))},getElementsByTagNameNS:function(e,t){return new P(this,(function(r){var n=[];return W(r,(function(i){i!==r&&i.nodeType===v&&("*"===e||i.namespaceURI===e)&&("*"===t||i.localName==t)&&n.push(i)})),n}))}},J.prototype.getElementsByClassName=ce.prototype.getElementsByClassName,J.prototype.getElementsByTagName=ce.prototype.getElementsByTagName,J.prototype.getElementsByTagNameNS=ce.prototype.getElementsByTagNameNS,N(ce,z),le.prototype.nodeType=S,N(le,z),he.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,r){r=this.data.substring(0,e)+r+this.data.substring(e+t),this.nodeValue=this.data=r,this.length=r.length}},N(he,z),ue.prototype={nodeName:"#text",nodeType:_,splitText:function(e){var t=this.data,r=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},N(ue,he),fe.prototype={nodeName:"#comment",nodeType:D},N(fe,he),de.prototype={nodeName:"#cdata-section",nodeType:A},N(de,ue),pe.prototype.nodeType=R,N(pe,z),ge.prototype.nodeType=C,N(ge,z),me.prototype.nodeType=I,N(me,z),be.prototype.nodeType=O,N(be,z),we.prototype.nodeName="#document-fragment",we.prototype.nodeType=L,N(we,z),ye.prototype.nodeType=x,N(ye,he),Ee.prototype.serializeToString=function(e,t){return Ne.call(e,t)},z.prototype.toString=Ne;try{if(Object.defineProperty){let e=function(t){switch(t.nodeType){case v:case L:var r=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&r.push(e(t)),t=t.nextSibling;return r.join("");default:return t.nodeValue}};Object.defineProperty(P.prototype,"length",{get:function(){return F(this),this.$$length}}),Object.defineProperty(z.prototype,"textContent",{get:function(){return e(this)},set:function(e){switch(this.nodeType){case v:case L:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),Oe=function(e,t,r){e["$$"+t]=r}}}catch{}return vo._updateLiveList=F,vo.Attr=le,vo.CDATASection=de,vo.CharacterData=he,vo.Comment=fe,vo.Document=J,vo.DocumentFragment=we,vo.DocumentType=pe,vo.DOMImplementation=V,vo.Element=ce,vo.Entity=me,vo.EntityReference=be,vo.LiveNodeList=P,vo.NamedNodeMap=q,vo.Node=z,vo.NodeList=$,vo.Notation=ge,vo.Text=ue,vo.ProcessingInstruction=ye,vo.XMLSerializer=Ee,vo}var Oo,Io={},xo={};var Do,Uo,Ro,Lo={};function Co(){if(Do)return Lo;Do=1;var e=bo(),t=_o(),r=Eo(),n=e.isHTMLEscapableRawTextElement,i=e.isHTMLMimeType,s=e.isHTMLRawTextElement,o=e.hasOwn,a=e.NAMESPACE,c=r.ParseError,l=r.DOMException,h=0,u=1,f=2,d=3,p=4,g=5,m=6,b=7;function w(){}w.prototype={parse:function(r,n,s){var a=this.domBuilder;a.startDocument(),S(n,n=Object.create(null)),function(r,n,s,a,h){var u=i(a.mimeType);function f(e){if(e>65535){var t=55296+((e-=65536)>>10),r=56320+(1023&e);return String.fromCharCode(t,r)}return String.fromCharCode(e)}function d(e){var r=";"===e[e.length-1]?e:e+";";if(!u&&r!==e)return h.error("EntityRef: expecting ;"),e;var n=t.Reference.exec(r);if(!n||n[0].length!==r.length)return h.error("entity not matching Reference production: "+e),e;var i=r.slice(1,-1);return o(s,i)?s[i]:"#"===i.charAt(0)?f(parseInt(i.substring(1).replace("x","0x"))):(h.error("entity not found:"+e),e)}function p(e){if(e>D){var t=r.substring(D,e).replace(y,d);w&&S(D),a.characters(t,0,e-D),D=e}}r.indexOf(t.UNICODE_REPLACEMENT_CHARACTER)>=0&&h.warning("Unicode replacement character detected, source encoding issues?");var g=0,m=0,b=/\r\n?|\n|$/g,w=a.locator;function S(e,t){for(;e>=m&&(t=b.exec(r));)g=m,m=t.index+t[0].length,w.lineNumber++;w.columnNumber=e-g+1}for(var _=[{currentNSMap:n}],x=[],D=0;;){try{var U=r.indexOf("<",D);if(U<0){if(!u&&x.length>0)return h.fatalError("unclosed xml tag(s): "+x.join(", "));if(!r.substring(D).match(/^\s*$/)){var R=a.doc,L=R.createTextNode(r.substring(D));if(R.documentElement)return h.error("Extra content at the end of the document");R.appendChild(L),a.currentElement=L}return}if(U>D){var C=r.substring(D,U);!u&&0===x.length&&((C=C.replace(new RegExp(t.S_OPT.source,"g"),""))&&h.error("Unexpected content outside root element: '"+C+"'")),p(U)}switch(r.charAt(U+1)){case"/":var M=r.indexOf(">",U+2),B=r.substring(U+2,M>0?M:void 0);if(!B)return h.fatalError("end tag name missing");var k=M>0&&t.reg("^",t.QName_group,t.S_OPT,"$").exec(B);if(!k)return h.fatalError('end tag name contains invalid characters: "'+B+'"');if(!a.currentElement&&!a.doc.documentElement)return;var $=x[x.length-1]||a.currentElement.tagName||a.doc.documentElement.tagName||"";if($!==k[1]){var P=k[1].toLowerCase();if(!u||$.toLowerCase()!==P)return h.fatalError('Opening and ending tag mismatch: "'+$+'" != "'+B+'"')}var F=_.pop();x.pop();var q=F.localNSMap;if(a.endElement(F.uri,F.localName,$),q)for(var j in q)o(q,j)&&a.endPrefixMapping(j);M++;break;case"?":w&&S(U),M=O(r,U,a,h);break;case"!":w&&S(U),M=A(r,U,a,h,u);break;default:w&&S(U);var G=new I,H=_[_.length-1].currentNSMap,V=(M=N(r,U,G,H,d,h,u),G.length);if(G.closed||(u&&e.isHTMLVoidElement(G.tagName)?G.closed=!0:x.push(G.tagName)),w&&V){for(var z=E(w,{}),Y=0;Y<V;Y++){var W=G[Y];S(W.offset),W.locator=E(w,{})}a.locator=z,T(G,a,H)&&_.push(G),a.locator=w}else T(G,a,H)&&_.push(G);u&&!G.closed?M=v(r,M,G.tagName,d,a):M++}}catch(e){if(e instanceof c)throw e;if(e instanceof l)throw new c(e.name+": "+e.message,a.locator,e);h.error("element parse error: "+e),M=-1}M>D?D=M:p(Math.max(U,D)+1)}}(r,n,s,a,this.errorHandler),a.endDocument()}};var y=/&#?\w+;?/g;function E(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function N(e,t,r,n,i,s,a){function c(e,t,n){return o(r.attributeNames,e)?s.fatalError("Attribute "+e+" redefined"):!a&&t.indexOf("<")>=0?s.fatalError("Unescaped '<' not allowed in attributes values"):void r.addValue(e,t.replace(/[\t\n\r]/g," ").replace(y,i),n)}for(var l,w=++t,E=h;;){var N=e.charAt(w);switch(N){case"=":if(E===u)l=e.slice(t,w),E=d;else{if(E!==f)throw new Error("attribute equal must after attrName");E=d}break;case"'":case'"':if(E===d||E===u){if(E===u&&(s.warning('attribute value must after "="'),l=e.slice(t,w)),t=w+1,!((w=e.indexOf(N,t))>0))throw new Error("attribute value no end '"+N+"' match");c(l,T=e.slice(t,w),t-1),E=g}else{if(E!=p)throw new Error('attribute value must after "="');c(l,T=e.slice(t,w),t),s.warning('attribute "'+l+'" missed start quot('+N+")!!"),t=w+1,E=g}break;case"/":switch(E){case h:r.setTagName(e.slice(t,w));case g:case m:case b:E=b,r.closed=!0;case p:case u:break;case f:r.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),E==h&&r.setTagName(e.slice(t,w)),w;case">":switch(E){case h:r.setTagName(e.slice(t,w));case g:case m:case b:break;case p:case u:"/"===(T=e.slice(t,w)).slice(-1)&&(r.closed=!0,T=T.slice(0,-1));case f:E===f&&(T=l),E==p?(s.warning('attribute "'+T+'" missed quot(")!'),c(l,T,t)):(a||s.warning('attribute "'+T+'" missed value!! "'+T+'" instead!!'),c(T,T,t));break;case d:if(!a)return s.fatalError("AttValue: ' or \" expected")}return w;case"":N=" ";default:if(N<=" ")switch(E){case h:r.setTagName(e.slice(t,w)),E=m;break;case u:l=e.slice(t,w),E=f;break;case p:var T=e.slice(t,w);s.warning('attribute "'+T+'" missed quot(")!!'),c(l,T,t);case g:E=m}else switch(E){case f:a||s.warning('attribute "'+l+'" missed value!! "'+l+'" instead2!!'),c(l,l,t),t=w,E=u;break;case g:s.warning('attribute space is required"'+l+'"!!');case m:E=u,t=w;break;case d:E=p,t=w;break;case b:throw new Error("elements closed character '/' and '>' must be connected to")}}w++}}function T(e,t,r){for(var n=e.tagName,i=null,s=e.length;s--;){var c=e[s],l=c.qName,h=c.value;if((p=l.indexOf(":"))>0)var u=c.prefix=l.slice(0,p),f=l.slice(p+1),d="xmlns"===u&&f;else f=l,u=null,d="xmlns"===l&&"";c.localName=f,!1!==d&&(null==i&&(i=Object.create(null),S(r,r=Object.create(null))),r[d]=i[d]=h,c.uri=a.XMLNS,t.startPrefixMapping(d,h))}for(s=e.length;s--;)(c=e[s]).prefix&&("xml"===c.prefix&&(c.uri=a.XML),"xmlns"!==c.prefix&&(c.uri=r[c.prefix]));var p;(p=n.indexOf(":"))>0?(u=e.prefix=n.slice(0,p),f=e.localName=n.slice(p+1)):(u=null,f=e.localName=n);var g=e.uri=r[u||""];if(t.startElement(g,f,n,e),!e.closed)return e.currentNSMap=r,e.localNSMap=i,!0;if(t.endElement(g,f,n),i)for(u in i)o(i,u)&&t.endPrefixMapping(u)}function v(e,t,r,i,o){var a=n(r);if(a||s(r)){var c=e.indexOf("</"+r+">",t),l=e.substring(t+1,c);return a&&(l=l.replace(y,i)),o.characters(l,0,l.length),c}return t+1}function S(e,t){for(var r in e)o(e,r)&&(t[r]=e[r])}function _(e,r){var n=r;function i(t){return t=t||0,e.charAt(n+t)}function s(e){n+=e=e||1}function o(){return e.substring(n)}return{char:i,getIndex:function(){return n},getMatch:function(e){var r=t.reg("^",e).exec(o());return r?(s(r[0].length),r[0]):null},getSource:function(){return e},skip:s,skipBlanks:function(){for(var t=0;n<e.length;){var r=i();if(" "!==r&&"\n"!==r&&"\t"!==r&&"\r"!==r)return t;t++,s()}return-1},substringFromIndex:o,substringStartsWith:function(t){return e.substring(n,n+t.length)===t},substringStartsWithCaseInsensitive:function(t){return e.substring(n,n+t.length).toUpperCase()===t.toUpperCase()}}}function A(e,r,n,i,s){var o=_(e,r);switch(s?o.char(2).toUpperCase():o.char(2)){case"-":var a=o.getMatch(t.Comment);return a?(n.comment(a,t.COMMENT_START.length,a.length-t.COMMENT_START.length-t.COMMENT_END.length),o.getIndex()):i.fatalError("comment is not well-formed at position "+o.getIndex());case"[":var c=o.getMatch(t.CDSect);return c?s||n.currentElement?(n.startCDATA(),n.characters(c,t.CDATA_START.length,c.length-t.CDATA_START.length-t.CDATA_END.length),n.endCDATA(),o.getIndex()):i.fatalError("CDATA outside of element"):i.fatalError("Invalid CDATA starting at position "+r);case"D":if(n.doc&&n.doc.documentElement)return i.fatalError("Doctype not allowed inside or after documentElement at position "+o.getIndex());if(s?!o.substringStartsWithCaseInsensitive(t.DOCTYPE_DECL_START):!o.substringStartsWith(t.DOCTYPE_DECL_START))return i.fatalError("Expected "+t.DOCTYPE_DECL_START+" at position "+o.getIndex());if(o.skip(t.DOCTYPE_DECL_START.length),o.skipBlanks()<1)return i.fatalError("Expected whitespace after "+t.DOCTYPE_DECL_START+" at position "+o.getIndex());var l={name:void 0,publicId:void 0,systemId:void 0,internalSubset:void 0};if(l.name=o.getMatch(t.Name),!l.name)return i.fatalError("doctype name missing or contains unexpected characters at position "+o.getIndex());if(s&&"html"!==l.name.toLowerCase()&&i.warning("Unexpected DOCTYPE in HTML document at position "+o.getIndex()),o.skipBlanks(),o.substringStartsWith(t.PUBLIC)||o.substringStartsWith(t.SYSTEM)){var h=t.ExternalID_match.exec(o.substringFromIndex());if(!h)return i.fatalError("doctype external id is not well-formed at position "+o.getIndex());void 0!==h.groups.SystemLiteralOnly?l.systemId=h.groups.SystemLiteralOnly:(l.systemId=h.groups.SystemLiteral,l.publicId=h.groups.PubidLiteral),o.skip(h[0].length)}else if(s&&o.substringStartsWithCaseInsensitive(t.SYSTEM)){if(o.skip(t.SYSTEM.length),o.skipBlanks()<1)return i.fatalError("Expected whitespace after "+t.SYSTEM+" at position "+o.getIndex());if(l.systemId=o.getMatch(t.ABOUT_LEGACY_COMPAT_SystemLiteral),!l.systemId)return i.fatalError("Expected "+t.ABOUT_LEGACY_COMPAT+" in single or double quotes after "+t.SYSTEM+" at position "+o.getIndex())}return s&&l.systemId&&!t.ABOUT_LEGACY_COMPAT_SystemLiteral.test(l.systemId)&&i.warning("Unexpected doctype.systemId in HTML document at position "+o.getIndex()),s||(o.skipBlanks(),l.internalSubset=function(e,r){function n(e,r){var n=t.PI.exec(e.substringFromIndex());return n?"xml"===n[1].toLowerCase()?r.fatalError("xml declaration is only allowed at the start of the document, but found at position "+e.getIndex()):(e.skip(n[0].length),n[0]):r.fatalError("processing instruction is not well-formed at position "+e.getIndex())}var i=e.getSource();if("["===e.char()){e.skip(1);for(var s=e.getIndex();e.getIndex()<i.length;){if(e.skipBlanks(),"]"===e.char()){var o=i.substring(s,e.getIndex());return e.skip(1),o}var a=null;if("<"===e.char()&&"!"===e.char(1))switch(e.char(2)){case"E":"L"===e.char(3)?a=e.getMatch(t.elementdecl):"N"===e.char(3)&&(a=e.getMatch(t.EntityDecl));break;case"A":a=e.getMatch(t.AttlistDecl);break;case"N":a=e.getMatch(t.NotationDecl);break;case"-":a=e.getMatch(t.Comment)}else if("<"===e.char()&&"?"===e.char(1))a=n(e,r);else{if("%"!==e.char())return r.fatalError("Error detected in Markup declaration");a=e.getMatch(t.PEReference)}if(!a)return r.fatalError("Error in internal subset at position "+e.getIndex())}return r.fatalError("doctype internal subset is not well-formed, missing ]")}}(o,i)),o.skipBlanks(),">"!==o.char()?i.fatalError("doctype not terminated with > at position "+o.getIndex()):(o.skip(1),n.startDTD(l.name,l.publicId,l.systemId,l.internalSubset),n.endDTD(),o.getIndex());default:return i.fatalError('Not well-formed XML starting with "<!" at position '+r)}}function O(e,r,n,i){var s=e.substring(r).match(t.PI);if(!s)return i.fatalError("Invalid processing instruction starting at position "+r);if("xml"===s[1].toLowerCase()){if(r>0)return i.fatalError("processing instruction at position "+r+" is an xml declaration which is only at the start of the document");if(!t.XMLDecl.test(e.substring(r)))return i.fatalError("xml declaration is not well-formed")}return n.processingInstruction(s[1],s[2]),r+s[0].length}function I(){this.attributeNames=Object.create(null)}return I.prototype={setTagName:function(e){if(!t.QName_exact.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,r,n){if(!t.QName_exact.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:r,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},Lo.XMLReader=w,Lo.parseUtils=_,Lo.parseDoctypeCommentOrCData=A,Lo}function Mo(){if(Uo)return Io;Uo=1;var e=bo(),t=Ao(),r=Eo(),n=(Oo||(Oo=1,function(e){var t=bo().freeze;e.XML_ENTITIES=t({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),e.HTML_ENTITIES=t({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:"\n",nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"\t",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),e.entityMap=e.HTML_ENTITIES}(xo)),xo),i=Co(),s=t.DOMImplementation,o=e.hasDefaultHTMLNamespace,a=e.isHTMLMimeType,c=e.isValidMimeType,l=e.MIME_TYPE,h=e.NAMESPACE,u=r.ParseError,f=i.XMLReader;function d(e){return e.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028\u2029]/g,"\n")}function p(t){if(void 0===(t=t||{}).locator&&(t.locator=!0),this.assign=t.assign||e.assign,this.domHandler=t.domHandler||g,this.onError=t.onError||t.errorHandler,t.errorHandler&&"function"!=typeof t.errorHandler)throw new TypeError("errorHandler object is no longer supported, switch to onError!");t.errorHandler&&t.errorHandler("warning","The `errorHandler` option has been deprecated, use `onError` instead!",this),this.normalizeLineEndings=t.normalizeLineEndings||d,this.locator=!!t.locator,this.xmlns=this.assign(Object.create(null),t.xmlns)}function g(e){var t=e||{};this.mimeType=t.mimeType||l.XML_APPLICATION,this.defaultNamespace=t.defaultNamespace||null,this.cdata=!1,this.currentElement=void 0,this.doc=void 0,this.locator=void 0,this.onError=t.onError}function m(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function b(e,t,r){return"string"==typeof e?e.substr(t,r):e.length>=t+r||t?new java.lang.String(e,t,r)+"":e}function w(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}return p.prototype.parseFromString=function(t,r){if(!c(r))throw new TypeError('DOMParser.parseFromString: the provided mimeType "'+r+'" is not valid.');var i=this.assign(Object.create(null),this.xmlns),s=n.XML_ENTITIES,a=i[""]||null;o(r)?(s=n.HTML_ENTITIES,a=h.HTML):r===l.XML_SVG_IMAGE&&(a=h.SVG),i[""]=a,i.xml=i.xml||h.XML;var u=new this.domHandler({mimeType:r,defaultNamespace:a,onError:this.onError}),d=this.locator?{}:void 0;this.locator&&u.setDocumentLocator(d);var p=new f;return p.errorHandler=u,p.domBuilder=u,!e.isHTMLMimeType(r)&&"string"!=typeof t&&p.errorHandler.fatalError("source is not a string"),p.parse(this.normalizeLineEndings(String(t)),i,s),u.doc.documentElement||p.errorHandler.fatalError("missing root element"),u.doc},g.prototype={startDocument:function(){var e=new s;this.doc=a(this.mimeType)?e.createHTMLDocument(!1):e.createDocument(this.defaultNamespace,"")},startElement:function(e,t,r,n){var i=this.doc,s=i.createElementNS(e,r||t),o=n.length;w(this,s),this.currentElement=s,this.locator&&m(this.locator,s);for(var a=0;a<o;a++){e=n.getURI(a);var c=n.getValue(a),l=(r=n.getQName(a),i.createAttributeNS(e,r));this.locator&&m(n.getLocator(a),l),l.value=l.nodeValue=c,s.setAttributeNode(l)}},endElement:function(e,t,r){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var r=this.doc.createProcessingInstruction(e,t);this.locator&&m(this.locator,r),w(this,r)},ignorableWhitespace:function(e,t,r){},characters:function(e,t,r){if(e=b.apply(this,arguments)){if(this.cdata)var n=this.doc.createCDATASection(e);else n=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(e)&&this.doc.appendChild(n),this.locator&&m(this.locator,n)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){e&&(e.lineNumber=0),this.locator=e},comment:function(e,t,r){e=b.apply(this,arguments);var n=this.doc.createComment(e);this.locator&&m(this.locator,n),w(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,r,n){var i=this.doc.implementation;if(i&&i.createDocumentType){var s=i.createDocumentType(e,t,r,n);this.locator&&m(this.locator,s),w(this,s),this.doc.doctype=s}},reportError:function(e,t){if("function"==typeof this.onError)try{this.onError(e,t,this)}catch(r){throw new u("Reporting "+e+' "'+t+'" caused '+r,this.locator)}else console.error("[xmldom "+e+"]\t"+t,function(e){if(e)return"\n@#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}(this.locator))},warning:function(e){this.reportError("warning",e)},error:function(e){this.reportError("error",e)},fatalError:function(e){throw this.reportError("fatalError",e),new u(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){g.prototype[e]=function(){return null}})),Io.__DOMHandler=g,Io.DOMParser=p,Io.normalizeLineEndings=d,Io.onErrorStopParsing=function(e){if("error"===e)throw"onErrorStopParsing"},Io.onWarningStopParsing=function(){throw"onWarningStopParsing"},Io}var Bo=function(){if(Ro)return go;Ro=1;var e=bo();go.assign=e.assign,go.hasDefaultHTMLNamespace=e.hasDefaultHTMLNamespace,go.isHTMLMimeType=e.isHTMLMimeType,go.isValidMimeType=e.isValidMimeType,go.MIME_TYPE=e.MIME_TYPE,go.NAMESPACE=e.NAMESPACE;var t=Eo();go.DOMException=t.DOMException,go.DOMExceptionName=t.DOMExceptionName,go.ExceptionCode=t.ExceptionCode,go.ParseError=t.ParseError;var r=Ao();go.Attr=r.Attr,go.CDATASection=r.CDATASection,go.CharacterData=r.CharacterData,go.Comment=r.Comment,go.Document=r.Document,go.DocumentFragment=r.DocumentFragment,go.DocumentType=r.DocumentType,go.DOMImplementation=r.DOMImplementation,go.Element=r.Element,go.Entity=r.Entity,go.EntityReference=r.EntityReference,go.LiveNodeList=r.LiveNodeList,go.NamedNodeMap=r.NamedNodeMap,go.Node=r.Node,go.NodeList=r.NodeList,go.Notation=r.Notation,go.ProcessingInstruction=r.ProcessingInstruction,go.Text=r.Text,go.XMLSerializer=r.XMLSerializer;var n=Mo();return go.DOMParser=n.DOMParser,go.normalizeLineEndings=n.normalizeLineEndings,go.onErrorStopParsing=n.onErrorStopParsing,go.onWarningStopParsing=n.onWarningStopParsing,go}();class ko{constructor({xml:e}){this.parent=null,this.child=null,this.minval=NaN,this.maxval=NaN,this.origin=new eo,this.axis=new qs({x:1,y:0,z:0}),this.name=e.getAttribute(ro.Name)??"unknown_name",this.type=e.getAttribute(ro.Type);const t=e.getElementsByTagName(ro.Parent);t[0]&&(this.parent=t[0].getAttribute(ro.Link));const r=e.getElementsByTagName(ro.Child);r[0]&&(this.child=r[0].getAttribute(ro.Link));const n=e.getElementsByTagName(ro.Limit);n[0]&&(this.minval=parseFloat(n[0].getAttribute(ro.Lower)??"NaN"),this.maxval=parseFloat(n[0].getAttribute(ro.Upper)??"NaN"));const i=e.getElementsByTagName(ro.Origin);i[0]&&(this.origin=lo(i[0]));const s=e.getElementsByTagName(ro.Axis);if(s[0]){const e=s[0].getAttribute(ro.Xyz)?.split(" ");if(3!==e?.length)throw new Error("If specified, axis must have an xyz value composed of three numbers");const[t,r,n]=e.map(parseFloat);this.axis=new qs({x:t,y:r,z:n})}}}var $o=Object.freeze({__proto__:null,NativeWebSocketTransport:class extends Qs{constructor(e){super(),this.socket=e,this.registerEventListeners()}send(e){this.socket.send(JSON.stringify(e))}close(){this.socket.close()}isConnecting(){return this.socket.readyState===WebSocket.CONNECTING}isOpen(){return this.socket.readyState===WebSocket.OPEN}isClosing(){return this.socket.readyState===WebSocket.CLOSING}isClosed(){return this.socket.readyState===WebSocket.CLOSED}registerEventListeners(){this.socket.onopen=e=>{this.emit("open",e)},this.socket.onclose=e=>{this.emit("close",e)},this.socket.onerror=e=>{this.emit("error",e)},this.socket.onmessage=e=>{this.handleRawMessage(e.data)}}}});var Po=Object.freeze({__proto__:null,WsWebSocketTransport:class extends Qs{constructor(e){super(),this.socket=e,this.registerEventListeners()}send(e){this.socket.send(JSON.stringify(e))}close(){this.socket.close()}isConnecting(){return this.socket.readyState===(window.WebSocket?.CONNECTING??0)}isOpen(){return this.socket.readyState===(window.WebSocket?.OPEN??1)}isClosing(){return this.socket.readyState===(window.WebSocket?.CLOSING??2)}isClosed(){return this.socket.readyState===(window.WebSocket?.CLOSED??3)}registerEventListeners(){this.socket.onopen=e=>{this.emit("open",e)},this.socket.onclose=e=>{this.emit("close",e)},this.socket.onerror=e=>{this.emit("error",e)},this.socket.onmessage=e=>{this.handleRawMessage(e.data)}}}});return e.AbstractTransport=Qs,e.Action=Xs,e.ActionClient=Ps,e.ActionListener=class extends i{constructor({ros:e,serverName:t,actionName:r}){super(),this.ros=e,this.serverName=t,this.actionName=r;const n=new ks({ros:this.ros,name:`${this.serverName}/goal`,messageType:`${this.actionName}Goal`}),i=new ks({ros:this.ros,name:`${this.serverName}/feedback`,messageType:`${this.actionName}Feedback`}),s=new ks({ros:this.ros,name:`${this.serverName}/status`,messageType:"actionlib_msgs/GoalStatusArray"}),o=new ks({ros:this.ros,name:`${this.serverName}/result`,messageType:`${this.actionName}Result`});n.subscribe((e=>{this.emit("goal",e)})),s.subscribe((e=>{e.status_list.forEach((e=>{this.emit("status",e)}))})),i.subscribe((e=>{this.emit("status",e.status),this.emit("feedback",e.feedback)})),o.subscribe((e=>{this.emit("status",e.status),this.emit("result",e.result)}))}},e.Goal=Fs,e.GoalStatus=Ws,e.Param=$s,e.Pose=eo,e.Quaternion=js,e.REVISION="2.0.1",e.ROS2TFClient=class extends Hs{constructor(e){super(e),this.goal_id="",this.actionClient=new Xs({ros:this.ros,name:this.serverName,actionType:"tf2_web_republisher_interfaces/TFSubscription"})}updateGoal(){const e={source_frames:Object.keys(this.frameInfos),target_frame:this.fixedFrame,angular_thres:this.angularThres,trans_thres:this.transThres,rate:this.rate};""!==this.goal_id&&this.actionClient.cancelGoal(this.goal_id),this.currentGoal=e;const t=this.actionClient.sendGoal(e,(()=>{}),(e=>{this.processTFArray(e)}));"string"==typeof t&&(this.goal_id=t),this.republisherUpdateRequested=!1}dispose(){""!==this.goal_id&&this.actionClient.cancelGoal(this.goal_id)}},e.Ros=class extends i{#e;constructor({url:e,transportFactory:t=Ys}={}){super(),this.#e=!1,this.transportFactory=t,e&&this.connect(e).catch(console.error)}get isConnected(){return this.#e}async connect(e){if(this.transport&&!this.transport.isClosed())return;const t=await this.transportFactory(e);this.transport=t,t.on("open",(e=>{this.#e=!0,this.emit("connection",e)})),t.on("close",(e=>{this.#e=!1,this.emit("close",e)})),t.on("error",(e=>{this.emit("error",e)})),t.on("message",(e=>{this.handleMessage(e)}))}close(){this.transport?.close()}handleMessage(e){xs(e)?this.emit(e.topic,e):Us(e)?e.id?this.emit(e.id,e):console.error("Received service response without ID"):Ds(e)?this.emit(e.service,e):Rs(e)?this.emit(e.action,e):Ls(e)||Cs(e)||Ms(e)?this.emit(e.id,e):As(e)&&(e.id?this.emit(`status:${e.id}`,e):this.emit("status",e))}authenticate(e,t,r,n,i,s,o){this.callOnConnection({op:"auth",mac:e,client:t,dest:r,rand:n,t:i,level:s,end:o})}callOnConnection(e){this.isConnected?this.transport?.send(e):this.once("connection",(()=>{this.transport?.send(e)}))}setStatusLevel(e,t){const r={op:"set_level",level:e,id:t};this.callOnConnection(r)}getActionServers(e,t=console.error){new Bs({ros:this,name:"rosapi/action_servers",serviceType:"rosapi/GetActionServers"}).callService({},(function(t){e(t.action_servers)}),(function(e){t(e)}))}getTopics(e,t=console.error){new Bs({ros:this,name:"rosapi/topics",serviceType:"rosapi/Topics"}).callService({},(function(t){e(t)}),(function(e){t(e)}))}getTopicsForType(e,t,r=console.error){const n={type:e};new Bs({ros:this,name:"rosapi/topics_for_type",serviceType:"rosapi/TopicsForType"}).callService(n,(function(e){t(e.topics)}),(function(e){r(e)}))}getServices(e,t=console.error){new Bs({ros:this,name:"rosapi/services",serviceType:"rosapi/Services"}).callService({},(function(t){e(t.services)}),(function(e){t(e)}))}getServicesForType(e,t,r=console.error){const n={type:e};new Bs({ros:this,name:"rosapi/services_for_type",serviceType:"rosapi/ServicesForType"}).callService(n,(function(e){t(e.services)}),(function(e){r(e)}))}getServiceRequestDetails(e,t,r=console.error){const n={type:e};new Bs({ros:this,name:"rosapi/service_request_details",serviceType:"rosapi/ServiceRequestDetails"}).callService(n,(function(e){t(e)}),(function(e){r(e)}))}getServiceResponseDetails(e,t,r=console.error){const n={type:e};new Bs({ros:this,name:"rosapi/service_response_details",serviceType:"rosapi/ServiceResponseDetails"}).callService(n,(function(e){t(e)}),(function(e){r(e)}))}getNodes(e,t=console.error){new Bs({ros:this,name:"rosapi/nodes",serviceType:"rosapi/Nodes"}).callService({},(function(t){e(t.nodes)}),(function(e){t(e)}))}getNodeDetails(e,t,r=console.error){new Bs({ros:this,name:"rosapi/node_details",serviceType:"rosapi/NodeDetails"}).callService({node:e},t,r)}getParams(e,t=console.error){new Bs({ros:this,name:"rosapi/get_param_names",serviceType:"rosapi/GetParamNames"}).callService({},(function(t){e(t.names)}),(function(e){t(e)}))}getTopicType(e,t,r=console.error){const n={topic:e};new Bs({ros:this,name:"rosapi/topic_type",serviceType:"rosapi/TopicType"}).callService(n,(function(e){t(e.type)}),(function(e){r(e)}))}getServiceType(e,t,r=console.error){const n={service:e};new Bs({ros:this,name:"rosapi/service_type",serviceType:"rosapi/ServiceType"}).callService(n,(function(e){t(e.type)}),(function(e){r(e)}))}getMessageDetails(e,t,r=console.error){const n={type:e};new Bs({ros:this,name:"rosapi/message_details",serviceType:"rosapi/MessageDetails"}).callService(n,(function(e){t(e.typedefs)}),(function(e){r(e)}))}decodeTypeDefs(e){const t=(e,r)=>{const n={};for(let i=0;i<e.fieldnames.length;i++){const s=e.fieldarraylen[i],o=e.fieldnames[i],a=e.fieldtypes[i];if(void 0===o||void 0===a)throw new Error("Received mismatched type definition vector lengths!");if(a.includes("/")){let e;for(const t of r)if(t.type===a){e=t;break}if(e){const i=t(e,r);n[o]=-1===s?i:[i]}else this.emit("error",`Cannot find ${a} in decodeTypeDefs`)}else n[o]=-1===s?a:[a]}return n};return e[0]?t(e[0],e):{}}getTopicsAndRawTypes(e,t=console.error){new Bs({ros:this,name:"rosapi/topics_and_raw_types",serviceType:"rosapi/TopicsAndRawTypes"}).callService({},(function(t){e(t)}),(function(e){t(e)}))}Topic(e){return new ks({ros:this,...e})}Param(e){return new $s({ros:this,...e})}Service(e){return new Bs({ros:this,...e})}TFClient(e){return new Vs({ros:this,...e})}ActionClient(e){return new Ps({ros:this,...e})}SimpleActionServer(e){return new zs({ros:this,...e})}},e.Service=Bs,e.SimpleActionServer=zs,e.TFClient=Vs,e.Topic=ks,e.Transform=Gs,e.UrdfAttrs=ro,e.UrdfBox=no,e.UrdfColor=io,e.UrdfCylinder=so,e.UrdfJoint=ko,e.UrdfLink=fo,e.UrdfMaterial=oo,e.UrdfMesh=ao,e.UrdfModel=class{constructor({xml:e,string:t}){this.materials={},this.links={},this.joints={};let r=e;if(t&&(r=(new Bo.DOMParser).parseFromString(t,Bo.MIME_TYPE.XML_TEXT).documentElement??void 0),!r)throw new Error("No URDF document parsed!");this.name=r.getAttribute(ro.Name);const n=r.childNodes;for(const e of n)if(ho(e))switch(e.tagName){case"material":{const t=new oo({xml:e});if(!Object.hasOwn(this.materials,t.name)){this.materials[t.name]=t;break}const r=this.materials[t.name];r?.isLink()?r.assign(t):console.warn(`Material ${t.name} is not unique.`);break}case"link":{const t=new fo({xml:e});if(Object.hasOwn(this.links,t.name)){console.warn(`Link ${t.name} is not unique.`);break}for(const e of t.visuals){const t=e.material;if(!t?.name)continue;const r=this.materials[t.name];r?e.material=r:this.materials[t.name]=t}this.links[t.name]=t;break}case"joint":{const t=new ko({xml:e});this.joints[t.name]=t;break}}}},e.UrdfSphere=co,e.UrdfType=to,e.UrdfVisual=uo,e.Vector3=qs,e.WebSocketTransportFactory=Ys,e.isElement=ho,e.isRosbridgeActionFeedbackMessage=Cs,e.isRosbridgeActionResultMessage=Ms,e.isRosbridgeAdvertiseActionMessage=function(e){return"advertise_action"===e.op},e.isRosbridgeAdvertiseMessage=function(e){return"advertise"===e.op},e.isRosbridgeAdvertiseServiceMessage=function(e){return"advertise_service"===e.op},e.isRosbridgeCallServiceMessage=Ds,e.isRosbridgeCancelActionGoalMessage=Ls,e.isRosbridgeFragmentMessage=Os,e.isRosbridgeMessage=_s,e.isRosbridgePngMessage=Is,e.isRosbridgePublishMessage=xs,e.isRosbridgeSendActionGoalMessage=Rs,e.isRosbridgeServiceResponseMessage=Us,e.isRosbridgeSetStatusLevelMessage=function(e){return"set_level"===e.op},e.isRosbridgeStatusMessage=As,e.isRosbridgeSubscribeMessage=function(e){return"subscribe"===e.op},e.isRosbridgeUnadvertiseActionMessage=function(e){return"unadvertise_action"===e.op},e.isRosbridgeUnadvertiseMessage=function(e){return"unadvertise"===e.op},e.isRosbridgeUnadvertiseServiceMessage=function(e){return"unadvertise_service"===e.op},e.isRosbridgeUnsubscribeMessage=function(e){return"unsubscribe"===e.op},e.parseUrdfOrigin=lo,e}({});
/* global Test */
/// <reference path="main.js" />

class RNG {
    constructor(seed) {
        this.m = 0x80000000; // 2^31
        this.a = 1664525;    // 常見的乘數
        this.c = 1013904223; // 常見的增量
        this.state = seed;   // 初始化隨機數生成器狀態
    }

    next() {
        this.state = (this.a * this.state + this.c) % this.m;
        return this.state / this.m;  // 返回 [0, 1) 之間的偽隨機數
    }
}

function LED_PWM(led=0,pwm=0){
    if(0<=led&&led<=3&&0<=pwm&&pwm<=255)
        document.getElementById('LED'+led).style.opacity=(pwm)/255;
}

let last_button_stats=[0,0];
function BUTTON_PRESS(button=0){
    if(0<=button&&button<=1){
        if(document.getElementById('BT'+button).dataset.press==='true'){
            return true;
        }else{
            return false;
        }
    }
    return null;
}
function BUTTON_STATUS(button=0){
    if(0<=button&&button<=1){
        if(BUTTON_PRESS(button)&&!last_button_stats[button]){
            last_button_stats[button]=BUTTON_PRESS(button);
            return 1;
        }else if(!BUTTON_PRESS(button)&&last_button_stats[button]){
            last_button_stats[button]=BUTTON_PRESS(button);
            return -1;
        }else{
            last_button_stats[button]=BUTTON_PRESS(button);
            return 0;
        }
    }
    return null;
}

function GET_ADC_VALUE(){
    return Number(document.getElementById('ADC').value);
}

var LCD_Effect=0x00;

function LCD_SETEFFECT(effect=0x00){
    LCD_Effect=effect;
}

function LCD_RESET(){
    const canvas=document.getElementById('canvas');
    const ctx=canvas.getContext("2d");
    if(LCD_Effect){
        ctx.fillStyle="#000000";
    }else{
        ctx.fillStyle="#909090";
    }
    ctx.fillRect(0,0,128*8,64*8);
}

function LCD_PRINTBLOCK(x=0,y=0,data=[]){
    data=cloneJSON(data);
    const canvas=document.getElementById('canvas');
    const ctx=canvas.getContext("2d");
    for(let i=0;i<data.length;i++){
        ctx.fillStyle="#909090";
        ctx.fillRect((x+i)*8,y*8*8,1*8,8*8);
        ctx.fillStyle="#000000";
        data[i]=data[i]^LCD_Effect;
        for(let j=0;j<8;j++){
            if(data[i]&1){
                ctx.fillRect((x+i)*8,(y*8+j)*8,1*8,1*8);
            }
            data[i]=data[i]>>1;
        }
    }
}

function LCD_PRINTCHAR(x=0,y=0,char=0){
    LCD_PRINTBLOCK(x*8,y*2,LCD_CHAR.slice(char*16,char*16+8));
    LCD_PRINTBLOCK(x*8,y*2+1,LCD_CHAR.slice(char*16+8,char*16+16));
}
function LCD_PRINTCUSTCHAR(x=0,y=0,char=[]){
    LCD_PRINTBLOCK(x*8,y*2,char.slice(0,8));
    LCD_PRINTBLOCK(x*8,y*2+1,char.slice(8,16));
}

function LCD_PRINTSTRING(x=0,y=0,string=[]){
    for(let i=0;(i<string.length&&i<16);i++){
        LCD_PRINTCHAR((x+i),y,string[i]);
    }
}

function LCD_PRINTTURESTRING(x=0,y=0,string=''){
    const punc=[46,45,58,33,63,47,256,62];
    let trans=[];
    for(let i=0;i<string.length;i++){
        const char=string[i].charCodeAt();
        if(48<=char&&char<=57){         //0-9
            trans.push(char-48+0)
        }else if(97<=char&&char<=122){  //a-z
            trans.push(char-97+30)
        }else if(65<=char&&char<=90){   //A-Z
            trans.push(char-65+56)
        }else{
            if(punc.indexOf(char)>=0){
                trans.push(20+punc.indexOf(char));
            }else{
                trans.push(82);
            }
        }
    }
    for(let i=0;(i<trans.length&&i<16);i++){
        LCD_PRINTCHAR((x+i),y,trans[i]);
    }
}

const LCD_CHAR=[
    0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,0x00,0x0F,0x10,0x20,0x20,0x10,0x0F,0x00,    //0 0
    0x00,0x10,0x10,0xF8,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,
    0x00,0x70,0x08,0x08,0x08,0x88,0x70,0x00,0x00,0x30,0x28,0x24,0x22,0x21,0x30,0x00,
    0x00,0x30,0x08,0x88,0x88,0x48,0x30,0x00,0x00,0x18,0x20,0x20,0x20,0x11,0x0E,0x00,
    0x00,0x00,0xC0,0x20,0x10,0xF8,0x00,0x00,0x00,0x07,0x04,0x24,0x24,0x3F,0x24,0x00,
    0x00,0xF8,0x08,0x88,0x88,0x08,0x08,0x00,0x00,0x19,0x21,0x20,0x20,0x11,0x0E,0x00,
    0x00,0xE0,0x10,0x88,0x88,0x18,0x00,0x00,0x00,0x0F,0x11,0x20,0x20,0x11,0x0E,0x00,
    0x00,0x38,0x08,0x08,0xC8,0x38,0x08,0x00,0x00,0x00,0x00,0x3F,0x00,0x00,0x00,0x00,
    0x00,0x70,0x88,0x08,0x08,0x88,0x70,0x00,0x00,0x1C,0x22,0x21,0x21,0x22,0x1C,0x00,
    0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,0x00,0x00,0x31,0x22,0x22,0x11,0x0F,0x00,    //9 9

    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00,0x00,0x00,    //. 10
    0x08,0xF8,0x00,0x00,0x80,0x80,0x80,0x00,0x20,0x3F,0x24,0x02,0x2D,0x30,0x20,0x00,    //k 11
    0xF8,0x08,0x00,0xF8,0x00,0x08,0xF8,0x00,0x03,0x3C,0x07,0x00,0x07,0x3C,0x03,0x00,    //w 12
    0x08,0xF8,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x3F,0x21,0x00,0x00,0x20,0x3F,0x20,    //h 13
    0x80,0x80,0x80,0x00,0x00,0x80,0x80,0x80,0x00,0x01,0x0E,0x30,0x08,0x06,0x01,0x00,    //v 14
    0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x19,0x24,0x22,0x22,0x22,0x3F,0x20,    //a 15
    0x80,0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x20,0x20,0x3F,0x21,0x20,0x00,0x01,0x00,    //r 16
    0x08,0x78,0x88,0x00,0x00,0xC8,0x38,0x08,0x00,0x00,0x07,0x38,0x0E,0x01,0x00,0x00,    //V 17
    0x00,0x00,0xC0,0x38,0xE0,0x00,0x00,0x00,0x20,0x3C,0x23,0x02,0x02,0x27,0x38,0x20,    //A 18
    0x08,0xF8,0x88,0x88,0x88,0x70,0x00,0x00,0x20,0x3F,0x20,0x20,0x20,0x11,0x0E,0x00,    //B 19

    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00,0x00,0x00,    //. 20
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x01,0x01,0x01,0x01,    //- 21
    0x00,0x60,0x60,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00,0x00,0x00,    //:  22
    0x00,0xF8,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x37,0x37,0x00,0x00,0x00,0x00,0x00,    //! 23
    0x30,0x38,0x18,0x98,0xF8,0xF0,0x00,0x00,0x00,0x36,0x37,0x03,0x01,0x00,0x00,0x00,    //? 24
    0x00,0x00,0x00,0x00,0xC0,0xF0,0x30,0x00,0x00,0x30,0x3C,0x0F,0x03,0x00,0x00,0x00,    /// 25
    0x00,0x54,0x38,0x7C,0x38,0x54,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,	//*	26
    0x00,0x00,0x04,0x08,0x10,0x20,0x40,0x80,0x00,0x00,0x20,0x10,0x08,0x04,0x02,0x01,	//>	27
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

    0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x19,0x24,0x22,0x22,0x22,0x3F,0x20,    //a 30
    0x08,0xF8,0x00,0x80,0x80,0x00,0x00,0x00,0x00,0x3F,0x11,0x20,0x20,0x11,0x0E,0x00,
    0x00,0x00,0x00,0x80,0x80,0x80,0x00,0x00,0x00,0x0E,0x11,0x20,0x20,0x20,0x11,0x00,
    0x00,0x00,0x00,0x80,0x80,0x88,0xF8,0x00,0x00,0x0E,0x11,0x20,0x20,0x10,0x3F,0x20,
    0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x1F,0x22,0x22,0x22,0x22,0x13,0x00,
    0x00,0x80,0x80,0xF0,0x88,0x88,0x88,0x18,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,
    0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x6B,0x94,0x94,0x94,0x93,0x60,0x00,
    0x08,0xF8,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x3F,0x21,0x00,0x00,0x20,0x3F,0x20,
    0x00,0x80,0x98,0x98,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,
    0x00,0x00,0x00,0x80,0x98,0x98,0x00,0x00,0x00,0xC0,0x80,0x80,0x80,0x7F,0x00,0x00,
    0x08,0xF8,0x00,0x00,0x80,0x80,0x80,0x00,0x20,0x3F,0x24,0x02,0x2D,0x30,0x20,0x00,
    0x00,0x08,0x08,0xF8,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,
    0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x20,0x3F,0x20,0x00,0x3F,0x20,0x00,0x3F,
    0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x3F,0x21,0x00,0x00,0x20,0x3F,0x20,
    0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x1F,0x20,0x20,0x20,0x20,0x1F,0x00,
    0x80,0x80,0x00,0x80,0x80,0x00,0x00,0x00,0x80,0xFF,0xA1,0x20,0x20,0x11,0x0E,0x00,
    0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x0E,0x11,0x20,0x20,0xA0,0xFF,0x80,
    0x80,0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x20,0x20,0x3F,0x21,0x20,0x00,0x01,0x00,
    0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x33,0x24,0x24,0x24,0x24,0x19,0x00,
    0x00,0x80,0x80,0xE0,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x1F,0x20,0x20,0x00,0x00,
    0x80,0x80,0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x1F,0x20,0x20,0x20,0x10,0x3F,0x20,
    0x80,0x80,0x80,0x00,0x00,0x80,0x80,0x80,0x00,0x01,0x0E,0x30,0x08,0x06,0x01,0x00,
    0x80,0x80,0x00,0x80,0x00,0x80,0x80,0x80,0x0F,0x30,0x0C,0x03,0x0C,0x30,0x0F,0x00,
    0x00,0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x31,0x2E,0x0E,0x31,0x20,0x00,
    0x80,0x80,0x80,0x00,0x00,0x80,0x80,0x80,0x80,0x81,0x8E,0x70,0x18,0x06,0x01,0x00,
    0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x21,0x30,0x2C,0x22,0x21,0x30,0x00,    //z 55

    0x00,0x00,0xC0,0x38,0xE0,0x00,0x00,0x00,0x20,0x3C,0x23,0x02,0x02,0x27,0x38,0x20,    //A 56
    0x08,0xF8,0x88,0x88,0x88,0x70,0x00,0x00,0x20,0x3F,0x20,0x20,0x20,0x11,0x0E,0x00,
    0xC0,0x30,0x08,0x08,0x08,0x08,0x38,0x00,0x07,0x18,0x20,0x20,0x20,0x10,0x08,0x00,
    0x08,0xF8,0x08,0x08,0x08,0x10,0xE0,0x00,0x20,0x3F,0x20,0x20,0x20,0x10,0x0F,0x00,
    0x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,0x20,0x3F,0x20,0x20,0x23,0x20,0x18,0x00,
    0x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,0x20,0x3F,0x20,0x00,0x03,0x00,0x00,0x00,
    0xC0,0x30,0x08,0x08,0x08,0x38,0x00,0x00,0x07,0x18,0x20,0x20,0x22,0x1E,0x02,0x00,
    0x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,0x20,0x3F,0x21,0x01,0x01,0x21,0x3F,0x20,
    0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,
    0x00,0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0xC0,0x80,0x80,0x80,0x7F,0x00,0x00,0x00,
    0x08,0xF8,0x88,0xC0,0x28,0x18,0x08,0x00,0x20,0x3F,0x20,0x01,0x26,0x38,0x20,0x00,
    0x08,0xF8,0x08,0x00,0x00,0x00,0x00,0x00,0x20,0x3F,0x20,0x20,0x20,0x20,0x30,0x00,
    0x08,0xF8,0xF8,0x00,0xF8,0xF8,0x08,0x00,0x20,0x3F,0x00,0x3F,0x00,0x3F,0x20,0x00,
    0x08,0xF8,0x30,0xC0,0x00,0x08,0xF8,0x08,0x20,0x3F,0x20,0x00,0x07,0x18,0x3F,0x00,
    0xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,0x0F,0x10,0x20,0x20,0x20,0x10,0x0F,0x00,
    0x08,0xF8,0x08,0x08,0x08,0x08,0xF0,0x00,0x20,0x3F,0x21,0x01,0x01,0x01,0x00,0x00,
    0xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,0x0F,0x18,0x24,0x24,0x38,0x50,0x4F,0x00,
    0x08,0xF8,0x88,0x88,0x88,0x88,0x70,0x00,0x20,0x3F,0x20,0x00,0x03,0x0C,0x30,0x20,
    0x00,0x70,0x88,0x08,0x08,0x08,0x38,0x00,0x00,0x38,0x20,0x21,0x21,0x22,0x1C,0x00,
    0x18,0x08,0x08,0xF8,0x08,0x08,0x18,0x00,0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x00,
    0x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,0x00,0x1F,0x20,0x20,0x20,0x20,0x1F,0x00,
    0x08,0x78,0x88,0x00,0x00,0xC8,0x38,0x08,0x00,0x00,0x07,0x38,0x0E,0x01,0x00,0x00,
    0xF8,0x08,0x00,0xF8,0x00,0x08,0xF8,0x00,0x03,0x3C,0x07,0x00,0x07,0x3C,0x03,0x00,
    0x08,0x18,0x68,0x80,0x80,0x68,0x18,0x08,0x20,0x30,0x2C,0x03,0x03,0x2C,0x30,0x20,
    0x08,0x38,0xC8,0x00,0xC8,0x38,0x08,0x00,0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x00,
    0x10,0x08,0x08,0x08,0xC8,0x38,0x08,0x00,0x20,0x38,0x26,0x21,0x20,0x20,0x18,0x00,    //Z 81
    
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,    //SPACE 82
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		
    0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x01,0x01,0x01,0x01,0x01,    //	84
    0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x01,0x01,0x01,0x01,0x01,0x01,0x01,0x01,
    0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x01,0x01,0x01,0x01,0x01,0x00,0x00,0x00,    
    0x00,0x00,0x00,0xF0,0xF0,0x80,0x80,0x80,0x00,0x00,0x00,0x0F,0x0F,0x01,0x01,0x01,    
    0x80,0x80,0x80,0xF0,0xF0,0x80,0x80,0x80,0x01,0x01,0x01,0x0F,0x0F,0x01,0x01,0x01,    
    0x80,0x80,0x80,0xF0,0xF0,0x00,0x00,0x00,0x01,0x01,0x01,0x0F,0x0F,0x00,0x00,0x00,    
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,    
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,    
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,    
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,    
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,    
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,    
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,    
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,    
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,   
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,    //	99
		
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,		//LOGO	100
    0x00,0xE0,0xE0,0xE0,0x00,0xE0,0xE0,0xE0,0x00,0xEE,0xEE,0xEE,0x00,0x00,0x00,0x00,
    0x00,0xE0,0xE0,0xE0,0x00,0xE0,0xE0,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0xE0,0xE0,0xE0,0x00,0xE0,0xE0,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0xE0,0xE0,0xE0,0x00,0xE0,0xE0,0xE0,0x00,0x80,0x80,0xC0,0xC0,0xC0,0xE0,0xE0,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xE0,0xE0,0xE0,0xE0,0xC0,0xC0,0xC0,0x80,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0xC0,0xC0,0xE0,0xE0,0xE0,0xE0,0xE0,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xE0,0xC0,0xC0,0xC0,0x80,0x80,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0xA0,0x40,0xA0,0x00,0xA0,0x40,0xA0,0x00,0x00,0x00,0x00,0x00,0xAA,0x44,0xAA,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0xEE,0xEE,0xEE,0x00,0x00,0x00,0x00,0x00,0xEE,0xEE,0xEE,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xE0,
    0x00,0x00,0xC0,0xE0,0xF0,0xFC,0xFE,0xFE,0xFC,0xFF,0xFF,0xFF,0xFF,0xFF,0x0F,0x03,
    0xFF,0xFF,0x7F,0x7F,0x3F,0x3F,0x7F,0x7F,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0xFF,0xFF,0xFF,0xFC,0xFC,0xEF,0xC7,0x17,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x37,0x76,0x60,0xE0,0xE0,0xC0,0x80,0x80,0x00,0x00,0x00,0x00,0x01,0x03,0x07,0x0F,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0x3F,0xFE,0xFC,0xF8,0xF0,0xF0,0xE0,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xC0,0x80,0x18,0x3C,0x7E,0x7F,0x1F,0x0F,
    0x80,0xC0,0xE0,0xE0,0x60,0x76,0x37,0x17,0x07,0x03,0x01,0x00,0x00,0x00,0x00,0x00,
    0xC7,0xEF,0xFC,0xFC,0xFF,0xFF,0xFF,0x7F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x7F,0x3F,0x3F,0x7F,0x7F,0xFF,0xFF,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x03,
    0xFE,0xFC,0xF0,0xE0,0xC0,0x00,0x00,0x00,0x0F,0xFF,0xFF,0xFF,0xFF,0xFF,0xFC,0xE0,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0xAA,0x44,0xAA,0x00,0x00,0x00,0x00,0x00,0xAA,0x44,0xAA,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0xEE,0xEE,0xEE,0x00,0x00,0x00,0x00,0x00,0xEE,0xEE,0xEE,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xC0,0x80,0x00,0x03,0x0F,0x1F,0x3F,0x7F,0xFF,0xFF,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0xFC,0xFC,0xF8,0xF8,0xF0,0xF0,0xF0,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0xF0,0xF0,0xF0,0xF0,0xF0,0xF8,0xF8,
    0x00,0x00,0x00,0x00,0x00,0x80,0xC0,0xE0,0xFC,0xFC,0xFE,0xFE,0x7F,0x7F,0x3F,0x1F,
    0xF0,0xF8,0xF8,0xF1,0xE3,0xC7,0x0F,0x1F,0x0F,0x0F,0x07,0x03,0x01,0x00,0x00,0x00,
    0x3F,0x7F,0xFF,0xFE,0xFC,0xF8,0xF0,0xE0,0x00,0x00,0x00,0x01,0x03,0x07,0x0F,0x1F,
    0xC0,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x3F,0x7F,0x7F,0xFF,0xFE,0xFE,0xFC,0xF8,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0xF0,0xF0,0xF0,0xF0,0xF0,0xF0,0xF0,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xF0,0xF0,0xF8,0xF8,0xFC,0xFC,0xFE,0xFF,
    0xC0,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x1F,0xFF,0x7F,0x3F,0x1F,0x0F,0x03,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0xAA,0x44,0xAA,0x00,0x00,0x00,0x00,0x00,0xAA,0x44,0xAA,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0xEE,0xEE,0xEE,0x00,0x00,0x00,0x00,0x00,0x0E,0x0E,0x0E,0x00,0x0E,0x0E,0x0E,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x01,0x01,0x03,0x03,0x03,0x03,0x07,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x07,0x07,0x07,0x07,0x07,0x07,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x03,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x01,0x01,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x03,0x07,0x07,0x07,0x07,0x07,0x07,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x07,0x03,0x03,0x03,0x03,0x01,0x01,0x00,0x00,0x0A,0x04,0x0A,0x00,0x0A,0x04,0x0A,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0A,0x04,0x0A,0x00,0x0A,0x04,0x0A,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0A,0x04,0x0A,0x00,0x0A,0x04,0x0A,
    0x00,0x00,0x00,0x00,0x00,0xAA,0x44,0xAA,0x00,0x0A,0x04,0x0A,0x00,0x0A,0x04,0x0A,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

    0x00,0x00,0x00,0x80,0x52,0x25,0xA5,0x95,0x00,0x80,0xC0,0x7F,0x40,0x41,0x80,0x80,
    0x15,0x15,0x95,0xA2,0x60,0x90,0x00,0x00,0x42,0x44,0x82,0x80,0x41,0xFF,0x00,0x00,
    0x00,0x00,0x00,0x00,0xA8,0x54,0x54,0x54,0x00,0x80,0xFC,0x83,0x80,0x42,0x42,0x81,
    0x54,0x54,0x54,0x48,0xA0,0x00,0x00,0x00,0x84,0x48,0x45,0x42,0x82,0x41,0x7E,0x80,
    0x00,0x00,0x20,0xA0,0x44,0x4A,0x2A,0x2A,0x80,0xC0,0x7E,0x41,0x80,0x82,0x41,0x41,
    0x2A,0x2A,0x4A,0x44,0xA0,0x20,0x00,0x00,0x84,0x88,0x45,0x41,0x42,0x83,0xFC,0x80,

];

function LCD_PRINTMINICHAR(x=0,y=0,index=0){
    let temp=[];
    for(let i=0;i<6;i++){
        temp.push(LCD_MINICHAR[index*6+i]);
    }
    LCD_PRINTBLOCK(((x)*6+2),y,temp);
}

function LCD_PRINTMINISTRING(x=0,y=0,string=""){
    const punc=[',','.','/','\\','"','\'',':',';','~','`','!','?','<','>','|','-','_','+','=','(',')','[',']','@','#','$','%','^','&','*'];
    string=string.split('');
    let i=0;
    while(1){
        if(x+i>20){
            x=-i;
            y++;
        }
        if(y>7||i>=string.length){
            break;
        }
        const char=string[i].charCodeAt();
        if(48<=char&&char<=57){         //0-9
            LCD_PRINTMINICHAR(x+i,y,char-48+52);
        }else if(97<=char&&char<=122){  //a-z
            LCD_PRINTMINICHAR(x+i,y,char-97+26);
        }else if(65<=char&&char<=90){   //A-Z
            LCD_PRINTMINICHAR(x+i,y,char-65+0);
        }else{
            if(string[i]=='\n'){
                x=-i-1;
                y++;
            }else if(punc.indexOf(string[i])>=0){
                LCD_PRINTMINICHAR(x+i,y,62+punc.indexOf(string[i]));
            }else{
                LCD_PRINTMINICHAR(x+i,y,92);
            }
        }
        i++;
    }
}

const LCD_MINICHAR=[
    0xFC,0x22,0x22,0xFC,0x00,0x00,	//A 0
    0xFE,0x92,0x92,0x6C,0x00,0x00,	//B 1
    0x7C,0x82,0x82,0x44,0x00,0x00,	//C 2
    0xFE,0x82,0x82,0x7C,0x00,0x00,	//D 3
    0xFE,0x92,0x92,0x82,0x00,0x00,	//E 4
    0xFE,0x12,0x12,0x12,0x00,0x00,	//F 5
    0x7C,0x82,0xA2,0x64,0x00,0x00,	//G 6
    0xFE,0x10,0x10,0xFE,0x00,0x00,	//H 7
    0x00,0x82,0xFE,0x82,0x00,0x00,	//I 8
    0x40,0x82,0x7E,0x02,0x00,0x00,	//J 9
    0xFE,0x10,0x28,0xC6,0x00,0x00,	//K 10
    0xFE,0x80,0x80,0x80,0x00,0x00,	//L 11
    0xFE,0x0C,0xF0,0x0C,0xFE,0x00,	//M 12
    0xFE,0x1C,0x60,0xFE,0x00,0x00,	//N 13
    0x7C,0x82,0x82,0x7C,0x00,0x00,	//O 14
    0xFE,0x12,0x12,0x0C,0x00,0x00,	//P 15
    0x7C,0x82,0xC2,0xFC,0x00,0x00,	//Q 16
    0xFE,0x32,0x52,0x8C,0x00,0x00,	//R 17
    0x4C,0x92,0x92,0x64,0x00,0x00,	//S 18
    0x02,0x02,0xFE,0x02,0x02,0x00,	//T 19
    0x7E,0x80,0x80,0x7E,0x00,0x00,	//U 20
    0x1E,0x60,0x80,0x60,0x1E,0x00,	//V 21
    0xFE,0x60,0x1C,0x60,0xFE,0x00,	//W 22
    0xC6,0x28,0x10,0x28,0xC6,0x00,	//X 23
    0x0E,0x10,0xE0,0x10,0x0E,0x00,	//Y 24
    0xE2,0x92,0x8A,0x86,0x00,0x00,	//Z 25

    0x60,0x90,0x90,0xE0,0x00,0x00,	//a 26
    0xFE,0x90,0x90,0x60,0x00,0x00,	//b 27
    0x70,0x88,0x88,0x50,0x00,0x00,	//c 28
    0x60,0x90,0x90,0xFE,0x00,0x00,	//d 29
    0x70,0xA8,0xA8,0x30,0x00,0x00,	//e 30
    0x10,0xFC,0x12,0x04,0x00,0x00,	//f 31
    0x4C,0x92,0x7C,0x00,0x00,0x00,	//g 32
    0xFE,0x10,0x10,0xE0,0x00,0x00,	//h 33
    0x00,0x00,0xF4,0x00,0x00,0x00,	//i 34
    0x40,0x80,0x74,0x00,0x00,0x00,	//j 35
    0xFE,0x20,0x50,0x88,0x00,0x00,	//k 36
    0x00,0x00,0xFE,0x00,0x00,0x00,	//l 37
    0xF0,0x10,0xE0,0x10,0xE0,0x00,	//m 38
    0xF0,0x10,0x10,0xE0,0x00,0x00,	//n 39
    0x60,0x90,0x90,0x60,0x00,0x00,	//o 40
    0xF8,0x24,0x24,0x18,0x00,0x00,	//p 41
    0x18,0x24,0x24,0xF8,0x00,0x00,	//q 42
    0xF8,0x10,0x08,0x08,0x00,0x00,	//r 43
    0x90,0xA8,0x48,0x00,0x00,0x00,	//s 44
    0x10,0x7C,0x90,0x40,0x00,0x00,	//t 45
    0x70,0x80,0x80,0xF0,0x00,0x00,	//u 46
    0x30,0x40,0x80,0x40,0x30,0x00,	//v 47
    0xF0,0x80,0x70,0x80,0xF0,0x00,	//w 48
    0x00,0xD0,0x20,0xD0,0x00,0x00,	//x 49
    0x00,0x98,0x60,0x18,0x00,0x00,	//y 50
    0xC8,0xA8,0x98,0x00,0x00,0x00,	//z 51

    0x7C,0xE2,0x8E,0x7C,0x00,0x00,	//0 52
    0x00,0x84,0xFE,0x80,0x00,0x00,	//1 53
    0xC4,0xA2,0x92,0x8C,0x00,0x00,	//2 54
    0x44,0x92,0x92,0x6C,0x00,0x00,	//3 55
    0x1E,0x10,0xFE,0x10,0x00,0x00,	//4 56
    0x4E,0x8A,0x8A,0x72,0x00,0x00,	//5 57
    0x7C,0x92,0x92,0x64,0x00,0x00,	//6 58
    0x06,0xE2,0x12,0x0E,0x00,0x00,	//7 59
    0x6C,0x92,0x92,0x6C,0x00,0x00,	//8 60
    0x4C,0x92,0x92,0x7C,0x00,0x00,	//9 61

    0x00,0xB0,0x70,0x00,0x00,0x00,	//, 62
    0x00,0xC0,0xC0,0x00,0x00,0x00,	//. 63
    0x00,0xE0,0x18,0x07,0x00,0x00,	/// 64
    0x00,0x07,0x18,0xE0,0x00,0x00,	//\ 65
    0x03,0x00,0x03,0x00,0x00,0x00,	//" 66
    0x00,0x06,0x00,0x00,0x00,0x00,	//' 67
    0x00,0x6C,0x6C,0x00,0x00,0x00,	//: 68
    0x00,0x6C,0xEC,0x00,0x00,0x00,	//; 69
    0x10,0x08,0x10,0x20,0x10,0x00,	//~ 70
    0x00,0x02,0x02,0x04,0x00,0x00,	//` 71
    0x00,0x00,0x5E,0x00,0x00,0x00,	//! 72
    0x00,0x04,0x52,0x0C,0x00,0x00,	//? 73
    0x00,0x08,0x14,0x22,0x00,0x00,	//< 74
    0x00,0x22,0x14,0x08,0x00,0x00,	//> 75
    0x00,0x00,0x7E,0x00,0x00,0x00,	//| 76
    0x00,0x10,0x10,0x10,0x00,0x00,	//- 77
    0x80,0x80,0x80,0x80,0x00,0x00,	//_ 78
    0x00,0x10,0x38,0x10,0x00,0x00,	//+ 79
    0x00,0x28,0x28,0x28,0x00,0x00,	//= 80
    0x00,0x38,0x44,0x82,0x00,0x00,	//( 81
    0x00,0x82,0x44,0x38,0x00,0x00,	//) 82
    0x00,0xFE,0x82,0x82,0x00,0x00,	//[ 83
    0x00,0x82,0x82,0xFE,0x00,0x00,	//] 84
    0x78,0xB4,0xB4,0xC4,0x78,0x00,	//@ 85
    0x48,0xFC,0x48,0xFC,0x48,0x00,	//# 86
    0x48,0x54,0xFE,0x54,0x24,0x00,	//$ 87
    0xC6,0x26,0x10,0xC8,0xC6,0x00,	//% 88
    0x08,0x04,0x02,0x04,0x08,0x00,	//^ 89
    0x68,0x94,0xA8,0x40,0xA0,0x00,	//& 90
    0x04,0x0A,0x04,0x00,0x00,0x00,	//* 91
    0x00,0x00,0x00,0x00,0x00,0x00,	//  92

];

function cloneJSON(obj) {
    // basic type deep copy
    if (obj === null || obj === undefined || typeof obj !== 'object')  {
        return obj
    }
    // array deep copy
    if (obj instanceof Array) {
        var cloneA = [];
        for (var i = 0; i < obj.length; ++i) {
            cloneA[i] = cloneJSON(obj[i]);
        }              
        return cloneA;
    }                  
    // object deep copy
    var cloneO = {};   
    for (var i in obj) {
        cloneO[i] = cloneJSON(obj[i]);
    }                  
    return cloneO;
}